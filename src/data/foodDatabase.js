// Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð² Ð¿Ð¸Ñ‚Ð°Ð½Ð¸Ñ (Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ USDA Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²)
// ÐšÐ°Ð»Ð¾Ñ€Ð¸Ð¸ Ð¸ Ð‘Ð–Ð£ ÑƒÐºÐ°Ð·Ð°Ð½Ñ‹ Ð½Ð° 100Ð³ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°

export const FOOD_DATABASE = {
  // ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹
  Ð¼Ð¾Ð»Ð¾ÐºÐ¾: {
    name: "ÐœÐ¾Ð»Ð¾ÐºÐ¾ 3.2%",
    category: "ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 60,
    protein: 2.9,
    carbs: 4.7,
    fat: 3.2,
    fiber: 0,
    emoji: "ðŸ¥›",
  },
  Ñ‚Ð²Ð¾Ñ€Ð¾Ð³: {
    name: "Ð¢Ð²Ð¾Ñ€Ð¾Ð³ Ð¾Ð±ÐµÐ·Ð¶Ð¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹",
    category: "ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 72,
    protein: 18,
    carbs: 1.3,
    fat: 0.6,
    fiber: 0,
    emoji: "ðŸ§€",
  },
  Ð¹Ð¾Ð³ÑƒÑ€Ñ‚: {
    name: "Ð™Ð¾Ð³ÑƒÑ€Ñ‚ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ð¹",
    category: "ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 60,
    protein: 4.3,
    carbs: 6.2,
    fat: 1.5,
    fiber: 0,
    emoji: "ðŸ¥›",
  },
  ÑÑ‹Ñ€: {
    name: "Ð¡Ñ‹Ñ€ Ñ‚Ð²ÐµÑ€Ð´Ñ‹Ð¹",
    category: "ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 350,
    protein: 25,
    carbs: 0,
    fat: 27,
    fiber: 0,
    emoji: "ðŸ§€",
  },

  // ÐœÑÑÐ¾ Ð¸ Ñ€Ñ‹Ð±Ð°
  "ÐºÑƒÑ€Ð¸Ð½Ð°Ñ Ð³Ñ€ÑƒÐ´ÐºÐ°": {
    name: "ÐšÑƒÑ€Ð¸Ð½Ð°Ñ Ð³Ñ€ÑƒÐ´ÐºÐ° Ð±ÐµÐ· ÐºÐ¾Ð¶Ð¸",
    category: "ÐœÑÑÐ¾ Ð¸ Ð¿Ñ‚Ð¸Ñ†Ð°",
    calories: 165,
    protein: 31,
    carbs: 0,
    fat: 3.6,
    fiber: 0,
    emoji: "ðŸ—",
  },
  Ð³Ð¾Ð²ÑÐ´Ð¸Ð½Ð°: {
    name: "Ð“Ð¾Ð²ÑÐ´Ð¸Ð½Ð° Ð¿Ð¾ÑÑ‚Ð½Ð°Ñ",
    category: "ÐœÑÑÐ¾ Ð¸ Ð¿Ñ‚Ð¸Ñ†Ð°",
    calories: 187,
    protein: 26,
    carbs: 0,
    fat: 9,
    fiber: 0,
    emoji: "ðŸ¥©",
  },
  Ð»Ð¾ÑÐ¾ÑÑŒ: {
    name: "Ð›Ð¾ÑÐ¾ÑÑŒ",
    category: "Ð Ñ‹Ð±Ð° Ð¸ Ð¼Ð¾Ñ€ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 208,
    protein: 25,
    carbs: 0,
    fat: 12,
    fiber: 0,
    emoji: "ðŸŸ",
  },
  Ñ‚ÑƒÐ½ÐµÑ†: {
    name: "Ð¢ÑƒÐ½ÐµÑ† Ð² ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¼ ÑÐ¾ÐºÑƒ",
    category: "Ð Ñ‹Ð±Ð° Ð¸ Ð¼Ð¾Ñ€ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",
    calories: 132,
    protein: 29,
    carbs: 0,
    fat: 1,
    fiber: 0,
    emoji: "ðŸŸ",
  },

  // Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹
  Ð¾Ð²ÑÑÐ½ÐºÐ°: {
    name: "ÐžÐ²ÑÑÐ½Ñ‹Ðµ Ñ…Ð»Ð¾Ð¿ÑŒÑ",
    category: "Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹",
    calories: 389,
    protein: 16.9,
    carbs: 66.3,
    fat: 6.9,
    fiber: 10.6,
    emoji: "ðŸ¥£",
  },
  Ð³Ñ€ÐµÑ‡ÐºÐ°: {
    name: "Ð“Ñ€ÐµÑ‡Ð½ÐµÐ²Ð°Ñ ÐºÑ€ÑƒÐ¿Ð°",
    category: "Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹",
    calories: 343,
    protein: 13.3,
    carbs: 62.1,
    fat: 3.4,
    fiber: 11.3,
    emoji: "ðŸŒ¾",
  },
  Ñ€Ð¸Ñ: {
    name: "Ð Ð¸Ñ Ð±ÐµÐ»Ñ‹Ð¹",
    category: "Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹",
    calories: 365,
    protein: 7,
    carbs: 78,
    fat: 1,
    fiber: 3,
    emoji: "ðŸš",
  },
  ÐºÐ¸Ð½Ð¾Ð°: {
    name: "ÐšÐ¸Ð½Ð¾Ð°",
    category: "Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹",
    calories: 368,
    protein: 14.1,
    carbs: 57.2,
    fat: 6.1,
    fiber: 7,
    emoji: "ðŸŒ¾",
  },

  // ÐžÐ²Ð¾Ñ‰Ð¸
  Ð±Ñ€Ð¾ÐºÐºÐ¾Ð»Ð¸: {
    name: "Ð‘Ñ€Ð¾ÐºÐºÐ¾Ð»Ð¸",
    category: "ÐžÐ²Ð¾Ñ‰Ð¸",
    calories: 34,
    protein: 2.8,
    carbs: 6.6,
    fat: 0.4,
    fiber: 2.6,
    emoji: "ðŸ¥¦",
  },
  Ð¿Ð¾Ð¼Ð¸Ð´Ð¾Ñ€: {
    name: "ÐŸÐ¾Ð¼Ð¸Ð´Ð¾Ñ€Ñ‹",
    category: "ÐžÐ²Ð¾Ñ‰Ð¸",
    calories: 18,
    protein: 0.9,
    carbs: 3.9,
    fat: 0.2,
    fiber: 1.2,
    emoji: "ðŸ…",
  },
  Ð¾Ð³ÑƒÑ€ÐµÑ†: {
    name: "ÐžÐ³ÑƒÑ€Ñ†Ñ‹",
    category: "ÐžÐ²Ð¾Ñ‰Ð¸",
    calories: 16,
    protein: 0.7,
    carbs: 4.1,
    fat: 0.1,
    fiber: 1,
    emoji: "ðŸ¥’",
  },
  Ð¼Ð¾Ñ€ÐºÐ¾Ð²ÑŒ: {
    name: "ÐœÐ¾Ñ€ÐºÐ¾Ð²ÑŒ",
    category: "ÐžÐ²Ð¾Ñ‰Ð¸",
    calories: 41,
    protein: 0.9,
    carbs: 9.6,
    fat: 0.2,
    fiber: 2.8,
    emoji: "ðŸ¥•",
  },
  ÐºÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ: {
    name: "ÐšÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ",
    category: "ÐžÐ²Ð¾Ñ‰Ð¸",
    calories: 77,
    protein: 2,
    carbs: 17,
    fat: 0.1,
    fiber: 2.2,
    emoji: "ðŸ¥”",
  },

  // Ð¤Ñ€ÑƒÐºÑ‚Ñ‹
  ÑÐ±Ð»Ð¾ÐºÐ¾: {
    name: "Ð¯Ð±Ð»Ð¾ÐºÐ¾",
    category: "Ð¤Ñ€ÑƒÐºÑ‚Ñ‹",
    calories: 52,
    protein: 0.3,
    carbs: 13.8,
    fat: 0.2,
    fiber: 2.4,
    emoji: "ðŸŽ",
  },
  Ð±Ð°Ð½Ð°Ð½: {
    name: "Ð‘Ð°Ð½Ð°Ð½",
    category: "Ð¤Ñ€ÑƒÐºÑ‚Ñ‹",
    calories: 89,
    protein: 1.1,
    carbs: 22.8,
    fat: 0.3,
    fiber: 2.6,
    emoji: "ðŸŒ",
  },
  Ð°Ð¿ÐµÐ»ÑŒÑÐ¸Ð½: {
    name: "ÐÐ¿ÐµÐ»ÑŒÑÐ¸Ð½",
    category: "Ð¤Ñ€ÑƒÐºÑ‚Ñ‹",
    calories: 47,
    protein: 0.9,
    carbs: 11.8,
    fat: 0.1,
    fiber: 2.4,
    emoji: "ðŸŠ",
  },
  Ð°Ð²Ð¾ÐºÐ°Ð´Ð¾: {
    name: "ÐÐ²Ð¾ÐºÐ°Ð´Ð¾",
    category: "Ð¤Ñ€ÑƒÐºÑ‚Ñ‹",
    calories: 160,
    protein: 2,
    carbs: 8.5,
    fat: 14.7,
    fiber: 6.7,
    emoji: "ðŸ¥‘",
  },

  // ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÐµÐ¼ÐµÐ½Ð°
  Ð¼Ð¸Ð½Ð´Ð°Ð»ÑŒ: {
    name: "ÐœÐ¸Ð½Ð´Ð°Ð»ÑŒ",
    category: "ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÐµÐ¼ÐµÐ½Ð°",
    calories: 579,
    protein: 21.2,
    carbs: 21.6,
    fat: 49.9,
    fiber: 12.5,
    emoji: "ðŸ¥œ",
  },
  "Ð³Ñ€ÐµÑ†ÐºÐ¸Ð¹ Ð¾Ñ€ÐµÑ…": {
    name: "Ð“Ñ€ÐµÑ†ÐºÐ¸Ð¹ Ð¾Ñ€ÐµÑ…",
    category: "ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÐµÐ¼ÐµÐ½Ð°",
    calories: 654,
    protein: 15.2,
    carbs: 13.7,
    fat: 65.2,
    fiber: 6.7,
    emoji: "ðŸ¥œ",
  },
  "ÑÐµÐ¼ÐµÐ½Ð° Ñ‡Ð¸Ð°": {
    name: "Ð¡ÐµÐ¼ÐµÐ½Ð° Ñ‡Ð¸Ð°",
    category: "ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÐµÐ¼ÐµÐ½Ð°",
    calories: 486,
    protein: 16.5,
    carbs: 42.1,
    fat: 30.7,
    fiber: 34.4,
    emoji: "ðŸŒ±",
  },

  // Ð¯Ð¹Ñ†Ð°
  ÑÐ¹Ñ†Ð¾: {
    name: "ÐšÑƒÑ€Ð¸Ð½Ð¾Ðµ ÑÐ¹Ñ†Ð¾",
    category: "Ð¯Ð¹Ñ†Ð°",
    calories: 155,
    protein: 13,
    carbs: 1.1,
    fat: 11,
    fiber: 0,
    emoji: "ðŸ¥š",
  },

  // Ð¥Ð»ÐµÐ± Ð¸ Ð²Ñ‹Ð¿ÐµÑ‡ÐºÐ°
  Ñ…Ð»ÐµÐ±: {
    name: "Ð¥Ð»ÐµÐ± Ñ†ÐµÐ»ÑŒÐ½Ð¾Ð·ÐµÑ€Ð½Ð¾Ð²Ð¾Ð¹",
    category: "Ð¥Ð»ÐµÐ± Ð¸ Ð²Ñ‹Ð¿ÐµÑ‡ÐºÐ°",
    calories: 247,
    protein: 13,
    carbs: 41,
    fat: 4.2,
    fiber: 7,
    emoji: "ðŸž",
  },

  // Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°
  Ð±Ð¾Ñ€Ñ‰: {
    name: "Ð‘Ð¾Ñ€Ñ‰ Ñ Ð¼ÑÑÐ¾Ð¼",
    category: "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°",
    calories: 49,
    protein: 2.6,
    carbs: 5.5,
    fat: 1.8,
    fiber: 1.8,
    emoji: "ðŸ²",
  },
  Ð¿Ð»Ð¾Ð²: {
    name: "ÐŸÐ»Ð¾Ð² Ñ Ð¼ÑÑÐ¾Ð¼",
    category: "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°",
    calories: 218,
    protein: 8.7,
    carbs: 24.9,
    fat: 9.8,
    fiber: 0.4,
    emoji: "ðŸš",
  },
  "ÑÐ°Ð»Ð°Ñ‚ Ñ†ÐµÐ·Ð°Ñ€ÑŒ": {
    name: "Ð¡Ð°Ð»Ð°Ñ‚ Ð¦ÐµÐ·Ð°Ñ€ÑŒ",
    category: "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°",
    calories: 190,
    protein: 7,
    carbs: 8,
    fat: 15,
    fiber: 2,
    emoji: "ðŸ¥—",
  },
  "Ð¿Ð¸Ñ†Ñ†Ð° Ð¼Ð°Ñ€Ð³Ð°Ñ€Ð¸Ñ‚Ð°": {
    name: "ÐŸÐ¸Ñ†Ñ†Ð° ÐœÐ°Ñ€Ð³Ð°Ñ€Ð¸Ñ‚Ð°",
    category: "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°",
    calories: 266,
    protein: 12,
    carbs: 33,
    fat: 10,
    fiber: 2.3,
    emoji: "ðŸ•",
  },
};

// ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð²
export const FOOD_CATEGORIES = {
  "ÐœÐ¾Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹": { emoji: "ðŸ¥›", color: "#E3F2FD" },
  "ÐœÑÑÐ¾ Ð¸ Ð¿Ñ‚Ð¸Ñ†Ð°": { emoji: "ðŸ—", color: "#FFF3E0" },
  "Ð Ñ‹Ð±Ð° Ð¸ Ð¼Ð¾Ñ€ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹": { emoji: "ðŸŸ", color: "#E0F2F1" },
  "Ð—Ð»Ð°ÐºÐ¸ Ð¸ ÐºÑ€ÑƒÐ¿Ñ‹": { emoji: "ðŸŒ¾", color: "#FFF8E1" },
  ÐžÐ²Ð¾Ñ‰Ð¸: { emoji: "ðŸ¥¬", color: "#E8F5E8" },
  Ð¤Ñ€ÑƒÐºÑ‚Ñ‹: { emoji: "ðŸŽ", color: "#FCE4EC" },
  "ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÐµÐ¼ÐµÐ½Ð°": { emoji: "ðŸ¥œ", color: "#F3E5F5" },
  Ð¯Ð¹Ñ†Ð°: { emoji: "ðŸ¥š", color: "#FFF3E0" },
  "Ð¥Ð»ÐµÐ± Ð¸ Ð²Ñ‹Ð¿ÐµÑ‡ÐºÐ°": { emoji: "ðŸž", color: "#EFEBE9" },
  "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð»ÑŽÐ´Ð°": { emoji: "ðŸ½ï¸", color: "#F5F5F5" },
};

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð²
export function searchFood(query) {
  const searchTerm = query.toLowerCase().trim();

  if (!searchTerm) return [];

  const results = [];

  for (const [key, food] of Object.entries(FOOD_DATABASE)) {
    const score = calculateMatchScore(searchTerm, key, food.name.toLowerCase());
    if (score > 0) {
      results.push({
        key,
        ...food,
        score,
      });
    }
  }

  return results.sort((a, b) => b.score - a.score).slice(0, 10);
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ñ€ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ð¾ÑÑ‚Ð¸
function calculateMatchScore(query, key, name) {
  let score = 0;

  // Ð¢Ð¾Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÐºÐ»ÑŽÑ‡Ð°
  if (key === query) score += 100;

  // ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°
  if (key.startsWith(query)) score += 80;
  if (name.startsWith(query)) score += 70;

  // Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ
  if (key.includes(query)) score += 60;
  if (name.includes(query)) score += 50;

  // Ð§Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð²
  const queryWords = query.split(" ");
  const keyWords = key.split(" ");
  const nameWords = name.split(" ");

  queryWords.forEach((qWord) => {
    keyWords.forEach((kWord) => {
      if (kWord.includes(qWord) || qWord.includes(kWord)) score += 30;
    });
    nameWords.forEach((nWord) => {
      if (nWord.includes(qWord) || qWord.includes(nWord)) score += 20;
    });
  });

  return score;
}
