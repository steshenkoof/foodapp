var t;import{r as e,a as i,R as n}from"./vendor-3192ac2a.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var s={exports:{}},r={},a=e,o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,i){var n,s={},r=null,a=null;for(n in void 0!==i&&(r=""+i),void 0!==e.key&&(r=""+e.key),void 0!==e.ref&&(a=e.ref),e)c.call(e,n)&&!p.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===s[n]&&(s[n]=e[n]);return{$$typeof:o,type:t,key:r,ref:a,props:s,_owner:d.current}}r.Fragment=l,r.jsx=h,r.jsxs=h,s.exports=r;var u=s.exports,m={},x=i;m.createRoot=x.createRoot,m.hydrateRoot=x.hydrateRoot;const g=e.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),f=e.createContext({}),y=e.createContext(null),v="undefined"!=typeof document,b=v?e.useLayoutEffect:e.useEffect,j=e.createContext({strict:!1}),w=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),S="data-"+w("framerAppearId");function C(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function P(t){return"string"==typeof t||Array.isArray(t)}function N(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}const k=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T=["initial",...k];function E(t){return N(t.animate)||T.some((e=>P(t[e])))}function A(t){return Boolean(E(t)||t.variants)}function D(t){const{initial:i,animate:n}=function(t,e){if(E(t)){const{initial:e,animate:i}=t;return{initial:!1===e||P(e)?e:void 0,animate:P(i)?i:void 0}}return!1!==t.inherit?e:{}}(t,e.useContext(f));return e.useMemo((()=>({initial:i,animate:n})),[R(i),R(n)])}function R(t){return Array.isArray(t)?t.join(" "):t}const z={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},B={};for(const lo in z)B[lo]={isEnabled:t=>z[lo].some((e=>!!t[e]))};const M=e.createContext({}),F=e.createContext({}),V=Symbol.for("motionComponentSymbol");function I({preloadedFeatures:t,createVisualElement:i,useRender:n,useVisualState:s,Component:r}){t&&function(t){for(const e in t)B[e]={...B[e],...t[e]}}(t);const a=e.forwardRef((function(a,o){let l;const c={...e.useContext(g),...a,layoutId:L(a)},{isStatic:d}=c,p=D(a),h=s(a,d);if(!d&&v){p.visualElement=function(t,i,n,s){const{visualElement:r}=e.useContext(f),a=e.useContext(j),o=e.useContext(y),l=e.useContext(g).reducedMotion,c=e.useRef();s=s||a.renderer,!c.current&&s&&(c.current=s(t,{visualState:i,parent:r,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current;e.useInsertionEffect((()=>{d&&d.update(n,o)}));const p=e.useRef(Boolean(n[S]&&!window.HandoffComplete));return b((()=>{d&&(d.render(),p.current&&d.animationState&&d.animationState.animateChanges())})),e.useEffect((()=>{d&&(d.updateFeatures(),!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))})),d}(r,h,c,i);const n=e.useContext(F),s=e.useContext(j).strict;p.visualElement&&(l=p.visualElement.loadFeatures(c,s,t,n))}return e.createElement(f.Provider,{value:p},l&&p.visualElement?e.createElement(l,{visualElement:p.visualElement,...c}):null,n(r,a,function(t,i,n){return e.useCallback((e=>{e&&t.mount&&t.mount(e),i&&(e?i.mount(e):i.unmount()),n&&("function"==typeof n?n(e):C(n)&&(n.current=e))}),[i])}(h,p.visualElement,o),h,d,p.visualElement))}));return a[V]=r,a}function L({layoutId:t}){const i=e.useContext(M).id;return i&&void 0!==t?i+"-"+t:t}function W(t){function e(e,i={}){return I(t(e,i))}if("undefined"==typeof Proxy)return e;const i=new Map;return new Proxy(e,{get:(t,n)=>(i.has(n)||i.set(n,e(n)),i.get(n))})}const O=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _(t){return"string"==typeof t&&!t.includes("-")&&!!(O.indexOf(t)>-1||/[A-Z]/.test(t))}const $={};const U=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],H=new Set(U);function Y(t,{layout:e,layoutId:i}){return H.has(t)||t.startsWith("origin")||(e||void 0!==i)&&(!!$[t]||"opacity"===t)}const X=t=>Boolean(t&&t.getVelocity),G={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},q=U.length;const Z=t=>e=>"string"==typeof e&&e.startsWith(t),K=Z("--"),J=Z("var(--"),Q=(t,e)=>e&&"number"==typeof t?e.transform(t):t,tt=(t,e,i)=>Math.min(Math.max(i,t),e),et={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},it={...et,transform:t=>tt(0,1,t)},nt={...et,default:1},st=t=>Math.round(1e5*t)/1e5,rt=/(-)?([\d]*\.?[\d])+/g,at=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ot=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function lt(t){return"string"==typeof t}const ct=t=>({test:e=>lt(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),dt=ct("deg"),pt=ct("%"),ht=ct("px"),ut=ct("vh"),mt=ct("vw"),xt={...pt,parse:t=>pt.parse(t)/100,transform:t=>pt.transform(100*t)},gt={...et,transform:Math.round},ft={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,size:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,rotate:dt,rotateX:dt,rotateY:dt,rotateZ:dt,scale:nt,scaleX:nt,scaleY:nt,scaleZ:nt,skew:dt,skewX:dt,skewY:dt,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:it,originX:xt,originY:xt,originZ:ht,zIndex:gt,fillOpacity:it,strokeOpacity:it,numOctaves:gt};function yt(t,e,i,n){const{style:s,vars:r,transform:a,transformOrigin:o}=t;let l=!1,c=!1,d=!0;for(const p in e){const t=e[p];if(K(p)){r[p]=t;continue}const i=ft[p],n=Q(t,i);if(H.has(p)){if(l=!0,a[p]=n,!d)continue;t!==(i.default||0)&&(d=!1)}else p.startsWith("origin")?(c=!0,o[p]=n):s[p]=n}if(e.transform||(l||n?s.transform=function(t,{enableHardwareAcceleration:e=!0,allowTransformNone:i=!0},n,s){let r="";for(let a=0;a<q;a++){const e=U[a];void 0!==t[e]&&(r+=`${G[e]||e}(${t[e]}) `)}return e&&!t.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(t,n?"":r):i&&n&&(r="none"),r}(t.transform,i,d,n):s.transform&&(s.transform="none")),c){const{originX:t="50%",originY:e="50%",originZ:i=0}=o;s.transformOrigin=`${t} ${e} ${i}`}}const vt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bt(t,e,i){for(const n in e)X(e[n])||Y(n,i)||(t[n]=e[n])}function jt(t,i,n){const s={};return bt(s,t.style||{},t),Object.assign(s,function({transformTemplate:t},i,n){return e.useMemo((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return yt(e,i,{enableHardwareAcceleration:!n},t),Object.assign({},e.vars,e.style)}),[i])}(t,i,n)),t.transformValues?t.transformValues(s):s}function wt(t,e,i){const n={},s=jt(t,e,i);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const St=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ct(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||St.has(t)}let Pt=t=>!Ct(t);try{(Nt=require("@emotion/is-prop-valid").default)&&(Pt=t=>t.startsWith("on")?!Ct(t):Nt(t))}catch(oo){}var Nt;function kt(t,e,i){return"string"==typeof t?t:ht.transform(e+i*t)}const Tt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Et={offset:"strokeDashoffset",array:"strokeDasharray"};function At(t,{attrX:e,attrY:i,attrScale:n,originX:s,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,p,h){if(yt(t,c,d,h),p)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:u,style:m,dimensions:x}=t;u.transform&&(x&&(m.transform=u.transform),delete u.transform),x&&(void 0!==s||void 0!==r||m.transform)&&(m.transformOrigin=function(t,e,i){return`${kt(e,t.x,t.width)} ${kt(i,t.y,t.height)}`}(x,void 0!==s?s:.5,void 0!==r?r:.5)),void 0!==e&&(u.x=e),void 0!==i&&(u.y=i),void 0!==n&&(u.scale=n),void 0!==a&&function(t,e,i=1,n=0,s=!0){t.pathLength=1;const r=s?Tt:Et;t[r.offset]=ht.transform(-n);const a=ht.transform(e),o=ht.transform(i);t[r.array]=`${a} ${o}`}(u,a,o,l,!1)}const Dt=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Rt=t=>"string"==typeof t&&"svg"===t.toLowerCase();function zt(t,i,n,s){const r=e.useMemo((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return At(e,i,{enableHardwareAcceleration:!1},Rt(s),t.transformTemplate),{...e.attrs,style:{...e.style}}}),[i]);if(t.style){const e={};bt(e,t.style,t),r.style={...e,...r.style}}return r}function Bt(t=!1){return(i,n,s,{latestValues:r},a)=>{const o=(_(i)?zt:wt)(n,r,a,i),l=function(t,e,i){const n={};for(const s in t)"values"===s&&"object"==typeof t.values||(Pt(s)||!0===i&&Ct(s)||!e&&!Ct(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}(n,"string"==typeof i,t),c={...l,...o,ref:s},{children:d}=n,p=e.useMemo((()=>X(d)?d.get():d),[d]);return e.createElement(i,{...c,children:p})}}function Mt(t,{style:e,vars:i},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const r in i)t.style.setProperty(r,i[r])}const Ft=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vt(t,e,i,n){Mt(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(Ft.has(s)?s:w(s),e.attrs[s])}function It(t,e){const{style:i}=t,n={};for(const s in i)(X(i[s])||e.style&&X(e.style[s])||Y(s,t))&&(n[s]=i[s]);return n}function Lt(t,e){const i=It(t,e);for(const n in t)if(X(t[n])||X(e[n])){i[-1!==U.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=t[n]}return i}function Wt(t,e,i,n={},s={}){return"function"==typeof e&&(e=e(void 0!==i?i:t.custom,n,s)),"string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e&&(e=e(void 0!==i?i:t.custom,n,s)),e}function Ot(t){const i=e.useRef(null);return null===i.current&&(i.current=t()),i.current}const _t=t=>Array.isArray(t);function $t(t){const e=X(t)?t.get():t;return i=e,Boolean(i&&"object"==typeof i&&i.mix&&i.toValue)?e.toValue():e;var i}const Ut=t=>(i,n)=>{const s=e.useContext(f),r=e.useContext(y),a=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:i},n,s,r){const a={latestValues:Ht(n,s,r,t),renderState:e()};return i&&(a.mount=t=>i(n,t,a)),a}(t,i,s,r);return n?a():Ot(a)};function Ht(t,e,i,n){const s={},r=n(t,{});for(const h in r)s[h]=$t(r[h]);let{initial:a,animate:o}=t;const l=E(t),c=A(t);e&&c&&!l&&!1!==t.inherit&&(void 0===a&&(a=e.initial),void 0===o&&(o=e.animate));let d=!!i&&!1===i.initial;d=d||!1===a;const p=d?o:a;if(p&&"boolean"!=typeof p&&!N(p)){(Array.isArray(p)?p:[p]).forEach((e=>{const i=Wt(t,e);if(!i)return;const{transitionEnd:n,transition:r,...a}=i;for(const t in a){let e=a[t];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[t]=e)}for(const t in n)s[t]=n[t]}))}return s}const Yt=t=>t;class Xt{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);-1!==e&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}const Gt=["prepare","read","update","preRender","render","postRender"];const{schedule:qt,cancel:Zt,state:Kt,steps:Jt}=function(t,e){let i=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=Gt.reduce(((t,e)=>(t[e]=function(t){let e=new Xt,i=new Xt,n=0,s=!1,r=!1;const a=new WeakSet,o={schedule:(t,r=!1,o=!1)=>{const l=o&&s,c=l?e:i;return r&&a.add(t),c.add(t)&&l&&s&&(n=e.order.length),t},cancel:t=>{i.remove(t),a.delete(t)},process:l=>{if(s)r=!0;else{if(s=!0,[e,i]=[i,e],i.clear(),n=e.order.length,n)for(let i=0;i<n;i++){const n=e.order[i];n(l),a.has(n)&&(o.schedule(n),t())}s=!1,r&&(r=!1,o.process(l))}}};return o}((()=>i=!0)),t)),{}),a=t=>r[t].process(s),o=()=>{const r=performance.now();i=!1,s.delta=n?1e3/60:Math.max(Math.min(r-s.timestamp,40),1),s.timestamp=r,s.isProcessing=!0,Gt.forEach(a),s.isProcessing=!1,i&&e&&(n=!1,t(o))};return{schedule:Gt.reduce(((e,a)=>{const l=r[a];return e[a]=(e,r=!1,a=!1)=>(i||(i=!0,n=!0,s.isProcessing||t(o)),l.schedule(e,r,a)),e}),{}),cancel:t=>Gt.forEach((e=>r[e].cancel(t))),state:s,steps:r}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Yt,!0),Qt={useVisualState:Ut({scrapeMotionValuesFromProps:Lt,createRenderState:Dt,onMount:(t,e,{renderState:i,latestValues:n})=>{qt.read((()=>{try{i.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){i.dimensions={x:0,y:0,width:0,height:0}}})),qt.render((()=>{At(i,n,{enableHardwareAcceleration:!1},Rt(e.tagName),t.transformTemplate),Vt(e,i)}))}})},te={useVisualState:Ut({scrapeMotionValuesFromProps:It,createRenderState:vt})};function ee(t,e,i,n={passive:!0}){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i)}const ie=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary;function ne(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}function se(t,e,i,n){return ee(t,e,(t=>e=>ie(e)&&t(e,ne(e)))(i),n)}const re=(t,e)=>i=>e(t(i)),ae=(...t)=>t.reduce(re);function oe(t){let e=null;return()=>{const i=()=>{e=null};return null===e&&(e=t,i)}}const le=oe("dragHorizontal"),ce=oe("dragVertical");function de(t){let e=!1;if("y"===t)e=ce();else if("x"===t)e=le();else{const t=le(),i=ce();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function pe(){const t=de(!0);return!t||(t(),!1)}class he{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ue(t,e){const i="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End");return se(t.current,i,((i,s)=>{if("touch"===i.pointerType||pe())return;const r=t.getProps();t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",e),r[n]&&qt.update((()=>r[n](i,s)))}),{passive:!t.getProps()[n]})}const me=(t,e)=>!!e&&(t===e||me(t,e.parentElement));function xe(t,e){if(!e)return;const i=new PointerEvent("pointer"+t);e(i,ne(i))}const ge=new WeakMap,fe=new WeakMap,ye=t=>{const e=ge.get(t.target);e&&e(t)},ve=t=>{t.forEach(ye)};function be(t,e,i){const n=function({root:t,...e}){const i=t||document;fe.has(i)||fe.set(i,{});const n=fe.get(i),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(ve,{root:t,...e})),n[s]}(e);return ge.set(t,i),n.observe(t),()=>{ge.delete(t),n.unobserve(t)}}const je={some:0,all:1};const we={inView:{Feature:class extends he{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:n="some",once:s}=t,r={root:e?e.current:void 0,rootMargin:i,threshold:"number"==typeof n?n:je[n]};return be(this.node.current,r,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,s&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:i,onViewportLeave:n}=this.node.getProps(),r=e?i:n;r&&r(t)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends he{constructor(){super(...arguments),this.removeStartListeners=Yt,this.removeEndListeners=Yt,this.removeAccessibleListeners=Yt,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),n=se(window,"pointerup",((t,e)=>{if(!this.checkPressEnd())return;const{onTap:i,onTapCancel:n,globalTapTarget:s}=this.node.getProps();qt.update((()=>{s||me(this.node.current,t.target)?i&&i(t,e):n&&n(t,e)}))}),{passive:!(i.onTap||i.onPointerUp)}),s=se(window,"pointercancel",((t,e)=>this.cancelPress(t,e)),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ae(n,s),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=ee(this.node.current,"keydown",(t=>{if("Enter"!==t.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=ee(this.node.current,"keyup",(t=>{"Enter"===t.key&&this.checkPressEnd()&&xe("up",((t,e)=>{const{onTap:i}=this.node.getProps();i&&qt.update((()=>i(t,e)))}))})),xe("down",((t,e)=>{this.startPress(t,e)}))})),e=ee(this.node.current,"blur",(()=>{this.isPressing&&xe("cancel",((t,e)=>this.cancelPress(t,e)))}));this.removeAccessibleListeners=ae(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:i,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&qt.update((()=>i(t,e)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!pe()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&qt.update((()=>i(t,e)))}mount(){const t=this.node.getProps(),e=se(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=ee(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ae(e,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends he{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ae(ee(this.node.current,"focus",(()=>this.onFocus())),ee(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends he{mount(){this.unmount=ae(ue(this.node,!0),ue(this.node,!1))}unmount(){}}}};function Se(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Ce(t,e,i){const n=t.getProps();return Wt(n,e,void 0!==i?i:n.custom,function(t){const e={};return t.values.forEach(((t,i)=>e[i]=t.get())),e}(t),function(t){const e={};return t.values.forEach(((t,i)=>e[i]=t.getVelocity())),e}(t))}let Pe=Yt,Ne=Yt;const ke=t=>1e3*t,Te=t=>t/1e3,Ee=!1,Ae=t=>Array.isArray(t)&&"number"==typeof t[0];function De(t){return Boolean(!t||"string"==typeof t&&ze[t]||Ae(t)||Array.isArray(t)&&t.every(De))}const Re=([t,e,i,n])=>`cubic-bezier(${t}, ${e}, ${i}, ${n})`,ze={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Re([0,.65,.55,1]),circOut:Re([.55,0,1,.45]),backIn:Re([.31,.01,.66,-.59]),backOut:Re([.33,1.53,.69,.99])};function Be(t){if(t)return Ae(t)?Re(t):Array.isArray(t)?t.map(Be):ze[t]}const Me=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t;function Fe(t,e,i,n){if(t===e&&i===n)return Yt;const s=e=>function(t,e,i,n,s){let r,a,o=0;do{a=e+(i-e)/2,r=Me(a,n,s)-t,r>0?i=a:e=a}while(Math.abs(r)>1e-7&&++o<12);return a}(e,0,1,t,i);return t=>0===t||1===t?t:Me(s(t),e,n)}const Ve=Fe(.42,0,1,1),Ie=Fe(0,0,.58,1),Le=Fe(.42,0,.58,1),We=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Oe=t=>e=>1-t(1-e),_e=t=>1-Math.sin(Math.acos(t)),$e=Oe(_e),Ue=We(_e),He=Fe(.33,1.53,.69,.99),Ye=Oe(He),Xe=We(Ye),Ge={linear:Yt,easeIn:Ve,easeInOut:Le,easeOut:Ie,circIn:_e,circInOut:Ue,circOut:$e,backIn:Ye,backInOut:Xe,backOut:He,anticipate:t=>(t*=2)<1?.5*Ye(t):.5*(2-Math.pow(2,-10*(t-1)))},qe=t=>{if(Array.isArray(t)){Ne(4===t.length);const[e,i,n,s]=t;return Fe(e,i,n,s)}return"string"==typeof t?Ge[t]:t},Ze=(t,e)=>i=>Boolean(lt(i)&&ot.test(i)&&i.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(i,e)),Ke=(t,e,i)=>n=>{if(!lt(n))return n;const[s,r,a,o]=n.match(rt);return{[t]:parseFloat(s),[e]:parseFloat(r),[i]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Je={...et,transform:t=>Math.round((t=>tt(0,255,t))(t))},Qe={test:Ze("rgb","red"),parse:Ke("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:n=1})=>"rgba("+Je.transform(t)+", "+Je.transform(e)+", "+Je.transform(i)+", "+st(it.transform(n))+")"};const ti={test:Ze("#"),parse:function(t){let e="",i="",n="",s="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,i+=i,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}},transform:Qe.transform},ei={test:Ze("hsl","hue"),parse:Ke("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:n=1})=>"hsla("+Math.round(t)+", "+pt.transform(st(e))+", "+pt.transform(st(i))+", "+st(it.transform(n))+")"},ii={test:t=>Qe.test(t)||ti.test(t)||ei.test(t),parse:t=>Qe.test(t)?Qe.parse(t):ei.test(t)?ei.parse(t):ti.parse(t),transform:t=>lt(t)?t:t.hasOwnProperty("red")?Qe.transform(t):ei.transform(t)},ni=(t,e,i)=>-i*t+i*e+t;function si(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}const ri=(t,e,i)=>{const n=t*t;return Math.sqrt(Math.max(0,i*(e*e-n)+n))},ai=[ti,Qe,ei];function oi(t){const e=(i=t,ai.find((t=>t.test(i))));var i;let n=e.parse(t);return e===ei&&(n=function({hue:t,saturation:e,lightness:i,alpha:n}){t/=360,i/=100;let s=0,r=0,a=0;if(e/=100){const n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;s=si(o,n,t+1/3),r=si(o,n,t),a=si(o,n,t-1/3)}else s=r=a=i;return{red:Math.round(255*s),green:Math.round(255*r),blue:Math.round(255*a),alpha:n}}(n)),n}const li=(t,e)=>{const i=oi(t),n=oi(e),s={...i};return t=>(s.red=ri(i.red,n.red,t),s.green=ri(i.green,n.green,t),s.blue=ri(i.blue,n.blue,t),s.alpha=ni(i.alpha,n.alpha,t),Qe.transform(s))};const ci={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Yt},di={regex:at,countKey:"Colors",token:"${c}",parse:ii.parse},pi={regex:rt,countKey:"Numbers",token:"${n}",parse:et.parse};function hi(t,{regex:e,countKey:i,token:n,parse:s}){const r=t.tokenised.match(e);r&&(t["num"+i]=r.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...r.map(s)))}function ui(t){const e=t.toString(),i={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return i.value.includes("var(--")&&hi(i,ci),hi(i,di),hi(i,pi),i}function mi(t){return ui(t).values}function xi(t){const{values:e,numColors:i,numVars:n,tokenised:s}=ui(t),r=e.length;return t=>{let e=s;for(let s=0;s<r;s++)e=s<n?e.replace(ci.token,t[s]):s<n+i?e.replace(di.token,ii.transform(t[s])):e.replace(pi.token,st(t[s]));return e}}const gi=t=>"number"==typeof t?0:t;const fi={test:function(t){var e,i;return isNaN(t)&&lt(t)&&((null===(e=t.match(rt))||void 0===e?void 0:e.length)||0)+((null===(i=t.match(at))||void 0===i?void 0:i.length)||0)>0},parse:mi,createTransformer:xi,getAnimatableNone:function(t){const e=mi(t);return xi(t)(e.map(gi))}},yi=(t,e)=>i=>`${i>0?e:t}`;function vi(t,e){return"number"==typeof t?i=>ni(t,e,i):ii.test(t)?li(t,e):t.startsWith("var(")?yi(t,e):wi(t,e)}const bi=(t,e)=>{const i=[...t],n=i.length,s=t.map(((t,i)=>vi(t,e[i])));return t=>{for(let e=0;e<n;e++)i[e]=s[e](t);return i}},ji=(t,e)=>{const i={...t,...e},n={};for(const s in i)void 0!==t[s]&&void 0!==e[s]&&(n[s]=vi(t[s],e[s]));return t=>{for(const e in n)i[e]=n[e](t);return i}},wi=(t,e)=>{const i=fi.createTransformer(e),n=ui(t),s=ui(e);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?ae(bi(n.values,s.values),i):yi(t,e)},Si=(t,e,i)=>{const n=e-t;return 0===n?1:(i-t)/n},Ci=(t,e)=>i=>ni(t,e,i);function Pi(t,e,i){const n=[],s=i||("number"==typeof(r=t[0])?Ci:"string"==typeof r?ii.test(r)?li:wi:Array.isArray(r)?bi:"object"==typeof r?ji:Ci);var r;const a=t.length-1;for(let o=0;o<a;o++){let i=s(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||Yt:e;i=ae(t,i)}n.push(i)}return n}function Ni(t,e,{clamp:i=!0,ease:n,mixer:s}={}){const r=t.length;if(Ne(r===e.length),1===r)return()=>e[0];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Pi(e,n,s),o=a.length,l=e=>{let i=0;if(o>1)for(;i<t.length-2&&!(e<t[i+1]);i++);const n=Si(t[i],t[i+1],e);return a[i](n)};return i?e=>l(tt(t[0],t[r-1],e)):l}function ki(t){const e=[0];return function(t,e){const i=t[t.length-1];for(let n=1;n<=e;n++){const s=Si(0,e,n);t.push(ni(i,1,s))}}(e,t.length-1),e}function Ti({duration:t=300,keyframes:e,times:i,ease:n="easeInOut"}){const s=(t=>Array.isArray(t)&&"number"!=typeof t[0])(n)?n.map(qe):qe(n),r={done:!1,value:e[0]},a=function(t,e){return t.map((t=>t*e))}(i&&i.length===e.length?i:ki(e),t),o=Ni(a,e,{ease:Array.isArray(s)?s:(l=e,c=s,l.map((()=>c||Le)).splice(0,l.length-1))});var l,c;return{calculatedDuration:t,next:e=>(r.value=o(e),r.done=e>=t,r)}}function Ei(t,e){return e?t*(1e3/e):0}function Ai(t,e,i){const n=Math.max(e-5,0);return Ei(i-t(n),e-n)}const Di=.001;function Ri({duration:t=800,bounce:e=.25,velocity:i=0,mass:n=1}){let s,r;Pe(t<=ke(10));let a=1-e;a=tt(.05,1,a),t=tt(.01,10,Te(t)),a<1?(s=e=>{const n=e*a,s=n*t,r=n-i,o=Bi(e,a),l=Math.exp(-s);return Di-r/o*l},r=e=>{const n=e*a*t,r=n*i+i,o=Math.pow(a,2)*Math.pow(e,2)*t,l=Math.exp(-n),c=Bi(Math.pow(e,2),a);return(-s(e)+Di>0?-1:1)*((r-o)*l)/c}):(s=e=>Math.exp(-e*t)*((e-i)*t+1)-.001,r=e=>Math.exp(-e*t)*(t*t*(i-e)));const o=function(t,e,i){let n=i;for(let s=1;s<zi;s++)n-=t(n)/e(n);return n}(s,r,5/t);if(t=ke(t),isNaN(o))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(o,2)*n;return{stiffness:e,damping:2*a*Math.sqrt(n*e),duration:t}}}const zi=12;function Bi(t,e){return t*Math.sqrt(1-e*e)}const Mi=["duration","bounce"],Fi=["stiffness","damping","mass"];function Vi(t,e){return e.some((e=>void 0!==t[e]))}function Ii({keyframes:t,restDelta:e,restSpeed:i,...n}){const s=t[0],r=t[t.length-1],a={done:!1,value:s},{stiffness:o,damping:l,mass:c,duration:d,velocity:p,isResolvedFromDuration:h}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Vi(t,Fi)&&Vi(t,Mi)){const i=Ri(t);e={...e,...i,mass:1},e.isResolvedFromDuration=!0}return e}({...n,velocity:-Te(n.velocity||0)}),u=p||0,m=l/(2*Math.sqrt(o*c)),x=r-s,g=Te(Math.sqrt(o/c)),f=Math.abs(x)<5;let y;if(i||(i=f?.01:2),e||(e=f?.005:.5),m<1){const t=Bi(g,m);y=e=>{const i=Math.exp(-m*g*e);return r-i*((u+m*g*x)/t*Math.sin(t*e)+x*Math.cos(t*e))}}else if(1===m)y=t=>r-Math.exp(-g*t)*(x+(u+g*x)*t);else{const t=g*Math.sqrt(m*m-1);y=e=>{const i=Math.exp(-m*g*e),n=Math.min(t*e,300);return r-i*((u+m*g*x)*Math.sinh(n)+t*x*Math.cosh(n))/t}}return{calculatedDuration:h&&d||null,next:t=>{const n=y(t);if(h)a.done=t>=d;else{let s=u;0!==t&&(s=m<1?Ai(y,t,n):0);const o=Math.abs(s)<=i,l=Math.abs(r-n)<=e;a.done=o&&l}return a.value=a.done?r:n,a}}}function Li({keyframes:t,velocity:e=0,power:i=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const p=t[0],h={done:!1,value:p},u=t=>void 0===o?l:void 0===l||Math.abs(o-t)<Math.abs(l-t)?o:l;let m=i*e;const x=p+m,g=void 0===a?x:a(x);g!==x&&(m=g-p);const f=t=>-m*Math.exp(-t/n),y=t=>g+f(t),v=t=>{const e=f(t),i=y(t);h.done=Math.abs(e)<=c,h.value=h.done?g:i};let b,j;const w=t=>{var e;(e=h.value,void 0!==o&&e<o||void 0!==l&&e>l)&&(b=t,j=Ii({keyframes:[h.value,u(h.value)],velocity:Ai(y,t,h.value),damping:s,stiffness:r,restDelta:c,restSpeed:d}))};return w(0),{calculatedDuration:null,next:t=>{let e=!1;return j||void 0!==b||(e=!0,v(t),w(t)),void 0!==b&&t>b?j.next(t-b):(!e&&v(t),h)}}}const Wi=t=>{const e=({timestamp:e})=>t(e);return{start:()=>qt.update(e,!0),stop:()=>Zt(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}};function Oi(t){let e=0;let i=t.next(e);for(;!i.done&&e<2e4;)e+=50,i=t.next(e);return e>=2e4?1/0:e}const _i={decay:Li,inertia:Li,tween:Ti,keyframes:Ti,spring:Ii};function $i({autoplay:t=!0,delay:e=0,driver:i=Wi,keyframes:n,type:s="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:o="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:p,...h}){let u,m,x=1,g=!1;const f=()=>{m=new Promise((t=>{u=t}))};let y;f();const v=_i[s]||Ti;let b;v!==Ti&&"number"!=typeof n[0]&&(b=Ni([0,100],n,{clamp:!1}),n=[0,100]);const j=v({...h,keyframes:n});let w;"mirror"===o&&(w=v({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let S="idle",C=null,P=null,N=null;null===j.calculatedDuration&&r&&(j.calculatedDuration=Oi(j));const{calculatedDuration:k}=j;let T=1/0,E=1/0;null!==k&&(T=k+a,E=T*(r+1)-a);let A=0;const D=t=>{if(null===P)return;x>0&&(P=Math.min(P,t)),x<0&&(P=Math.min(t-E/x,P)),A=null!==C?C:Math.round(t-P)*x;const i=A-e*(x>=0?1:-1),s=x>=0?i<0:i>E;A=Math.max(i,0),"finished"===S&&null===C&&(A=E);let l=A,c=j;if(r){const t=Math.min(A,E)/T;let e=Math.floor(t),i=t%1;!i&&t>=1&&(i=1),1===i&&e--,e=Math.min(e,r+1);Boolean(e%2)&&("reverse"===o?(i=1-i,a&&(i-=a/T)):"mirror"===o&&(c=w)),l=tt(0,1,i)*T}const d=s?{done:!1,value:n[0]}:c.next(l);b&&(d.value=b(d.value));let{done:h}=d;s||null===k||(h=x>=0?A>=E:A<=0);const u=null===C&&("finished"===S||"running"===S&&h);return p&&p(d.value),u&&B(),d},R=()=>{y&&y.stop(),y=void 0},z=()=>{S="idle",R(),u(),f(),P=N=null},B=()=>{S="finished",d&&d(),R(),u()},M=()=>{if(g)return;y||(y=i(D));const t=y.now();l&&l(),null!==C?P=t-C:P&&"finished"!==S||(P=t),"finished"===S&&f(),N=P,C=null,S="running",y.start()};t&&M();const F={then:(t,e)=>m.then(t,e),get time(){return Te(A)},set time(t){t=ke(t),A=t,null===C&&y&&0!==x?P=y.now()-t/x:C=t},get duration(){const t=null===j.calculatedDuration?Oi(j):j.calculatedDuration;return Te(t)},get speed(){return x},set speed(t){t!==x&&y&&(x=t,F.time=Te(A))},get state(){return S},play:M,pause:()=>{S="paused",C=A},stop:()=>{g=!0,"idle"!==S&&(S="idle",c&&c(),z())},cancel:()=>{null!==N&&D(N),z()},complete:()=>{S="finished"},sample:t=>(P=0,D(t))};return F}const Ui=function(t){let e;return()=>(void 0===e&&(e=t()),e)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),Hi=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Yi(t,e,{onUpdate:i,onComplete:n,...s}){if(!(Ui()&&Hi.has(e)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let r,a,o=!1,l=!1;const c=()=>{a=new Promise((t=>{r=t}))};c();let{keyframes:d,duration:p=300,ease:h,times:u}=s;if(((t,e)=>"spring"===e.type||"backgroundColor"===t||!De(e.ease))(e,s)){const t=$i({...s,repeat:0,delay:0});let e={done:!1,value:d[0]};const i=[];let n=0;for(;!e.done&&n<2e4;)e=t.sample(n),i.push(e.value),n+=10;u=void 0,d=i,p=n-10,h="linear"}const m=function(t,e,i,{delay:n=0,duration:s,repeat:r=0,repeatType:a="loop",ease:o,times:l}={}){const c={[e]:i};l&&(c.offset=l);const d=Be(o);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:"reverse"===a?"alternate":"normal"})}(t.owner.current,e,d,{...s,duration:p,ease:h,times:u}),x=()=>{l=!1,m.cancel()},g=()=>{l=!0,qt.update(x),r(),c()};m.onfinish=()=>{l||(t.set(function(t,{repeat:e,repeatType:i="loop"}){return t[e&&"loop"!==i&&e%2==1?0:t.length-1]}(d,s)),n&&n(),g())};return{then:(t,e)=>a.then(t,e),attachTimeline:t=>(m.timeline=t,m.onfinish=null,Yt),get time(){return Te(m.currentTime||0)},set time(t){m.currentTime=ke(t)},get speed(){return m.playbackRate},set speed(t){m.playbackRate=t},get duration(){return Te(p)},play:()=>{o||(m.play(),Zt(x))},pause:()=>m.pause(),stop:()=>{if(o=!0,"idle"===m.playState)return;const{currentTime:e}=m;if(e){const i=$i({...s,autoplay:!1});t.setWithVelocity(i.sample(e-10).value,i.sample(e).value,10)}g()},complete:()=>{l||m.finish()},cancel:g}}const Xi={type:"spring",stiffness:500,damping:25,restSpeed:10},Gi={type:"keyframes",duration:.8},qi={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Zi=(t,{keyframes:e})=>e.length>2?Gi:H.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:Xi:qi,Ki=(t,e)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!fi.test(e)&&"0"!==e||e.startsWith("url("))),Ji=new Set(["brightness","contrast","saturate","opacity"]);function Qi(t){const[e,i]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[n]=i.match(rt)||[];if(!n)return t;const s=i.replace(n,"");let r=Ji.has(e)?1:0;return n!==i&&(r*=100),e+"("+r+s+")"}const tn=/([a-z-]*)\(.*?\)/g,en={...fi,getAnimatableNone:t=>{const e=t.match(tn);return e?e.map(Qi).join(" "):t}},nn={...ft,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:en,WebkitFilter:en},sn=t=>nn[t];function rn(t,e){let i=sn(t);return i!==en&&(i=fi),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const an=t=>/^0[^.\s]+$/.test(t);function on(t){return"number"==typeof t?0===t:null!==t?"none"===t||"0"===t||an(t):void 0}function ln(t,e){return t[e]||t.default||t}const cn=!1,dn=(t,e,i,n={})=>s=>{const r=ln(n,t)||{},a=r.delay||n.delay||0;let{elapsed:o=0}=n;o-=ke(a);const l=function(t,e,i,n){const s=Ki(e,i);let r;r=Array.isArray(i)?[...i]:[null,i];const a=void 0!==n.from?n.from:t.get();let o;const l=[];for(let c=0;c<r.length;c++)null===r[c]&&(r[c]=0===c?a:r[c-1]),on(r[c])&&l.push(c),"string"==typeof r[c]&&"none"!==r[c]&&"0"!==r[c]&&(o=r[c]);if(s&&l.length&&o)for(let c=0;c<l.length;c++)r[l[c]]=rn(e,o);return r}(e,t,i,r),c=l[0],d=l[l.length-1],p=Ki(t,c),h=Ki(t,d);let u={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...r,delay:-o,onUpdate:t=>{e.set(t),r.onUpdate&&r.onUpdate(t)},onComplete:()=>{s(),r.onComplete&&r.onComplete()}};if(function({when:t,delay:e,delayChildren:i,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}(r)||(u={...u,...Zi(t,u)}),u.duration&&(u.duration=ke(u.duration)),u.repeatDelay&&(u.repeatDelay=ke(u.repeatDelay)),!p||!h||Ee||!1===r.type||cn)return function({keyframes:t,delay:e,onUpdate:i,onComplete:n}){const s=()=>(i&&i(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Yt,pause:Yt,stop:Yt,then:t=>(t(),Promise.resolve()),cancel:Yt,complete:Yt});return e?$i({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}(u);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const i=Yi(e,t,u);if(i)return i}return $i(u)};function pn(t){return Boolean(X(t)&&t.add)}const hn=t=>/^\-?\d*\.?\d+$/.test(t);function un(t,e){-1===t.indexOf(e)&&t.push(e)}function mn(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class xn{constructor(){this.subscriptions=[]}add(t){return un(this.subscriptions,t),()=>mn(this.subscriptions,t)}notify(t,e,i){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](t,e,i);else for(let s=0;s<n;s++){const n=this.subscriptions[s];n&&n(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gn={current:void 0};class fn{constructor(t,e={}){var i;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(t,e=!0)=>{this.prev=this.current,this.current=t;const{delta:i,timestamp:n}=Kt;this.lastUpdated!==n&&(this.timeDelta=i,this.lastUpdated=n,qt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:t})=>{t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(i=this.current,!isNaN(parseFloat(i))),this.owner=e.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new xn);const i=this.events[t].add(e);return"change"===t?()=>{i(),qt.read((()=>{this.events.change.getSize()||this.stop()}))}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,i){this.set(e),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return gn.current&&gn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ei(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yn(t,e){return new fn(t,e)}const vn=t=>e=>e.test(t),bn=[et,ht,pt,dt,mt,ut,{test:t=>"auto"===t,parse:t=>t}],jn=t=>bn.find(vn(t)),wn=[...bn,ii,fi];function Sn(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,yn(i))}function Cn(t,e){if(!e)return;return(e[t]||e.default||e).from}function Pn({protectedKeys:t,needsAnimating:e},i){const n=t.hasOwnProperty(i)&&!0!==e[i];return e[i]=!1,n}function Nn(t,e){const i=t.get();if(!Array.isArray(e))return i!==e;for(let n=0;n<e.length;n++)if(e[n]!==i)return!0}function kn(t,e,{delay:i=0,transitionOverride:n,type:s}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:a,...o}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");n&&(r=n);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const p in o){const e=t.getValue(p),n=o[p];if(!e||void 0===n||d&&Pn(d,p))continue;const s={delay:i,elapsed:0,...ln(r||{},p)};if(window.HandoffAppearAnimations){const i=t.getProps()[S];if(i){const t=window.HandoffAppearAnimations(i,p,e,qt);null!==t&&(s.elapsed=t,s.isHandoff=!0)}}let a=!s.isHandoff&&!Nn(e,n);if("spring"===s.type&&(e.getVelocity()||s.velocity)&&(a=!1),e.animation&&(a=!1),a)continue;e.start(dn(p,e,n,t.shouldReduceMotion&&H.has(p)?{type:!1}:s));const h=e.animation;pn(l)&&(l.add(p),h.then((()=>l.remove(p)))),c.push(h)}return a&&Promise.all(c).then((()=>{a&&function(t,e){const i=Ce(t,e);let{transitionEnd:n={},transition:s={},...r}=i?t.makeTargetAnimatable(i,!1):{};r={...r,...n};for(const o in r)Sn(t,o,(a=r[o],_t(a)?a[a.length-1]||0:a));var a}(t,a)})),c}function Tn(t,e,i={}){const n=Ce(t,e,i.custom);let{transition:s=t.getDefaultTransition()||{}}=n||{};i.transitionOverride&&(s=i.transitionOverride);const r=n?()=>Promise.all(kn(t,n,i)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(n=0)=>{const{delayChildren:r=0,staggerChildren:a,staggerDirection:o}=s;return function(t,e,i=0,n=0,s=1,r){const a=[],o=(t.variantChildren.size-1)*n,l=1===s?(t=0)=>t*n:(t=0)=>o-t*n;return Array.from(t.variantChildren).sort(En).forEach(((t,n)=>{t.notify("AnimationStart",e),a.push(Tn(t,e,{...r,delay:i+l(n)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(a)}(t,e,r+n,a,o,i)}:()=>Promise.resolve(),{when:o}=s;if(o){const[t,e]="beforeChildren"===o?[r,a]:[a,r];return t().then((()=>e()))}return Promise.all([r(),a(i.delay)])}function En(t,e){return t.sortNodePosition(e)}const An=[...k].reverse(),Dn=k.length;function Rn(t){return e=>Promise.all(e.map((({animation:e,options:i})=>function(t,e,i={}){let n;if(t.notify("AnimationStart",e),Array.isArray(e)){const s=e.map((e=>Tn(t,e,i)));n=Promise.all(s)}else if("string"==typeof e)n=Tn(t,e,i);else{const s="function"==typeof e?Ce(t,e,i.custom):e;n=Promise.all(kn(t,s,i))}return n.then((()=>t.notify("AnimationComplete",e)))}(t,e,i))))}function zn(t){let e=Rn(t);const i={animate:Mn(!0),whileInView:Mn(),whileHover:Mn(),whileTap:Mn(),whileDrag:Mn(),whileFocus:Mn(),exit:Mn()};let n=!0;const s=(e,i)=>{const n=Ce(t,i);if(n){const{transition:t,transitionEnd:i,...s}=n;e={...e,...s,...i}}return e};function r(r,a){const o=t.getProps(),l=t.getVariantContext(!0)||{},c=[],d=new Set;let p={},h=1/0;for(let e=0;e<Dn;e++){const u=An[e],m=i[u],x=void 0!==o[u]?o[u]:l[u],g=P(x),f=u===a?m.isActive:null;!1===f&&(h=e);let y=x===l[u]&&x!==o[u]&&g;if(y&&n&&t.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...p},!m.isActive&&null===f||!x&&!m.prevProp||N(x)||"boolean"==typeof x)continue;let v=Bn(m.prevProp,x)||u===a&&m.isActive&&!y&&g||e>h&&g,b=!1;const j=Array.isArray(x)?x:[x];let w=j.reduce(s,{});!1===f&&(w={});const{prevResolvedValues:S={}}=m,C={...S,...w},k=t=>{v=!0,d.has(t)&&(b=!0,d.delete(t)),m.needsAnimating[t]=!0};for(const t in C){const e=w[t],i=S[t];if(p.hasOwnProperty(t))continue;let n=!1;n=_t(e)&&_t(i)?!Se(e,i):e!==i,n?void 0!==e?k(t):d.add(t):void 0!==e&&d.has(t)?k(t):m.protectedKeys[t]=!0}m.prevProp=x,m.prevResolvedValues=w,m.isActive&&(p={...p,...w}),n&&t.blockInitialAnimation&&(v=!1),!v||y&&!b||c.push(...j.map((t=>({animation:t,options:{type:u,...r}}))))}if(d.size){const e={};d.forEach((i=>{const n=t.getBaseTarget(i);void 0!==n&&(e[i]=n)})),c.push({animation:e})}let u=Boolean(c.length);return!n||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(u=!1),n=!1,u?e(c):Promise.resolve()}return{animateChanges:r,setActive:function(e,n,s){var a;if(i[e].isActive===n)return Promise.resolve();null===(a=t.variantChildren)||void 0===a||a.forEach((t=>{var i;return null===(i=t.animationState)||void 0===i?void 0:i.setActive(e,n)})),i[e].isActive=n;const o=r(s,e);for(const t in i)i[t].protectedKeys={};return o},setAnimateFunction:function(i){e=i(t)},getState:()=>i}}function Bn(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!Se(e,t)}function Mn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Fn=0;const Vn={animation:{Feature:class extends he{constructor(t){super(t),t.animationState||(t.animationState=zn(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),N(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends he{constructor(){super(...arguments),this.id=Fn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:i}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t,{custom:null!=i?i:this.node.getProps().custom});e&&!t&&s.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},In=(t,e)=>Math.abs(t-e);class Ln{constructor(t,e,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=_n(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,i=function(t,e){const i=In(t.x,e.x),n=In(t.y,e.y);return Math.sqrt(i**2+n**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!i)return;const{point:n}=t,{timestamp:s}=Kt;this.history.push({...n,timestamp:s});const{onStart:r,onMove:a}=this.handlers;e||(r&&r(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=Wn(e,this.transformPagePoint),qt.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:i,onSessionEnd:n,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=_n("pointercancel"===t.type?this.lastMoveEventInfo:Wn(e,this.transformPagePoint),this.history);this.startEvent&&i&&i(t,r),n&&n(t,r)},!ie(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=i,this.contextWindow=n||window;const r=Wn(ne(t),this.transformPagePoint),{point:a}=r,{timestamp:o}=Kt;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=e;l&&l(t,_n(r,this.history)),this.removeListeners=ae(se(this.contextWindow,"pointermove",this.handlePointerMove),se(this.contextWindow,"pointerup",this.handlePointerUp),se(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zt(this.updatePoint)}}function Wn(t,e){return e?{point:e(t.point)}:t}function On(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _n({point:t},e){return{point:t,delta:On(t,Un(e)),offset:On(t,$n(e)),velocity:Hn(e,.1)}}function $n(t){return t[0]}function Un(t){return t[t.length-1]}function Hn(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,n=null;const s=Un(t);for(;i>=0&&(n=t[i],!(s.timestamp-n.timestamp>ke(e)));)i--;if(!n)return{x:0,y:0};const r=Te(s.timestamp-n.timestamp);if(0===r)return{x:0,y:0};const a={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Yn(t){return t.max-t.min}function Xn(t,e=0,i=.01){return Math.abs(t-e)<=i}function Gn(t,e,i,n=.5){t.origin=n,t.originPoint=ni(e.min,e.max,t.origin),t.scale=Yn(i)/Yn(e),(Xn(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ni(i.min,i.max,t.origin)-t.originPoint,(Xn(t.translate)||isNaN(t.translate))&&(t.translate=0)}function qn(t,e,i,n){Gn(t.x,e.x,i.x,n?n.originX:void 0),Gn(t.y,e.y,i.y,n?n.originY:void 0)}function Zn(t,e,i){t.min=i.min+e.min,t.max=t.min+Yn(e)}function Kn(t,e,i){t.min=e.min-i.min,t.max=t.min+Yn(e)}function Jn(t,e,i){Kn(t.x,e.x,i.x),Kn(t.y,e.y,i.y)}function Qn(t,e,i){return{min:void 0!==e?t.min+e:void 0,max:void 0!==i?t.max+i-(t.max-t.min):void 0}}function ts(t,e){let i=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,n]=[n,i]),{min:i,max:n}}const es=.35;function is(t,e,i){return{min:ns(t,e),max:ns(t,i)}}function ns(t,e){return"number"==typeof t?t:t[e]||0}function ss(t){return[t("x"),t("y")]}function rs({top:t,left:e,right:i,bottom:n}){return{x:{min:e,max:i},y:{min:t,max:n}}}function as(t){return void 0===t||1===t}function os({scale:t,scaleX:e,scaleY:i}){return!as(t)||!as(e)||!as(i)}function ls(t){return os(t)||cs(t)||t.z||t.rotate||t.rotateX||t.rotateY}function cs(t){return ds(t.x)||ds(t.y)}function ds(t){return t&&"0%"!==t}function ps(t,e,i){return i+e*(t-i)}function hs(t,e,i,n,s){return void 0!==s&&(t=ps(t,s,n)),ps(t,i,n)+e}function us(t,e=0,i=1,n,s){t.min=hs(t.min,e,i,n,s),t.max=hs(t.max,e,i,n,s)}function ms(t,{x:e,y:i}){us(t.x,e.translate,e.scale,e.originPoint),us(t.y,i.translate,i.scale,i.originPoint)}function xs(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function gs(t,e){t.min=t.min+e,t.max=t.max+e}function fs(t,e,[i,n,s]){const r=void 0!==e[s]?e[s]:.5,a=ni(t.min,t.max,r);us(t,e[i],e[n],a,e.scale)}const ys=["x","scaleX","originX"],vs=["y","scaleY","originY"];function bs(t,e){fs(t.x,e,ys),fs(t.y,e,vs)}function js(t,e){return rs(function(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}(t.getBoundingClientRect(),e))}const ws=({current:t})=>t?t.ownerDocument.defaultView:null,Ss=new WeakMap;class Cs{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new Ln(t,{onSessionStart:t=>{const{dragSnapToOrigin:i}=this.getProps();i?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ne(t,"page").point)},onStart:(t,e)=>{const{drag:i,dragPropagation:n,onDragStart:s}=this.getProps();if(i&&!n&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=de(i),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ss((t=>{let e=this.getAxisMotionValue(t).get()||0;if(pt.test(e)){const{projection:i}=this.visualElement;if(i&&i.layout){const n=i.layout.layoutBox[t];if(n){e=Yn(n)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),s&&qt.update((()=>s(t,e)),!1,!0);const{animationState:r}=this.visualElement;r&&r.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:i,dragDirectionLock:n,onDirectionLock:s,onDrag:r}=this.getProps();if(!i&&!this.openGlobalLock)return;const{offset:a}=e;if(n&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let i=null;Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x");return i}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",e.point,a),this.updateAxis("y",e.point,a),this.visualElement.render(),r&&r(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>ss((t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:ws(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=e;this.startAnimation(n);const{onDragEnd:s}=this.getProps();s&&qt.update((()=>s(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:n}=this.getProps();if(!i||!Ps(t,n,this.currentDirection))return;const s=this.getAxisMotionValue(t);let r=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(r=function(t,{min:e,max:i},n){return void 0!==e&&t<e?t=n?ni(e,t,n.min):Math.max(t,e):void 0!==i&&t>i&&(t=n?ni(i,t,n.max):Math.min(t,i)),t}(r,this.constraints[t],this.elastic[t])),s.set(r)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,s=this.constraints;e&&C(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(t,{top:e,left:i,bottom:n,right:s}){return{x:Qn(t.x,i,s),y:Qn(t.y,e,n)}}(n.layoutBox,e),this.elastic=function(t=es){return!1===t?t=0:!0===t&&(t=es),{x:is(t,"left","right"),y:is(t,"top","bottom")}}(i),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ss((t=>{this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const i={};return void 0!==e.min&&(i.min=e.min-t.min),void 0!==e.max&&(i.max=e.max-t.min),i}(n.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!C(t))return!1;const i=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const s=function(t,e,i){const n=js(t,i),{scroll:s}=e;return s&&(gs(n.x,s.offset.x),gs(n.y,s.offset.y)),n}(i,n.root,this.visualElement.getTransformPagePoint());let r=function(t,e){return{x:ts(t.x,e.x),y:ts(t.y,e.y)}}(n.layout.layoutBox,s);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(r));this.hasMutatedConstraints=!!t,t&&(r=rs(t))}return r}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:n,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=ss((a=>{if(!Ps(a,e,this.currentDirection))return;let l=o&&o[a]||{};r&&(l={min:0,max:0});const c=n?200:1e6,d=n?40:1e7,p={type:"inertia",velocity:i?t[a]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,p)}));return Promise.all(l).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return i.start(dn(t,i,0,e))}stopAnimation(){ss((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){ss((t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()}))}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),n=i[e];return n||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ss((e=>{const{drag:i}=this.getProps();if(!Ps(e,i,this.currentDirection))return;const{projection:n}=this.visualElement,s=this.getAxisMotionValue(e);if(n&&n.layout){const{min:i,max:r}=n.layout.layoutBox[e];s.set(t[e]-ni(i,r,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!C(e)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ss((t=>{const e=this.getAxisMotionValue(t);if(e){const i=e.get();n[t]=function(t,e){let i=.5;const n=Yn(t),s=Yn(e);return s>n?i=Si(e.min,e.max-n,t.min):n>s&&(i=Si(t.min,t.max-s,e.min)),tt(0,1,i)}({min:i,max:i},this.constraints[t])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ss((e=>{if(!Ps(e,t,null))return;const i=this.getAxisMotionValue(e),{min:s,max:r}=this.constraints[e];i.set(ni(s,r,n[e]))}))}addListeners(){if(!this.visualElement.current)return;Ss.set(this.visualElement,this);const t=se(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:i=!0}=this.getProps();e&&i&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();C(t)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,n=i.addEventListener("measure",e);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),e();const s=ee(window,"resize",(()=>this.scalePositionWithinConstraints())),r=i.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(ss((e=>{const i=this.getAxisMotionValue(e);i&&(this.originPoint[e]+=t[e].translate,i.set(i.get()+t[e].translate))})),this.visualElement.render())}));return()=>{s(),t(),n(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:s=!1,dragElastic:r=es,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:n,dragConstraints:s,dragElastic:r,dragMomentum:a}}}function Ps(t,e,i){return!(!0!==e&&e!==t||null!==i&&i!==t)}const Ns=t=>(e,i)=>{t&&qt.update((()=>t(e,i)))};const ks={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ts(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Es={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!ht.test(t))return t;t=parseFloat(t)}return`${Ts(t,e.target.x)}% ${Ts(t,e.target.y)}%`}},As={correct:(t,{treeScale:e,projectionDelta:i})=>{const n=t,s=fi.parse(t);if(s.length>5)return n;const r=fi.createTransformer(t),a="number"!=typeof s[0]?1:0,o=i.x.scale*e.x,l=i.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=ni(o,l,.5);return"number"==typeof s[2+a]&&(s[2+a]/=c),"number"==typeof s[3+a]&&(s[3+a]/=c),r(s)}};class Ds extends n.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:n}=this.props,{projection:s}=t;var r;r=zs,Object.assign($,r),s&&(e.group&&e.group.add(s),i&&i.register&&n&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ks.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:n,isPresent:s}=this.props,r=i.projection;return r?(r.isPresent=s,n||t.layoutDependency!==e||void 0===e?r.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?r.promote():r.relegate()||qt.postRender((()=>{const t=r.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Rs(t){const[i,s]=function(){const t=e.useContext(y);if(null===t)return[!0,null];const{isPresent:i,onExitComplete:n,register:s}=t,r=e.useId();return e.useEffect((()=>s(r)),[]),!i&&n?[!1,()=>n&&n(r)]:[!0]}(),r=e.useContext(M);return n.createElement(Ds,{...t,layoutGroup:r,switchLayoutGroup:e.useContext(F),isPresent:i,safeToRemove:s})}const zs={borderRadius:{...Es,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Es,borderTopRightRadius:Es,borderBottomLeftRadius:Es,borderBottomRightRadius:Es,boxShadow:As},Bs=["TopLeft","TopRight","BottomLeft","BottomRight"],Ms=Bs.length,Fs=t=>"string"==typeof t?parseFloat(t):t,Vs=t=>"number"==typeof t||ht.test(t);function Is(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Ls=Os(0,.5,$e),Ws=Os(.5,.95,Yt);function Os(t,e,i){return n=>n<t?0:n>e?1:i(Si(t,e,n))}function _s(t,e){t.min=e.min,t.max=e.max}function $s(t,e){_s(t.x,e.x),_s(t.y,e.y)}function Us(t,e,i,n,s){return t=ps(t-=e,1/i,n),void 0!==s&&(t=ps(t,1/s,n)),t}function Hs(t,e,[i,n,s],r,a){!function(t,e=0,i=1,n=.5,s,r=t,a=t){pt.test(e)&&(e=parseFloat(e),e=ni(a.min,a.max,e/100)-a.min);if("number"!=typeof e)return;let o=ni(r.min,r.max,n);t===r&&(o-=e),t.min=Us(t.min,e,i,o,s),t.max=Us(t.max,e,i,o,s)}(t,e[i],e[n],e[s],e.scale,r,a)}const Ys=["x","scaleX","originX"],Xs=["y","scaleY","originY"];function Gs(t,e,i,n){Hs(t.x,e,Ys,i?i.x:void 0,n?n.x:void 0),Hs(t.y,e,Xs,i?i.y:void 0,n?n.y:void 0)}function qs(t){return 0===t.translate&&1===t.scale}function Zs(t){return qs(t.x)&&qs(t.y)}function Ks(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Js(t){return Yn(t.x)/Yn(t.y)}class Qs{constructor(){this.members=[]}add(t){un(this.members,t),t.scheduleRender()}remove(t){if(mn(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let i;for(let n=e;n>=0;n--){const t=this.members[n];if(!1!==t.isPresent){i=t;break}}return!!i&&(this.promote(i),!0)}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;!1===n&&i.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tr(t,e,i){let n="";const s=t.x.translate/e.x,r=t.y.translate/e.y;if((s||r)&&(n=`translate3d(${s}px, ${r}px, 0) `),1===e.x&&1===e.y||(n+=`scale(${1/e.x}, ${1/e.y}) `),i){const{rotate:t,rotateX:e,rotateY:s}=i;t&&(n+=`rotate(${t}deg) `),e&&(n+=`rotateX(${e}deg) `),s&&(n+=`rotateY(${s}deg) `)}const a=t.x.scale*e.x,o=t.y.scale*e.y;return 1===a&&1===o||(n+=`scale(${a}, ${o})`),n||"none"}const er=(t,e)=>t.depth-e.depth;class ir{constructor(){this.children=[],this.isDirty=!1}add(t){un(this.children,t),this.isDirty=!0}remove(t){mn(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(er),this.isDirty=!1,this.children.forEach(t)}}const nr=["","X","Y","Z"],sr={visibility:"hidden"};let rr=0;const ar={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function or({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(t={},i=(null==e?void 0:e())){this.id=rr++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var t;this.projectionUpdateScheduled=!1,ar.totalNodes=ar.resolvedTargetDeltas=ar.recalculatedProjection=0,this.nodes.forEach(dr),this.nodes.forEach(fr),this.nodes.forEach(yr),this.nodes.forEach(pr),t=ar,window.MotionDebug&&window.MotionDebug.record(t)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new ir)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new xn),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const i=this.eventHandlers.get(t);i&&i.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e,i=this.root.hasTreeAnimated){if(this.instance)return;var n;this.isSVG=(n=e)instanceof SVGElement&&"svg"!==n.tagName,this.instance=e;const{layoutId:s,layout:r,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(r||s)&&(this.isLayoutDirty=!0),t){let i;const n=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,i&&i(),i=function(t,e){const i=performance.now(),n=({timestamp:s})=>{const r=s-i;r>=e&&(Zt(n),t(r-e))};return qt.read(n,!0),()=>Zt(n)}(n,250),ks.hasAnimatedSinceResize&&(ks.hasAnimatedSinceResize=!1,this.nodes.forEach(gr))}))}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&a&&(s||r)&&this.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:i,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||Cr,{onLayoutAnimationStart:r,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!Ks(this.targetLayout,n)||i,c=!e&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||e&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,c);const e={...ln(s,"layout"),onPlay:r,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||gr(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vr),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const t=this.path[s];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:i}=this.options;if(void 0===e&&!i)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ur);this.isUpdating||this.nodes.forEach(mr),this.isUpdating=!1,this.nodes.forEach(xr),this.nodes.forEach(lr),this.nodes.forEach(cr),this.clearAllSnapshots();const t=performance.now();Kt.delta=tt(0,1e3/60,t-Kt.timestamp),Kt.timestamp=t,Kt.isProcessing=!0,Jt.update.process(Kt),Jt.preRender.process(Kt),Jt.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(hr),this.sharedNodes.forEach(br)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qt.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i=0;i<this.path.length;i++){this.path[i].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:n(this.instance),offset:i(this.instance)})}resetTransform(){if(!s)return;const t=this.isLayoutDirty||this.shouldResetTransform,e=this.projectionDelta&&!Zs(this.projectionDelta),i=this.getTransformTemplate(),n=i?i(this.latestValues,""):void 0,r=n!==this.prevTransformTemplateValue;t&&(e||ls(this.latestValues)||r)&&(s(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let i=this.removeElementScroll(e);var n;return t&&(i=this.removeTransform(i)),kr((n=i).x),kr(n.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const e=t.measureViewportBox(),{scroll:i}=this.root;return i&&(gs(e.x,i.offset.x),gs(e.y,i.offset.y)),e}removeElementScroll(t){const e={x:{min:0,max:0},y:{min:0,max:0}};$s(e,t);for(let i=0;i<this.path.length;i++){const n=this.path[i],{scroll:s,options:r}=n;if(n!==this.root&&s&&r.layoutScroll){if(s.isRoot){$s(e,t);const{scroll:i}=this.root;i&&(gs(e.x,-i.offset.x),gs(e.y,-i.offset.y))}gs(e.x,s.offset.x),gs(e.y,s.offset.y)}}return e}applyTransform(t,e=!1){const i={x:{min:0,max:0},y:{min:0,max:0}};$s(i,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&bs(i,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),ls(t.latestValues)&&bs(i,t.latestValues)}return ls(this.latestValues)&&bs(i,this.latestValues),i}removeTransform(t){const e={x:{min:0,max:0},y:{min:0,max:0}};$s(e,t);for(let i=0;i<this.path.length;i++){const t=this.path[i];if(!t.instance)continue;if(!ls(t.latestValues))continue;os(t.latestValues)&&t.updateSnapshot();const n={x:{min:0,max:0},y:{min:0,max:0}};$s(n,t.measurePageBox()),Gs(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,n)}return ls(this.latestValues)&&Gs(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){var e;const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==i;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:s,layoutId:r}=this.options;if(this.layout&&(s||r)){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jn(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,Zn(a.x,o.x,l.x),Zn(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):$s(this.target,this.layout.layoutBox),ms(this.target,this.targetDelta)):$s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jn(this.relativeTargetOrigin,this.target,t.target),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ar.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!os(this.parent.latestValues)&&!cs(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),i=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(n=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(n=!1),n)return;const{layout:s,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!r)return;$s(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(t,e,i,n=!1){const s=i.length;if(!s)return;let r,a;e.x=e.y=1;for(let o=0;o<s;o++){r=i[o],a=r.projectionDelta;const s=r.instance;s&&s.style&&"contents"===s.style.display||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&bs(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ms(t,a)),n&&ls(r.latestValues)&&bs(t,r.latestValues))}e.x=xs(e.x),e.y=xs(e.y)}(this.layoutCorrected,this.treeScale,this.path,i),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox);const{target:l}=e;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;qn(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=tr(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),ar.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t,e=!1){const i=this.snapshot,n=i?i.latestValues:{},s={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Sr));let p;this.animationProgress=0,this.mixTargetDelta=e=>{const i=e/1e3;var l,h,u,m,x,g;jr(r.x,t.x,i),jr(r.y,t.y,i),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jn(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u=this.relativeTarget,m=this.relativeTargetOrigin,x=a,g=i,wr(u.x,m.x,x.x,g),wr(u.y,m.y,x.y,g),p&&(l=this.relativeTarget,h=p,l.x.min===h.x.min&&l.x.max===h.x.max&&l.y.min===h.y.min&&l.y.max===h.y.max)&&(this.isProjectionDirty=!1),p||(p={x:{min:0,max:0},y:{min:0,max:0}}),$s(p,this.relativeTarget)),o&&(this.animationValues=s,function(t,e,i,n,s,r){s?(t.opacity=ni(0,void 0!==i.opacity?i.opacity:1,Ls(n)),t.opacityExit=ni(void 0!==e.opacity?e.opacity:1,0,Ws(n))):r&&(t.opacity=ni(void 0!==e.opacity?e.opacity:1,void 0!==i.opacity?i.opacity:1,n));for(let a=0;a<Ms;a++){const s=`border${Bs[a]}Radius`;let r=Is(e,s),o=Is(i,s);void 0===r&&void 0===o||(r||(r=0),o||(o=0),0===r||0===o||Vs(r)===Vs(o)?(t[s]=Math.max(ni(Fs(r),Fs(o),n),0),(pt.test(o)||pt.test(r))&&(t[s]+="%")):t[s]=o)}(e.rotate||i.rotate)&&(t.rotate=ni(e.rotate||0,i.rotate||0,n))}(s,n,this.latestValues,i,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qt.update((()=>{ks.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,i){const n=X(t)?t:yn(t);return n.start(dn("",n,e,i)),n.animation}(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:i,layout:n,latestValues:s}=t;if(e&&i&&n){if(this!==t&&this.layout&&n&&Tr(this.options.animationType,this.layout.layoutBox,n.layoutBox)){i=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=Yn(this.layout.layoutBox.x);i.x.min=t.target.x.min,i.x.max=i.x.min+e;const n=Yn(this.layout.layoutBox.y);i.y.min=t.target.y.min,i.y.max=i.y.min+n}$s(e,i),bs(e,s),qn(this.projectionDeltaWithTransform,this.layoutCorrected,e,s)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Qs);this.sharedNodes.get(t).add(e);const i=e.options.initialPromotionConfig;e.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:i}={}){const n=this.getStack();n&&n.promote(this,i),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:i}=t;if((i.rotate||i.rotateX||i.rotateY||i.rotateZ)&&(e=!0),!e)return;const n={};for(let s=0;s<nr.length;s++){const e="rotate"+nr[s];i[e]&&(n[e]=i[e],t.setStaticValue(e,0))}t.render();for(const s in n)t.setStaticValue(s,n[s]);t.scheduleRender()}getProjectionStyles(t){var e,i;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sr;const n={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=$t(null==t?void 0:t.pointerEvents)||"",n.transform=s?s(this.latestValues,""):"none",n;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=$t(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!ls(this.latestValues)&&(e.transform=s?s({},""):"none",this.hasProjected=!1),e}const a=r.animationValues||r.latestValues;this.applyTransformsToTarget(),n.transform=tr(this.projectionDeltaWithTransform,this.treeScale,a),s&&(n.transform=s(a,n.transform));const{x:o,y:l}=this.projectionDelta;n.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,r.animationValues?n.opacity=r===this?null!==(i=null!==(e=a.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:n.opacity=r===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in $){if(void 0===a[c])continue;const{correct:t,applyTo:e}=$[c],i="none"===n.transform?a[c]:t(a[c],r);if(e){const t=e.length;for(let s=0;s<t;s++)n[e[s]]=i}else n[c]=i}return this.options.layoutId&&(n.pointerEvents=r===this?$t(null==t?void 0:t.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(ur),this.root.sharedNodes.clear()}}}function lr(t){t.updateLayout()}function cr(t){var e;const i=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=t.layout,{animationType:s}=t.options,r=i.source!==t.layout.source;"size"===s?ss((t=>{const n=r?i.measuredBox[t]:i.layoutBox[t],s=Yn(n);n.min=e[t].min,n.max=n.min+s})):Tr(s,i.layoutBox,e)&&ss((n=>{const s=r?i.measuredBox[n]:i.layoutBox[n],a=Yn(e[n]);s.max=s.min+a,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[n].max=t.relativeTarget[n].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};qn(a,e,i.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?qn(o,t.applyTransform(n,!0),i.measuredBox):qn(o,e,i.layoutBox);const l=!Zs(a);let c=!1;if(!t.resumeFrom){const n=t.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:s,layout:r}=n;if(s&&r){const a={x:{min:0,max:0},y:{min:0,max:0}};Jn(a,i.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Jn(o,e,r.layoutBox),Ks(a,o)||(c=!0),n.options.layoutRoot&&(t.relativeTarget=o,t.relativeTargetOrigin=a,t.relativeParent=n)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:i,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function dr(t){ar.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pr(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hr(t){t.clearSnapshot()}function ur(t){t.clearMeasurements()}function mr(t){t.isLayoutDirty=!1}function xr(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gr(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fr(t){t.resolveTargetDelta()}function yr(t){t.calcProjection()}function vr(t){t.resetRotation()}function br(t){t.removeLeadSnapshot()}function jr(t,e,i){t.translate=ni(e.translate,0,i),t.scale=ni(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function wr(t,e,i,n){t.min=ni(e.min,i.min,n),t.max=ni(e.max,i.max,n)}function Sr(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Cr={duration:.45,ease:[.4,0,.1,1]},Pr=t=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(t),Nr=Pr("applewebkit/")&&!Pr("chrome/")?Math.round:Yt;function kr(t){t.min=Nr(t.min),t.max=Nr(t.max)}function Tr(t,e,i){return"position"===t||"preserve-aspect"===t&&!Xn(Js(e),Js(i),.2)}const Er=or({attachResizeListener:(t,e)=>ee(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ar={current:void 0},Dr=or({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ar.current){const t=new Er({});t.mount(window),t.setOptions({layoutScroll:!0}),Ar.current=t}return Ar.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),Rr={pan:{Feature:class extends he{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(t){this.session=new Ln(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ws(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:Ns(t),onStart:Ns(e),onMove:i,onEnd:(t,e)=>{delete this.session,n&&qt.update((()=>n(t,e)))}}}mount(){this.removePointerDownListener=se(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends he{constructor(t){super(t),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new Cs(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Dr,MeasureLayout:Rs}},zr=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Br(t,e,i=1){const[n,s]=function(t){const e=zr.exec(t);if(!e)return[,];const[,i,n]=e;return[i,n]}(t);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const t=r.trim();return hn(t)?parseFloat(t):t}return J(s)?Br(s,e,i+1):s}const Mr=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Fr=t=>Mr.has(t),Vr=t=>t===et||t===ht,Ir=(t,e)=>parseFloat(t.split(", ")[e]),Lr=(t,e)=>(i,{transform:n})=>{if("none"===n||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return Ir(s[1],e);{const e=n.match(/^matrix\((.+)\)$/);return e?Ir(e[1],t):0}},Wr=new Set(["x","y","z"]),Or=U.filter((t=>!Wr.has(t)));const _r={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Lr(4,13),y:Lr(5,14)};_r.translateX=_r.x,_r.translateY=_r.y;const $r=(t,e,i={},n={})=>{e={...e},n={...n};const s=Object.keys(e).filter(Fr);let r=[],a=!1;const o=[];if(s.forEach((s=>{const l=t.getValue(s);if(!t.hasValue(s))return;let c=i[s],d=jn(c);const p=e[s];let h;if(_t(p)){const t=p.length,e=null===p[0]?1:0;c=p[e],d=jn(c);for(let i=e;i<t&&null!==p[i];i++)h?Ne(jn(p[i])===h):h=jn(p[i])}else h=jn(p);if(d!==h)if(Vr(d)&&Vr(h)){const t=l.get();"string"==typeof t&&l.set(parseFloat(t)),"string"==typeof p?e[s]=parseFloat(p):Array.isArray(p)&&h===ht&&(e[s]=p.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==h?void 0:h.transform)&&(0===c||0===p)?0===c?l.set(h.transform(c)):e[s]=d.transform(p):(a||(r=function(t){const e=[];return Or.forEach((i=>{const n=t.getValue(i);void 0!==n&&(e.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))})),e.length&&t.render(),e}(t),a=!0),o.push(s),n[s]=void 0!==n[s]?n[s]:e[s],l.jump(p))})),o.length){const i=o.indexOf("height")>=0?window.pageYOffset:null,s=((t,e,i)=>{const n=e.measureViewportBox(),s=e.current,r=getComputedStyle(s),{display:a}=r,o={};"none"===a&&e.setStaticValue("display",t.display||"block"),i.forEach((t=>{o[t]=_r[t](n,r)})),e.render();const l=e.measureViewportBox();return i.forEach((i=>{const n=e.getValue(i);n&&n.jump(o[i]),t[i]=_r[i](l,r)})),t})(e,t,o);return r.length&&r.forEach((([e,i])=>{t.getValue(e).set(i)})),t.render(),v&&null!==i&&window.scrollTo({top:i}),{target:s,transitionEnd:n}}return{target:e,transitionEnd:n}};function Ur(t,e,i,n){return(t=>Object.keys(t).some(Fr))(e)?$r(t,e,i,n):{target:e,transitionEnd:n}}const Hr=(t,e,i,n)=>{const s=function(t,{...e},i){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:i};i&&(i={...i}),t.values.forEach((t=>{const e=t.get();if(!J(e))return;const i=Br(e,n);i&&t.set(i)}));for(const s in e){const t=e[s];if(!J(t))continue;const r=Br(t,n);r&&(e[s]=r,i||(i={}),void 0===i[s]&&(i[s]=t))}return{target:e,transitionEnd:i}}(t,e,n);return Ur(t,e=s.target,i,n=s.transitionEnd)},Yr={current:null},Xr={current:!1};const Gr=new WeakMap,qr=Object.keys(B),Zr=qr.length,Kr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Jr=T.length;class Qr{constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:n,visualState:s},r={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qt.render(this.render,!1,!0);const{latestValues:a,renderState:o}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=o,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=r,this.isControllingVariants=E(e),this.isVariantNode=A(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(e,{});for(const d in c){const t=c[d];void 0!==a[d]&&X(t)&&(t.set(a[d],!1),pn(l)&&l.add(d))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,Gr.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),Xr.current||function(){if(Xr.current=!0,v)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yr.current=t.matches;t.addListener(e),e()}else Yr.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Yr.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gr.delete(this.current),this.projection&&this.projection.unmount(),Zt(this.notifyUpdate),Zt(this.render),this.valueSubscriptions.forEach((t=>t())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const i=H.has(t),n=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&qt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)})),s=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(()=>{n(),s()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}loadFeatures({children:t,...e},i,n,s){let r,a;for(let o=0;o<Zr;o++){const t=qr[o],{isEnabled:i,Feature:n,ProjectionNode:s,MeasureLayout:l}=B[t];s&&(r=s),i(e)&&(!this.features[t]&&n&&(this.features[t]=new n(this)),l&&(a=l))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);const{layoutId:t,layout:i,drag:n,dragConstraints:a,layoutScroll:o,layoutRoot:l}=e;this.projection.setOptions({layoutId:t,layout:i,alwaysMeasureLayout:Boolean(n)||a&&C(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof i?i:"both",initialPromotionConfig:s,layoutScroll:o,layoutRoot:l})}return a}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t,e=!0){return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<Kr.length;i++){const e=Kr[i];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const n=t["on"+e];n&&(this.propEventSubscriptions[e]=this.on(e,n))}this.prevMotionValues=function(t,e,i){const{willChange:n}=e;for(const s in e){const r=e[s],a=i[s];if(X(r))t.addValue(s,r),pn(n)&&n.add(s);else if(X(a))t.addValue(s,yn(r,{owner:t})),pn(n)&&n.remove(s);else if(a!==r)if(t.hasValue(s)){const e=t.getValue(s);!e.hasAnimated&&e.set(r)}else{const e=t.getStaticValue(s);t.addValue(s,yn(void 0!==e?e:r,{owner:t}))}}for(const s in i)void 0===e[s]&&t.removeValue(s);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const e={};for(let i=0;i<Jr;i++){const t=T[i],n=this.props[t];(P(n)||!1===n)&&(e[t]=n)}return e}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return void 0===i&&void 0!==e&&(i=yn(e,{owner:this}),this.addValue(t,i)),i}readValue(t){var e;return void 0===this.latestValues[t]&&this.current?null!==(e=this.getBaseTargetFromProps(this.props,t))&&void 0!==e?e:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t]}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props,n="string"==typeof i||"object"==typeof i?null===(e=Wt(this.props,i))||void 0===e?void 0:e[t]:void 0;if(i&&void 0!==n)return n;const s=this.getBaseTargetFromProps(this.props,t);return void 0===s||X(s)?void 0!==this.initialValues[t]&&void 0===n?void 0:this.baseTarget[t]:s}on(t,e){return this.events[t]||(this.events[t]=new xn),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class ta extends Qr{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:e,...i},{transformValues:n},s){let r=function(t,e,i){const n={};for(const s in t){const t=Cn(s,e);if(void 0!==t)n[s]=t;else{const t=i.getValue(s);t&&(n[s]=t.get())}}return n}(i,t||{},this);if(n&&(e&&(e=n(e)),i&&(i=n(i)),r&&(r=n(r))),s){!function(t,e,i){var n,s;const r=Object.keys(e).filter((e=>!t.hasValue(e))),a=r.length;var o;if(a)for(let l=0;l<a;l++){const a=r[l],c=e[a];let d=null;Array.isArray(c)&&(d=c[0]),null===d&&(d=null!==(s=null!==(n=i[a])&&void 0!==n?n:t.readValue(a))&&void 0!==s?s:e[a]),null!=d&&("string"==typeof d&&(hn(d)||an(d))?d=parseFloat(d):(o=d,!wn.find(vn(o))&&fi.test(c)&&(d=rn(a,c))),t.addValue(a,yn(d,{owner:t})),void 0===i[a]&&(i[a]=d),null!==d&&t.setBaseTarget(a,d))}}(this,i,r);const t=Hr(this,i,r,e);e=t.transitionEnd,i=t.target}return{transition:t,transitionEnd:e,...i}}}class ea extends ta{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(H.has(e)){const t=sn(e);return t&&t.default||0}{const n=(i=t,window.getComputedStyle(i)),s=(K(e)?n.getPropertyValue(e):n[e])||0;return"string"==typeof s?s.trim():s}var i}measureInstanceViewportBox(t,{transformPagePoint:e}){return js(t,e)}build(t,e,i,n){yt(t,e,i,n.transformTemplate)}scrapeMotionValuesFromProps(t,e){return It(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;X(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}renderInstance(t,e,i,n){Mt(t,e,i,n)}}class ia extends ta{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(H.has(e)){const t=sn(e);return t&&t.default||0}return e=Ft.has(e)?e:w(e),t.getAttribute(e)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(t,e){return Lt(t,e)}build(t,e,i,n){At(t,e,i,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,i,n){Vt(t,e,0,n)}mount(t){this.isSVGTag=Rt(t.tagName),super.mount(t)}}const na=(t,e)=>_(t)?new ia(e,{enableHardwareAcceleration:!1}):new ea(e,{enableHardwareAcceleration:!0}),sa={...Vn,...we,...Rr,...{layout:{ProjectionNode:Dr,MeasureLayout:Rs}}},ra=W(((t,e)=>function(t,{forwardMotionProps:e=!1},i,n){return{..._(t)?Qt:te,preloadedFeatures:i,useRender:Bt(e),createVisualElement:n,Component:t}}(t,e,sa,na)));function aa(){const t=e.useRef(!1);return b((()=>(t.current=!0,()=>{t.current=!1})),[]),t}class oa extends e.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function la({children:t,isPresent:i}){const n=e.useId(),s=e.useRef(null),r=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect((()=>{const{width:t,height:e,top:a,left:o}=r.current;if(i||!s.current||!t||!e)return;s.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            top: ${a}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[i]),e.createElement(oa,{isPresent:i,childRef:s,sizeRef:r},e.cloneElement(t,{ref:s}))}const ca=({children:t,initial:i,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:a,mode:o})=>{const l=Ot(da),c=e.useId(),d=e.useMemo((()=>({id:c,initial:i,isPresent:n,custom:r,onExitComplete:t=>{l.set(t,!0);for(const e of l.values())if(!e)return;s&&s()},register:t=>(l.set(t,!1),()=>l.delete(t))})),a?void 0:[n]);return e.useMemo((()=>{l.forEach(((t,e)=>l.set(e,!1)))}),[n]),e.useEffect((()=>{!n&&!l.size&&s&&s()}),[n]),"popLayout"===o&&(t=e.createElement(la,{isPresent:n},t)),e.createElement(y.Provider,{value:d},t)};function da(){return new Map}const pa=t=>t.key||"";const ha=({children:t,custom:i,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=e.useContext(M).forceRender||function(){const t=aa(),[i,n]=e.useState(0),s=e.useCallback((()=>{t.current&&n(i+1)}),[i]);return[e.useCallback((()=>qt.postRender(s)),[s]),i]}()[0],c=aa(),d=function(t){const i=[];return e.Children.forEach(t,(t=>{e.isValidElement(t)&&i.push(t)})),i}(t);let p=d;const h=e.useRef(new Map).current,u=e.useRef(p),m=e.useRef(new Map).current,x=e.useRef(!0);var g;if(b((()=>{x.current=!1,function(t,e){t.forEach((t=>{const i=pa(t);e.set(i,t)}))}(d,m),u.current=p})),g=()=>{x.current=!0,m.clear(),h.clear()},e.useEffect((()=>()=>g()),[]),x.current)return e.createElement(e.Fragment,null,p.map((t=>e.createElement(ca,{key:pa(t),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:a,mode:o},t))));p=[...p];const f=u.current.map(pa),y=d.map(pa),v=f.length;for(let e=0;e<v;e++){const t=f[e];-1!==y.indexOf(t)||h.has(t)||h.set(t,void 0)}return"wait"===o&&h.size&&(p=[]),h.forEach(((t,n)=>{if(-1!==y.indexOf(n))return;const r=m.get(n);if(!r)return;const x=f.indexOf(n);let g=t;if(!g){const t=()=>{h.delete(n);const t=Array.from(m.keys()).filter((t=>!y.includes(t)));if(t.forEach((t=>m.delete(t))),u.current=d.filter((e=>{const i=pa(e);return i===n||t.includes(i)})),!h.size){if(!1===c.current)return;l(),s&&s()}};g=e.createElement(ca,{key:pa(r),isPresent:!1,onExitComplete:t,custom:i,presenceAffectsLayout:a,mode:o},r),h.set(n,g)}p.splice(x,0,g)})),p=p.map((t=>{const i=t.key;return h.has(i)?t:e.createElement(ca,{key:pa(t),isPresent:!0,presenceAffectsLayout:a,mode:o},t)})),e.createElement(e.Fragment,null,h.size?p:p.map((t=>e.cloneElement(t))))};function ua(t){const i=Ot((()=>yn(t))),{isStatic:n}=e.useContext(g);if(n){const[,n]=e.useState(t);e.useEffect((()=>i.on("change",n)),[])}return i}function ma(t,e){const i=ua(e()),n=()=>i.set(e());return n(),b((()=>{const e=()=>qt.update(n,!1,!0),i=t.map((t=>t.on("change",e)));return()=>{i.forEach((t=>t())),Zt(n)}})),i}function xa(t,e,i,n){if("function"==typeof t)return function(t){gn.current=[],t();const e=ma(gn.current,t);return gn.current=void 0,e}(t);const s="function"==typeof e?e:function(...t){const e=!Array.isArray(t[0]),i=e?0:-1,n=t[0+i],s=t[1+i],r=t[2+i],a=t[3+i],o=Ni(s,r,{mixer:(l=r[0],(t=>t&&"object"==typeof t&&t.mix)(l)?l.mix:void 0),...a});var l;return e?o(n):o}(e,i,n);return Array.isArray(t)?ga(t,s):ga([t],(([t])=>s(t)))}function ga(t,e){const i=Ot((()=>[]));return ma(t,(()=>{i.length=0;const n=t.length;for(let e=0;e<n;e++)i[e]=t[e].get();return e(i)}))}function fa(t,i={}){const{isStatic:n}=e.useContext(g),s=e.useRef(null),r=ua(X(t)?t.get():t),a=()=>{s.current&&s.current.stop()};return e.useInsertionEffect((()=>r.attach(((t,e)=>{if(n)return e(t);if(a(),s.current=$i({keyframes:[r.get(),t],velocity:r.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:e}),!Kt.isProcessing){const t=performance.now()-Kt.timestamp;t<30&&(s.current.time=Te(t))}return r.get()}),a)),[JSON.stringify(i)]),b((()=>{if(X(t))return t.on("change",(t=>r.set(parseFloat(t))))}),[r]),r}const ya=({steps:t=[],onComplete:i,className:s="",showProgress:r=!0,allowBackNavigation:a=!0,validateStep:o=null,theme:l="light"})=>{const[c,d]=e.useState(0),[p,h]=e.useState({}),[m,x]=e.useState(new Set),[g,f]=e.useState(1),y=e.useCallback(((t,e)=>{h((i=>({...i,[t]:{...i[t],...e}})))}),[]),v=e.useCallback((async()=>{const e=p[c]||{};if(o){if(!(await o(c,e)))return}x((t=>new Set([...t,c]))),c<t.length-1?(f(1),d(c+1)):i&&i(p)}),[c,p,o,t.length,i]),b=e.useCallback((()=>{c>0&&a&&(f(-1),d(c-1))}),[c,a]),j=e.useCallback((e=>{e>=0&&e<t.length&&(f(e>c?1:-1),d(e))}),[c,t.length]),w=t[c],S={initial:{width:0},animate:{width:`${(c+1)/t.length*100}%`,transition:{type:"spring",stiffness:400,damping:40}}};return u.jsxs("div",{className:`step-wizard ${l} ${s}`,style:{minHeight:"500px",display:"flex",flexDirection:"column",backgroundColor:"dark"===l?"var(--background-color)":"#ffffff",borderRadius:"24px",overflow:"hidden",position:"relative"},children:[r&&u.jsxs(ra.div,{className:"wizard-header",style:{padding:"24px 32px",borderBottom:"1px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[u.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"700",color:"var(--text-color)"},children:(null==w?void 0:w.title)||`Шаг ${c+1}`}),u.jsxs("span",{style:{fontSize:"14px",color:"var(--secondary-text-color)",fontWeight:"500"},children:[c+1," из ",t.length]})]}),u.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 122, 255, 0.1)",borderRadius:"4px",overflow:"hidden",marginBottom:"16px"},children:u.jsx(ra.div,{style:{height:"100%",background:"linear-gradient(90deg, #007AFF, #00D4FF)",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0, 122, 255, 0.3)"},variants:S,initial:"initial",animate:"animate"})}),u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.map(((t,e)=>u.jsxs(ra.div,{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",opacity:e<=c?1:.5},whileHover:e<=c?{scale:1.05}:{},onClick:()=>e<=c&&j(e),children:[u.jsx(ra.div,{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",marginBottom:"8px",border:"2px solid",borderColor:m.has(e)?"#00D4FF":e===c?"#007AFF":"var(--border-color)",backgroundColor:m.has(e)?"#00D4FF":e===c?"#007AFF":"transparent",color:m.has(e)||e===c?"#ffffff":"var(--text-color)"},animate:{scale:e===c?1.1:1,boxShadow:e===c?"0 4px 12px rgba(0, 122, 255, 0.3)":"none"},transition:{type:"spring",stiffness:400,damping:25},children:m.has(e)?"✓":e+1}),u.jsx("span",{style:{fontSize:"12px",color:e<=c?"var(--text-color)":"var(--secondary-text-color)",textAlign:"center",maxWidth:"60px",lineHeight:"1.2"},children:t.shortTitle||t.title})]},e)))})]}),u.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:u.jsx(ha,{mode:"wait",custom:g,children:u.jsxs(ra.div,{custom:g,variants:{enter:t=>({x:t>0?300:-300,opacity:0,scale:.9}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:t=>({zIndex:0,x:t<0?300:-300,opacity:0,scale:.9})},initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2},scale:{duration:.2}},style:{position:"absolute",top:0,left:0,right:0,bottom:0,padding:"32px",display:"flex",flexDirection:"column"},children:[(null==w?void 0:w.description)&&u.jsx(ra.p,{style:{fontSize:"16px",color:"var(--secondary-text-color)",lineHeight:"1.5",marginBottom:"32px",textAlign:"center"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:w.description}),u.jsx(ra.div,{style:{flex:1},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},children:(null==w?void 0:w.component)&&n.cloneElement(w.component,{data:p[c]||{},updateData:t=>y(c,t),onNext:v,onPrev:b})})]},c)})}),u.jsxs(ra.div,{className:"wizard-footer",style:{padding:"24px 32px",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:.3,type:"spring",stiffness:400,damping:25}}},initial:"hidden",animate:"visible",children:[u.jsx(ra.button,{style:{padding:"12px 24px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"transparent",color:"var(--text-color)",fontSize:"16px",fontWeight:"500",cursor:c>0&&a?"pointer":"not-allowed",opacity:c>0&&a?1:.5},whileHover:c>0&&a?{borderColor:"var(--primary-color)",transform:"translateY(-1px)"}:{},whileTap:c>0&&a?{scale:.98}:{},onClick:b,disabled:0===c||!a,children:"← Назад"}),u.jsx(ra.button,{style:{padding:"12px 32px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #007AFF, #00D4FF)",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 16px rgba(0, 122, 255, 0.3)"},whileHover:{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 122, 255, 0.4)"},whileTap:{scale:.98},onClick:v,children:c===t.length-1?"Завершить":"Далее →"})]}),u.jsx(ra.div,{style:{position:"absolute",top:"20%",right:"-100px",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(0, 122, 255, 0.05) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(60px)",pointerEvents:"none"},animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.1,1]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}})]})},va=({isOpen:t,onClose:e,children:i,title:n,size:s="medium",animationType:r="scale",showCloseButton:a=!0,className:o="",backdropClassName:l="",closeOnBackdrop:c=!0})=>{const d={small:{maxWidth:"320px",padding:"20px"},medium:{maxWidth:"480px",padding:"24px"},large:{maxWidth:"640px",padding:"32px"},fullscreen:{maxWidth:"100vw",maxHeight:"100vh",padding:"16px"}}[s],p=(()=>{switch(r){case"slide-up":return{hidden:{opacity:0,y:"100vh",scale:.8},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:30,opacity:{duration:.3}}},exit:{opacity:0,y:"100vh",scale:.8,transition:{duration:.3}}};case"slide-down":return{hidden:{opacity:0,y:"-100vh",scale:.8},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,y:"-100vh",scale:.8,transition:{duration:.3}}};case"fade":return{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4}},exit:{opacity:0,transition:{duration:.2}}};case"bounce":return{hidden:{opacity:0,scale:0,rotate:-180},visible:{opacity:1,scale:1,rotate:0,transition:{type:"spring",stiffness:400,damping:15,opacity:{duration:.2}}},exit:{opacity:0,scale:0,rotate:180,transition:{duration:.3}}};default:return{hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:400,damping:25,opacity:{duration:.2}}},exit:{opacity:0,scale:.8,y:20,transition:{duration:.2}}}}})();return t?u.jsx(ha,{children:t&&u.jsx(ra.div,{className:`modal-backdrop ${l}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",onClick:c?e:void 0,children:u.jsxs(ra.div,{className:`modal-content glass-card ${o}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"100%",maxWidth:d.maxWidth,maxHeight:"90vh",overflowY:"auto",position:"relative"},variants:p,initial:"hidden",animate:"visible",exit:"exit",onClick:t=>t.stopPropagation(),children:[(n||a)&&u.jsxs(ra.div,{className:"modal-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${d.padding} ${d.padding} 16px`,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},children:[n&&u.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"var(--text-color)"},children:n}),a&&u.jsx(ra.button,{className:"modal-close-btn",style:{background:"rgba(0, 0, 0, 0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",color:"var(--text-color)"},whileHover:{scale:1.1,backgroundColor:"rgba(0, 0, 0, 0.2)"},whileTap:{scale:.9},onClick:e,children:"✕"})]}),u.jsx(ra.div,{className:"modal-body",style:{padding:d.padding},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:i}),u.jsx(ra.div,{style:{position:"absolute",top:"-50px",right:"-50px",width:"100px",height:"100px",background:"radial-gradient(circle, rgba(0, 122, 255, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(40px)",pointerEvents:"none"},animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})]})})}):null},ba=({options:t=[],value:i,onChange:n,placeholder:s="Выберите опцию",searchable:r=!1,multiple:a=!1,disabled:o=!1,icon:l,className:c="",dropdownClassName:d="",maxHeight:p="200px",showGroupLabels:h=!0})=>{const[m,x]=e.useState(!1),[g,f]=e.useState("");e.useState(-1);const y=e.useRef(null),v=e.useRef(null);e.useEffect((()=>{const t=t=>{y.current&&!y.current.contains(t.target)&&x(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)}),[]),e.useEffect((()=>{m&&r&&v.current&&v.current.focus()}),[m,r]);const b=t.filter((t=>{var e;if(!g)return!0;const i=g.toLowerCase();return t.group?t.items.some((t=>{var e;return t.label.toLowerCase().includes(i)||(null==(e=t.description)?void 0:e.toLowerCase().includes(i))})):t.label.toLowerCase().includes(i)||(null==(e=t.description)?void 0:e.toLowerCase().includes(i))})),j=t=>{if(a){const e=Array.isArray(i)?[...i]:[],s=e.indexOf(t);s>-1?e.splice(s,1):e.push(t),n(e)}else n(t),x(!1)},w=t=>a?Array.isArray(i)&&i.includes(t):i===t,S={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs("div",{className:`animated-dropdown ${c}`,ref:y,style:{position:"relative",width:"100%"},children:[u.jsxs(ra.button,{className:"dropdown-trigger",style:{width:"100%",padding:"16px 20px",border:"2px solid var(--border-color)",borderRadius:"16px",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",color:"var(--text-color)",cursor:o?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"16px",transition:"all 0.3s ease",opacity:o?.6:1},whileHover:o?{}:{borderColor:"var(--primary-color)",transform:"translateY(-1px)",boxShadow:"0 4px 20px rgba(0, 122, 255, 0.1)"},whileTap:o?{}:{scale:.98},onClick:()=>!o&&x(!m),disabled:o,children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l&&u.jsx("span",{style:{fontSize:"20px"},children:l}),u.jsx("span",{style:{color:i?"var(--text-color)":"var(--secondary-text-color)",textAlign:"left"},children:(()=>{if(a&&Array.isArray(i)){if(0===i.length)return s;if(1===i.length){const e=t.find((t=>t.value===i[0]));return e?e.label:i[0]}return`Выбрано: ${i.length}`}const e=t.find((t=>t.value===i));return e?e.label:s})()})]}),u.jsx(ra.span,{style:{fontSize:"12px",color:"var(--secondary-text-color)"},animate:{rotate:m?180:0},transition:{duration:.2},children:"▼"})]}),u.jsx(ha,{children:m&&u.jsxs(ra.div,{className:`dropdown-menu glass-card ${d}`,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"8px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)",zIndex:1e3,overflow:"hidden"},variants:{hidden:{opacity:0,y:-10,scale:.95,transition:{duration:.2}},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25,staggerChildren:.05}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},initial:"hidden",animate:"visible",exit:"exit",children:[r&&u.jsx(ra.div,{style:{padding:"16px 16px 8px"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:u.jsx("input",{ref:v,type:"text",placeholder:"Поиск...",value:g,onChange:t=>f(t.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid var(--border-color)",borderRadius:"12px",background:"rgba(255, 255, 255, 0.8)",fontSize:"14px",outline:"none"}})}),u.jsx("div",{style:{maxHeight:p,overflowY:"auto",padding:"8px"},children:0===b.length?u.jsx(ra.div,{style:{padding:"16px",textAlign:"center",color:"var(--secondary-text-color)",fontSize:"14px"},variants:S,children:"Ничего не найдено"}):b.map(((t,e)=>t.group?u.jsxs(ra.div,{variants:S,children:[h&&u.jsx("div",{style:{padding:"8px 16px 4px",fontSize:"12px",fontWeight:"600",color:"var(--secondary-text-color)",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.group}),t.items.map(((t,e)=>u.jsx(ja,{option:t,isSelected:w(t.value),onClick:()=>j(t.value),variants:S},t.value)))]},t.group):u.jsx(ja,{option:t,isSelected:w(t.value),onClick:()=>j(t.value),variants:S},t.value)))})]})})]})},ja=({option:t,isSelected:e,onClick:i,variants:n})=>u.jsxs(ra.div,{className:"dropdown-option",style:{padding:"12px 16px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:e?"rgba(0, 122, 255, 0.1)":"transparent",border:e?"1px solid rgba(0, 122, 255, 0.3)":"1px solid transparent",display:"flex",alignItems:"center",gap:"12px",margin:"2px 0"},variants:n,whileHover:{backgroundColor:e?"rgba(0, 122, 255, 0.15)":"rgba(0, 122, 255, 0.05)",transform:"translateX(4px)"},whileTap:{scale:.98},onClick:i,children:[t.icon&&u.jsx("span",{style:{fontSize:"18px"},children:t.icon}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:e?"600":"500",color:e?"var(--primary-color)":"var(--text-color)",fontSize:"14px"},children:t.label}),t.description&&u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)",marginTop:"2px"},children:t.description})]}),e&&u.jsx(ra.span,{style:{color:"var(--primary-color)",fontSize:"16px",fontWeight:"700"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:15},children:"✓"})]});function wa({onNext:t,data:i={},updateData:n,onPrev:s}){e.useEffect((()=>{n&&n({welcomeCompleted:!0})}),[n]);const r={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs(ra.div,{className:"text-center fade-in",style:{padding:"40px 0"},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},initial:"hidden",animate:"visible",children:[u.jsx(ra.div,{style:{fontSize:"64px",marginBottom:"24px"},variants:r,animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"🍎"}),u.jsx(ra.h1,{style:{fontSize:"32px",fontWeight:"700",marginBottom:"16px"},variants:r,children:"Cal AI"}),u.jsxs(ra.p,{style:{fontSize:"18px",color:"var(--secondary-text-color)",marginBottom:"40px",lineHeight:"1.5"},variants:r,children:["Персональный помощник для подсчета калорий.",u.jsx("br",{}),"Узнайте свою дневную норму за 2 минуты!"]}),u.jsxs(ra.div,{className:"card",style:{marginBottom:"32px",textAlign:"left",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"24px"},variants:r,children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",color:"var(--text-color)"},children:"Что мы сделаем:"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[{icon:"📊",text:"Определим ваши параметры"},{icon:"🎯",text:"Выберем цель"},{icon:"🧮",text:"Рассчитаем калории"}].map(((t,e)=>u.jsxs(ra.div,{style:{display:"flex",alignItems:"center",gap:"12px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+.1*e},children:[u.jsx(ra.span,{style:{fontSize:"20px"},animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,delay:.3*e,ease:"easeInOut"},children:t.icon}),u.jsx("span",{style:{color:"var(--text-color)"},children:t.text})]},e)))})]}),u.jsx(ra.button,{className:"btn btn-primary",onClick:()=>{t&&t({})},style:{fontSize:"18px",padding:"16px 32px",background:"linear-gradient(135deg, #007AFF, #00D4FF)",border:"none",borderRadius:"12px",color:"#ffffff",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 16px rgba(0, 122, 255, 0.3)"},variants:r,whileHover:{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 122, 255, 0.4)"},whileTap:{scale:.98},children:"Начать ✨"})]})}const Sa=({data:t={},updateData:i})=>{const[n,s]=e.useState({name:t.name||"",gender:t.gender||null,age:t.age||null,...t});e.useEffect((()=>{i(n)}),[n,i]);const r=(t,e)=>{s((i=>({...i,[t]:e})))},a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs(ra.div,{style:{display:"flex",flexDirection:"column",gap:"24px",maxWidth:"500px",margin:"0 auto"},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[u.jsxs(ra.div,{style:{textAlign:"center",marginBottom:"16px"},variants:a,children:[u.jsx("h3",{style:{fontSize:"28px",margin:"0 0 8px",color:"var(--text-color)",fontWeight:"700"},children:"Расскажите о себе 👋"}),u.jsx("p",{style:{fontSize:"16px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.5"},children:"Эта информация поможет нам персонализировать ваш опыт"})]}),u.jsxs(ra.div,{variants:a,children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:"600",color:"var(--text-color)"},children:"Как вас зовут? 📝"}),u.jsx(ra.input,{type:"text",placeholder:"Введите ваше имя",value:n.name,onChange:t=>r("name",t.target.value),style:{width:"100%",padding:"16px 20px",borderRadius:"16px",border:"2px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",color:"var(--text-color)",fontSize:"16px",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},whileFocus:{borderColor:"var(--primary-color)",boxShadow:"0 0 0 3px rgba(0, 122, 255, 0.1)",transform:"translateY(-1px)"}})]}),u.jsxs(ra.div,{variants:a,children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:"600",color:"var(--text-color)"},children:"Выберите пол 👤"}),u.jsx(ba,{options:[{value:"male",label:"Мужской",icon:"👨",description:"Мужчина"},{value:"female",label:"Женский",icon:"👩",description:"Женщина"}],value:n.gender,onChange:t=>r("gender",t),placeholder:"Выберите пол",icon:"👤"})]}),u.jsxs(ra.div,{variants:a,children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"16px",fontWeight:"600",color:"var(--text-color)"},children:"Укажите возрастную группу 🎂"}),u.jsx(ba,{options:[{group:"Молодость",items:[{value:"18-25",label:"18-25 лет",icon:"🌱",description:"Активный возраст"},{value:"26-35",label:"26-35 лет",icon:"💪",description:"Зрелость и энергия"}]},{group:"Зрелость",items:[{value:"36-45",label:"36-45 лет",icon:"⭐",description:"Опытный возраст"},{value:"46-55",label:"46-55 лет",icon:"🌟",description:"Мудрость и стабильность"}]},{group:"Мудрость",items:[{value:"56-65",label:"56-65 лет",icon:"🎖️",description:"Золотой возраст"},{value:"65+",label:"65+ лет",icon:"👑",description:"Почетный возраст"}]}],value:n.age,onChange:t=>r("age",t),placeholder:"Выберите возрастную группу",icon:"🎂",searchable:!1})]}),n.name&&n.gender&&n.age&&u.jsxs(ra.div,{style:{background:"rgba(0, 122, 255, 0.1)",border:"1px solid rgba(0, 122, 255, 0.2)",borderRadius:"16px",padding:"20px",textAlign:"center",marginTop:"16px"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:400,damping:25,delay:.2},children:[u.jsx(ra.div,{style:{fontSize:"24px",marginBottom:"8px"},animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"👋"}),u.jsxs("p",{style:{fontSize:"16px",color:"var(--text-color)",margin:"0 0 4px",fontWeight:"600"},children:["Привет, ",n.name,"!"]}),u.jsx("p",{style:{fontSize:"14px",color:"var(--secondary-text-color)",margin:0},children:"Рады знакомству! Давайте продолжим настройку вашего профиля."})]}),u.jsx(ra.div,{style:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"16px"},variants:a,children:[n.name,n.gender,n.age].map(((t,e)=>u.jsx(ra.div,{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:t?"var(--primary-color)":"rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease"},animate:{scale:t?[1,1.2,1]:1,boxShadow:t?"0 0 8px rgba(0, 122, 255, 0.5)":"none"},transition:{scale:{duration:.6,repeat:1/0,ease:"easeInOut"},backgroundColor:{duration:.3}}},e)))})]})},Ca=({data:t={},updateData:i})=>{const[n,s]=e.useState({height:t.height||170,weight:t.weight||70,...t});e.useEffect((()=>{i(n)}),[n,i]);const r=(t,e)=>{const i=parseFloat(e);s((e=>({...e,[t]:i})))},a=(()=>{if(n.height&&n.weight){const t=n.height/100;return(n.weight/(t*t)).toFixed(1)}return null})(),o=(t=>{if(!t)return null;const e=parseFloat(t);return e<18.5?{text:"Недостаток веса",color:"#74B9FF",emoji:"📉"}:e<25?{text:"Нормальный вес",color:"#00B894",emoji:"✅"}:e<30?{text:"Избыточный вес",color:"#FDCB6E",emoji:"⚠️"}:{text:"Ожирение",color:"#E17055",emoji:"⚠️"}})(a),l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs(ra.div,{style:{display:"flex",flexDirection:"column",gap:"32px",maxWidth:"500px",margin:"0 auto"},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[u.jsxs(ra.div,{style:{textAlign:"center",marginBottom:"16px"},variants:l,children:[u.jsx("h3",{style:{fontSize:"28px",margin:"0 0 8px",color:"var(--text-color)",fontWeight:"700"},children:"Параметры тела 📏"}),u.jsx("p",{style:{fontSize:"16px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.5"},children:"Укажите ваш рост и вес для расчета индивидуальных рекомендаций"})]}),u.jsxs(ra.div,{variants:l,children:[u.jsxs("label",{style:{display:"block",marginBottom:"12px",fontSize:"18px",fontWeight:"600",color:"var(--text-color)",textAlign:"center"},children:["Рост: ",n.height," см 📏"]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(ra.input,{type:"range",min:"120",max:"220",value:n.height,onChange:t=>r("height",t.target.value),style:{width:"100%",height:"8px",borderRadius:"4px",background:`linear-gradient(90deg, \n                var(--primary-color) 0%, \n                var(--primary-color) ${(n.height-120)/100*100}%, \n                rgba(255, 255, 255, 0.2) ${(n.height-120)/100*100}%, \n                rgba(255, 255, 255, 0.2) 100%)`,outline:"none",appearance:"none",cursor:"pointer"},whileHover:{transform:"scaleY(1.2)"}}),u.jsx("style",{children:'\n            input[type="range"]::-webkit-slider-thumb {\n              appearance: none;\n              width: 24px;\n              height: 24px;\n              border-radius: 50%;\n              background: linear-gradient(135deg, #007AFF, #00D4FF);\n              cursor: pointer;\n              box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);\n              transition: all 0.3s ease;\n            }\n            input[type="range"]::-webkit-slider-thumb:hover {\n              transform: scale(1.2);\n              box-shadow: 0 6px 16px rgba(0, 122, 255, 0.6);\n            }\n            input[type="range"]::-moz-range-thumb {\n              width: 24px;\n              height: 24px;\n              border-radius: 50%;\n              background: linear-gradient(135deg, #007AFF, #00D4FF);\n              cursor: pointer;\n              border: none;\n              box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);\n            }\n          '}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"12px",color:"var(--secondary-text-color)"},children:[u.jsx("span",{children:"120 см"}),u.jsx("span",{children:"170 см"}),u.jsx("span",{children:"220 см"})]})]})]}),u.jsxs(ra.div,{variants:l,children:[u.jsxs("label",{style:{display:"block",marginBottom:"12px",fontSize:"18px",fontWeight:"600",color:"var(--text-color)",textAlign:"center"},children:["Вес: ",n.weight," кг ⚖️"]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(ra.input,{type:"range",min:"30",max:"150",value:n.weight,onChange:t=>r("weight",t.target.value),style:{width:"100%",height:"8px",borderRadius:"4px",background:`linear-gradient(90deg, \n                var(--primary-color) 0%, \n                var(--primary-color) ${(n.weight-30)/120*100}%, \n                rgba(255, 255, 255, 0.2) ${(n.weight-30)/120*100}%, \n                rgba(255, 255, 255, 0.2) 100%)`,outline:"none",appearance:"none",cursor:"pointer"},whileHover:{transform:"scaleY(1.2)"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"12px",color:"var(--secondary-text-color)"},children:[u.jsx("span",{children:"30 кг"}),u.jsx("span",{children:"90 кг"}),u.jsx("span",{children:"150 кг"})]})]})]}),a&&u.jsxs(ra.div,{style:{background:"rgba(255, 255, 255, 0.05)",border:`2px solid ${o.color}`,borderRadius:"20px",padding:"24px",textAlign:"center"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:400,damping:25,delay:.3},children:[u.jsx(ra.div,{style:{fontSize:"32px",marginBottom:"12px"},animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:o.emoji}),u.jsxs("h4",{style:{fontSize:"24px",margin:"0 0 8px",color:o.color,fontWeight:"700"},children:["ИМТ: ",a]}),u.jsx("p",{style:{fontSize:"16px",color:"var(--text-color)",margin:"0 0 8px",fontWeight:"600"},children:o.text}),u.jsx(ra.div,{style:{fontSize:"14px",color:"var(--secondary-text-color)",lineHeight:"1.4"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"ИМТ (Индекс массы тела) поможет нам подобрать оптимальные рекомендации по питанию"})]}),u.jsxs(ra.div,{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"32px",padding:"24px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"16px"},variants:l,children:[u.jsxs(ra.div,{style:{textAlign:"center"},whileHover:{scale:1.05},children:[u.jsx(ra.div,{style:{fontSize:"48px",marginBottom:"8px"},animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"🧍"}),u.jsxs("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)"},children:[n.height," см"]})]}),u.jsxs(ra.div,{style:{textAlign:"center"},whileHover:{scale:1.05},children:[u.jsx(ra.div,{style:{fontSize:"48px",marginBottom:"8px"},animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"⚖️"}),u.jsxs("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)"},children:[n.weight," кг"]})]})]})]})},Pa=({data:t={},updateData:i})=>{const[n,s]=e.useState(t.activity||null);e.useEffect((()=>{i({activity:n})}),[n,i]);const r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:30,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs(ra.div,{style:{display:"flex",flexDirection:"column",gap:"24px",maxWidth:"600px",margin:"0 auto"},variants:r,initial:"hidden",animate:"visible",children:[u.jsxs(ra.div,{style:{textAlign:"center",marginBottom:"16px"},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[u.jsx("h3",{style:{fontSize:"28px",margin:"0 0 8px",color:"var(--text-color)",fontWeight:"700"},children:"Уровень активности 🏃‍♀️"}),u.jsx("p",{style:{fontSize:"16px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.5"},children:"Выберите уровень вашей физической активности для точного расчета калорий"})]}),u.jsx(ra.div,{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},variants:r,children:[{id:"sedentary",title:"Малоподвижный",subtitle:"Сидячая работа",description:"Офисная работа, минимум физической активности",emoji:"🪑",multiplier:1.2,examples:["Офисная работа","Учеба за компьютером","Чтение"],color:"#74B9FF"},{id:"light",title:"Легкая активность",subtitle:"1-3 дня в неделю",description:"Легкие упражнения или спорт несколько раз в неделю",emoji:"🚶",multiplier:1.375,examples:["Прогулки","Легкая йога","Домашние дела"],color:"#00B894"},{id:"moderate",title:"Умеренная активность",subtitle:"3-5 дней в неделю",description:"Умеренные упражнения или спорт 3-5 раз в неделю",emoji:"🏃",multiplier:1.55,examples:["Бег трусцой","Плавание","Велосипед"],color:"#FDCB6E"},{id:"high",title:"Высокая активность",subtitle:"6-7 дней в неделю",description:"Интенсивные упражнения или спорт 6-7 раз в неделю",emoji:"💪",multiplier:1.725,examples:["Тренажерный зал","Кроссфит","Интенсивный спорт"],color:"#E17055"}].map(((t,e)=>u.jsxs(ra.div,{style:{background:n===t.id?`linear-gradient(135deg, ${t.color}20, ${t.color}10)`:"rgba(255, 255, 255, 0.05)",border:n===t.id?`2px solid ${t.color}`:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"24px",cursor:"pointer",position:"relative",overflow:"hidden"},variants:a,whileHover:{transform:"translateY(-4px)",boxShadow:`0 8px 32px ${t.color}40`},whileTap:{scale:.98},onClick:()=>s(t.id),children:[u.jsx(ra.div,{style:{position:"absolute",top:"-50%",right:"-50%",width:"100px",height:"100px",background:`radial-gradient(circle, ${t.color}20 0%, transparent 70%)`,borderRadius:"50%",filter:"blur(20px)",pointerEvents:"none"},animate:{scale:n===t.id?[1,1.2,1]:1,opacity:n===t.id?[.3,.6,.3]:.2},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",position:"relative"},children:[u.jsx(ra.div,{style:{fontSize:"32px",marginRight:"16px",padding:"8px",background:`${t.color}20`,borderRadius:"12px"},animate:{scale:n===t.id?[1,1.1,1]:1},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:t.emoji}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"18px",margin:"0 0 4px",color:n===t.id?t.color:"var(--text-color)",fontWeight:"700",transition:"color 0.3s ease"},children:t.title}),u.jsx("p",{style:{fontSize:"14px",color:"var(--secondary-text-color)",margin:0,fontWeight:"500"},children:t.subtitle})]})]}),u.jsx("p",{style:{fontSize:"14px",color:"var(--secondary-text-color)",lineHeight:"1.4",marginBottom:"16px"},children:t.description}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("p",{style:{fontSize:"12px",color:"var(--secondary-text-color)",marginBottom:"8px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Примеры:"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:t.examples.map(((e,i)=>u.jsx("span",{style:{fontSize:"12px",color:n===t.id?t.color:"var(--text-color)",background:n===t.id?`${t.color}20`:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"6px",border:n===t.id?`1px solid ${t.color}40`:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease"},children:e},i)))})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("span",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:["Коэффициент: ",t.multiplier]}),n===t.id&&u.jsx(ra.div,{style:{color:t.color,fontSize:"18px"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:15},children:"✓"})]})]},t.id)))}),n&&u.jsxs(ra.div,{style:{background:"rgba(0, 122, 255, 0.1)",border:"1px solid rgba(0, 122, 255, 0.2)",borderRadius:"16px",padding:"20px",textAlign:"center"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:25,delay:.2},children:[u.jsx(ra.div,{style:{fontSize:"24px",marginBottom:"8px"},animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"⚡"}),u.jsx("p",{style:{fontSize:"16px",color:"var(--text-color)",margin:"0 0 8px",fontWeight:"600"},children:"Отличный выбор!"}),u.jsx("p",{style:{fontSize:"14px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.4"},children:"Мы учтем ваш уровень активности при расчете рекомендуемого количества калорий и составлении плана питания."})]})]})},Na=({data:t={},updateData:i})=>{const[n,s]=e.useState(t.goal||null),[r,a]=e.useState(t.targetWeight||""),[o,l]=e.useState(t.timeframe||"");e.useEffect((()=>{i({goal:n,targetWeight:r,timeframe:o})}),[n,r,o,i]);const c=[{id:"lose_weight",title:"Похудеть",subtitle:"Снизить вес",description:"Создать дефицит калорий для безопасного снижения веса",emoji:"📉",color:"#74B9FF",tips:["Сбалансированное питание","Контроль порций","Регулярные приемы пищи"],calorieAdjustment:-500},{id:"maintain_weight",title:"Поддержать вес",subtitle:"Сохранить форму",description:"Поддерживать текущий вес и улучшить качество питания",emoji:"⚖️",color:"#00B894",tips:["Сбалансированный рацион","Здоровые привычки","Регулярность питания"],calorieAdjustment:0},{id:"gain_weight",title:"Набрать вес",subtitle:"Увеличить массу",description:"Здоровый набор веса с правильным соотношением питательных веществ",emoji:"📈",color:"#FDCB6E",tips:["Увеличить калорийность","Частые приемы пищи","Белковая пища"],calorieAdjustment:500},{id:"build_muscle",title:"Набрать мышечную массу",subtitle:"Построить мускулатуру",description:"Увеличить мышечную массу с акцентом на белковое питание",emoji:"💪",color:"#E17055",tips:["Высокобелковое питание","Частые приемы пищи","Сложные углеводы"],calorieAdjustment:300}],d=c.find((t=>t.id===n)),p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:30,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}}};return u.jsxs(ra.div,{style:{display:"flex",flexDirection:"column",gap:"32px",maxWidth:"700px",margin:"0 auto"},variants:p,initial:"hidden",animate:"visible",children:[u.jsxs(ra.div,{style:{textAlign:"center",marginBottom:"16px"},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[u.jsx("h3",{style:{fontSize:"28px",margin:"0 0 8px",color:"var(--text-color)",fontWeight:"700"},children:"Ваша цель 🎯"}),u.jsx("p",{style:{fontSize:"16px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.5"},children:"Выберите основную цель, которую хотите достичь"})]}),u.jsx(ra.div,{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},variants:p,children:c.map(((t,e)=>u.jsxs(ra.div,{style:{background:n===t.id?`linear-gradient(135deg, ${t.color}25, ${t.color}10)`:"rgba(255, 255, 255, 0.05)",border:n===t.id?`2px solid ${t.color}`:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"28px",cursor:"pointer",position:"relative",overflow:"hidden"},variants:h,whileHover:{transform:"translateY(-6px)",boxShadow:`0 12px 40px ${t.color}30`},whileTap:{scale:.97},onClick:()=>s(t.id),children:[u.jsx(ra.div,{style:{position:"absolute",top:"-30px",right:"-30px",width:"80px",height:"80px",background:`radial-gradient(circle, ${t.color}25 0%, transparent 70%)`,borderRadius:"50%",filter:"blur(30px)",pointerEvents:"none"},animate:{scale:n===t.id?[1,1.3,1]:1,opacity:n===t.id?[.4,.7,.4]:.3},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px",position:"relative"},children:[u.jsx(ra.div,{style:{fontSize:"40px",marginRight:"20px",padding:"12px",background:`${t.color}20`,borderRadius:"16px",border:`2px solid ${t.color}30`},animate:{scale:n===t.id?[1,1.05,1]:1,rotate:n===t.id?[0,5,-5,0]:0},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:t.emoji}),u.jsxs("div",{children:[u.jsx("h4",{style:{fontSize:"20px",margin:"0 0 6px",color:n===t.id?t.color:"var(--text-color)",fontWeight:"700",transition:"color 0.3s ease"},children:t.title}),u.jsx("p",{style:{fontSize:"14px",color:"var(--secondary-text-color)",margin:0,fontWeight:"500"},children:t.subtitle})]})]}),u.jsx("p",{style:{fontSize:"15px",color:"var(--secondary-text-color)",lineHeight:"1.5",marginBottom:"20px"},children:t.description}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("p",{style:{fontSize:"13px",color:"var(--secondary-text-color)",marginBottom:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Ключевые принципы:"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.tips.map(((e,i)=>u.jsxs("div",{style:{fontSize:"13px",color:n===t.id?t.color:"var(--text-color)",background:n===t.id?`${t.color}15`:"rgba(255, 255, 255, 0.08)",padding:"8px 12px",borderRadius:"8px",border:n===t.id?`1px solid ${t.color}30`:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{color:t.color},children:"•"}),e]},i)))})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("span",{style:{fontSize:"13px",color:"var(--secondary-text-color)"},children:["Калории: ",t.calorieAdjustment>=0?"+":"",t.calorieAdjustment]}),n===t.id&&u.jsx(ra.div,{style:{color:t.color,fontSize:"20px"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:15},children:"✓"})]})]},t.id)))}),n&&("lose_weight"===n||"gain_weight"===n)&&u.jsxs(ra.div,{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"28px"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:25,delay:.3},children:[u.jsx("h4",{style:{fontSize:"18px",margin:"0 0 20px",color:"var(--text-color)",fontWeight:"600",textAlign:"center"},children:"Дополнительные настройки 🎛️"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"var(--text-color)"},children:"Целевой вес (кг)"}),u.jsx(ra.input,{type:"number",placeholder:"Введите целевой вес",value:r,onChange:t=>a(t.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-color)",fontSize:"14px",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},whileFocus:{borderColor:(null==d?void 0:d.color)||"var(--primary-color)",boxShadow:`0 0 0 3px ${(null==d?void 0:d.color)||"var(--primary-color)"}20`}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"var(--text-color)"},children:"Временные рамки"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[{value:"1-month",label:"1 месяц",description:"Быстрый результат"},{value:"3-months",label:"3 месяца",description:"Оптимальный период"},{value:"6-months",label:"6 месяцев",description:"Устойчивый результат"},{value:"1-year",label:"1 год",description:"Долгосрочная цель"}].map((t=>u.jsxs(ra.button,{style:{padding:"10px 12px",borderRadius:"10px",border:o===t.value?`2px solid ${(null==d?void 0:d.color)||"var(--primary-color)"}`:"2px solid rgba(255, 255, 255, 0.1)",background:o===t.value?`${(null==d?void 0:d.color)||"var(--primary-color)"}20`:"rgba(255, 255, 255, 0.05)",color:o===t.value?(null==d?void 0:d.color)||"var(--primary-color)":"var(--text-color)",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},whileHover:{transform:"translateY(-1px)",boxShadow:`0 4px 12px ${(null==d?void 0:d.color)||"var(--primary-color)"}20`},whileTap:{scale:.98},onClick:()=>l(t.value),children:[u.jsx("div",{style:{fontWeight:"600"},children:t.label}),u.jsx("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:t.description})]},t.value)))})]})]})]}),n&&u.jsxs(ra.div,{style:{background:`linear-gradient(135deg, ${d.color}20, ${d.color}10)`,border:`1px solid ${d.color}30`,borderRadius:"20px",padding:"24px",textAlign:"center"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:25,delay:.4},children:[u.jsx(ra.div,{style:{fontSize:"28px",marginBottom:"12px"},animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"🚀"}),u.jsx("h4",{style:{fontSize:"18px",margin:"0 0 8px",color:d.color,fontWeight:"700"},children:"Отличный выбор!"}),u.jsx("p",{style:{fontSize:"15px",color:"var(--text-color)",margin:"0 0 12px",fontWeight:"500"},children:"Мы создадим персональный план питания для достижения вашей цели"}),u.jsx("p",{style:{fontSize:"13px",color:"var(--secondary-text-color)",margin:0,lineHeight:"1.4"},children:"Помните: устойчивые результаты достигаются постепенно и с правильным подходом к питанию! 💪"})]})]})},ka=[{title:"Добро пожаловать",shortTitle:"Старт",description:"Давайте начнем ваш путь к здоровому питанию",component:u.jsx(wa,{})},{title:"Личная информация",shortTitle:"Профиль",description:"Расскажите немного о себе",component:u.jsx(Sa,{})},{title:"Параметры тела",shortTitle:"Тело",description:"Укажите ваши физические параметры",component:u.jsx(Ca,{})},{title:"Уровень активности",shortTitle:"Активность",description:"Определим ваш уровень физической активности",component:u.jsx(Pa,{})},{title:"Ваша цель",shortTitle:"Цель",description:"Что вы хотите достичь?",component:u.jsx(Na,{})}];function Ta({onComplete:t}){const[i,n]=e.useState(!1),[s,r]=e.useState("login"),[a,o]=e.useState({gender:null,age:null,height:null,weight:null,activity:null,goal:null,name:"",email:"",preferences:[]});return u.jsxs("div",{style:{minHeight:"100vh",background:"var(--background-color)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[u.jsx(ra.div,{style:{width:"100%",maxWidth:"800px",margin:"0 auto"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:u.jsx(ya,{steps:ka,onComplete:t=>{const e=Object.keys(t).reduce(((e,i)=>({...e,...t[i]})),{});o(e),n(!0)},validateStep:async(t,e)=>{switch(t){case 0:default:return!0;case 1:return e.gender&&e.age&&e.name;case 2:return e.height&&e.weight;case 3:return e.activity;case 4:return e.goal}},theme:"dark",className:"glass-card"})}),u.jsx(va,{isOpen:i,onClose:()=>n(!1),title:"Завершение регистрации",size:"medium",animationType:"slide-up",closeOnBackdrop:!1,children:u.jsx(Ea,{step:s,onStepChange:r,onComplete:e=>{const i={...a,...e};t(i),n(!1)},profileData:a})}),u.jsx(ra.div,{style:{position:"fixed",top:"10%",left:"-100px",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(0, 122, 255, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(80px)",pointerEvents:"none",zIndex:-1},animate:{x:[0,50,0],y:[0,-30,0],scale:[1,1.2,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),u.jsx(ra.div,{style:{position:"fixed",bottom:"20%",right:"-150px",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(255, 0, 122, 0.08) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(100px)",pointerEvents:"none",zIndex:-1},animate:{x:[0,-40,0],y:[0,40,0],scale:[1,1.1,1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]})}const Ea=({step:t,onStepChange:i,onComplete:n,profileData:s})=>{const[r,a]=e.useState({email:"",password:"",confirmPassword:"",agreeToTerms:!1,notifications:!0}),o=(t,e)=>{a((i=>({...i,[t]:e})))},l=()=>{"login"===t?i("preferences"):"preferences"===t&&n(r)};return"login"===t?u.jsxs(ra.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[u.jsx("h3",{style:{color:"var(--text-color)",marginBottom:"8px"},children:"Почти готово! 🎉"}),u.jsx("p",{style:{color:"var(--secondary-text-color)",fontSize:"14px"},children:"Создайте аккаунт, чтобы сохранить ваш прогресс"})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsx(ra.input,{type:"email",placeholder:"Email",value:r.email,onChange:t=>o("email",t.target.value),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-color)",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},whileFocus:{borderColor:"var(--primary-color)",boxShadow:"0 0 0 3px rgba(0, 122, 255, 0.1)"}}),u.jsx(ra.input,{type:"password",placeholder:"Пароль",value:r.password,onChange:t=>o("password",t.target.value),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-color)",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},whileFocus:{borderColor:"var(--primary-color)",boxShadow:"0 0 0 3px rgba(0, 122, 255, 0.1)"}}),u.jsx(ra.input,{type:"password",placeholder:"Подтвердите пароль",value:r.confirmPassword,onChange:t=>o("confirmPassword",t.target.value),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border-color)",background:"rgba(255, 255, 255, 0.05)",color:"var(--text-color)",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},whileFocus:{borderColor:"var(--primary-color)",boxShadow:"0 0 0 3px rgba(0, 122, 255, 0.1)"}}),u.jsxs(ra.label,{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--text-color)",fontSize:"14px",cursor:"pointer"},whileTap:{scale:.98},children:[u.jsx("input",{type:"checkbox",checked:r.agreeToTerms,onChange:t=>o("agreeToTerms",t.target.checked),style:{width:"18px",height:"18px",accentColor:"var(--primary-color)"}}),"Согласен с условиями использования"]}),u.jsx(ra.button,{style:{padding:"16px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #007AFF, #00D4FF)",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"8px",boxShadow:"0 4px 16px rgba(0, 122, 255, 0.3)"},whileHover:{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 122, 255, 0.4)"},whileTap:{scale:.98},onClick:l,disabled:!(r.email&&r.password&&r.confirmPassword&&r.agreeToTerms),children:"Создать аккаунт"})]})]}):u.jsxs(ra.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[u.jsx("h3",{style:{color:"var(--text-color)",marginBottom:"8px"},children:"Настройте уведомления 🔔"}),u.jsx("p",{style:{color:"var(--secondary-text-color)",fontSize:"14px"},children:"Выберите, какие уведомления вы хотите получать"})]}),u.jsx(ba,{options:[{value:"daily_reminders",label:"Ежедневные напоминания",description:"Получать напоминания о приеме пищи",icon:"🔔"},{value:"weekly_reports",label:"Еженедельные отчеты",description:"Сводка по питанию за неделю",icon:"📊"},{value:"tips",label:"Полезные советы",description:"Советы по здоровому питанию",icon:"💡"}],value:r.notifications||[],onChange:t=>o("notifications",t),placeholder:"Выберите типы уведомлений",multiple:!0,searchable:!1}),u.jsx(ra.button,{style:{width:"100%",padding:"16px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #007AFF, #00D4FF)",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"24px",boxShadow:"0 4px 16px rgba(0, 122, 255, 0.3)"},whileHover:{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 122, 255, 0.4)"},whileTap:{scale:.98},onClick:l,children:"Завершить регистрацию ✨"})]})},Aa={sedentary:{value:1.2,label:"Сидячий образ жизни",description:"Мало или никаких упражнений"},light:{value:1.375,label:"Легкая активность",description:"Легкие упражнения 1-3 дня в неделю"},moderate:{value:1.55,label:"Умеренная активность",description:"Умеренные упражнения 3-5 дней в неделю"},high:{value:1.725,label:"Высокая активность",description:"Интенсивные упражнения 6-7 дней в неделю"},extreme:{value:1.9,label:"Очень высокая активность",description:"Очень интенсивные упражнения, физическая работа"}},Da={lose:{label:"Снижение веса",modifier:-500,description:"Потеря 0.5 кг в неделю"},maintain:{label:"Сохранение веса",modifier:0,description:"Поддержание текущего веса"},gain:{label:"Набор веса",modifier:500,description:"Набор 0.5 кг в неделю"}};function Ra(t){const e=function(t){const{gender:e,age:i,height:n,weight:s}=t,r=10*s+6.25*n-5*i+("male"===e?5:-161);return Math.round(r)}(t),i=function(t,e){const i=Aa[e].value;return Math.round(t*i)}(e,t.activity),n=function(t,e){const i=Da[e].modifier;return Math.round(t+i)}(i,t.goal);return{bmr:e,tdee:i,targetCalories:n,goal:Da[t.goal],activity:Aa[t.activity]}}function za(t){const e=Math.round(.3*t/4),i=Math.round(.4*t/4),n=Math.round(.3*t/9);return{protein:{grams:e,calories:4*e},carbs:{grams:i,calories:4*i},fat:{grams:n,calories:9*n}}}const Ba=({value:t,duration:i=2e3,prefix:n="",suffix:s="",className:r="",colorThresholds:a=null})=>{const[o,l]=e.useState(0),c=fa(0,{duration:i});e.useEffect((()=>{c.set(t)}),[c,t]),e.useEffect((()=>c.onChange((t=>{l(Math.round(t))}))),[c]);const d=xa(c,[0,.5*t,.8*t,t],a?["#34c759","#34c759","#ff9500","#ff3b30"]:["var(--text-color)","var(--text-color)","var(--text-color)","var(--text-color)"]);return u.jsxs(ra.div,{className:`animated-counter ${r}`,children:[u.jsxs(ra.span,{className:"animated-counter__value",style:{color:d,fontSize:"inherit",fontWeight:"inherit"},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:20,delay:.2},children:[n,o.toLocaleString(),s]}),o===t&&t>0&&u.jsx(ra.div,{className:"animated-counter__celebration",initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,0],rotate:[0,180,360]},transition:{duration:1.5,times:[0,.3,1],ease:"easeOut"},children:"✨"})]})},Ma=({children:t,onClick:e,variant:i="primary",size:n="medium",disabled:s=!1,loading:r=!1,pulse:a=!1,className:o="",...l})=>{const c={loading:{rotate:360,transition:{duration:1,repeat:1/0,ease:"linear"}}},d=`animated-btn animated-btn--${i} animated-btn--${n} ${o}`;return u.jsxs(ra.button,{className:d,variants:{initial:{scale:1},hover:{scale:1.02,boxShadow:"0 8px 32px rgba(0, 122, 255, 0.3)",transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.95,transition:{type:"spring",stiffness:400,damping:10}},disabled:{scale:1,opacity:.6}},initial:"initial",whileHover:s?"disabled":"hover",whileTap:s?{}:"tap",animate:a&&!s?"pulse":"initial",onClick:e,disabled:s||r,...l,children:[u.jsxs(ra.div,{className:"animated-btn__content",children:[r&&u.jsx(ra.div,{className:"animated-btn__spinner",variants:c,animate:"loading",children:"⭕"}),u.jsx("span",{className:r?"animated-btn__text--loading":"",children:t})]}),u.jsx(ra.div,{className:"animated-btn__ripple",initial:{scale:0,opacity:.5},whileTap:{scale:4,opacity:0,transition:{duration:.6}}})]})},Fa=({value:t,max:i,height:n=12,showPercentage:s=!1,showValue:r=!1,color:a="#007aff",backgroundColor:o="#e5e5ea",gradient:l=!0,glow:c=!1,pulseOnComplete:d=!0,className:p="",label:h=""})=>{const[m,x]=e.useState(!1),g=Math.min(t/i*100,100),f=fa(0,{duration:1500});e.useEffect((()=>{f.set(g),x(g>=100)}),[f,g]);const y=xa(f,[0,100],["0%","100%"]),v=xa(f,[0,50,80,100],[`linear-gradient(90deg, ${a}20, ${a}60)`,`linear-gradient(90deg, ${a}60, ${a}80)`,`linear-gradient(90deg, #ff9500, ${a})`,"linear-gradient(90deg, #34c759, #007aff)"]),b=xa(f,[0,100],[0,15]),j=xa(b,(t=>c?`0 0 ${t}px ${a}40`:"none"));return u.jsxs("div",{className:`animated-progress ${p}`,children:[h&&u.jsx(ra.div,{className:"animated-progress__label",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:h}),u.jsxs("div",{className:"animated-progress__container",children:[u.jsxs(ra.div,{className:"animated-progress__track",style:{height:n,backgroundColor:o,borderRadius:n/2,overflow:"hidden",position:"relative"},initial:{scaleX:0},animate:{scaleX:1},transition:{type:"spring",stiffness:100,damping:15,delay:.1},children:[u.jsx(ra.div,{className:"animated-progress__fill",style:{height:"100%",width:y,background:l?v:a,boxShadow:j,borderRadius:n/2,position:"relative",overflow:"hidden"},animate:m&&d?{scale:[1,1.02,1],opacity:[1,.8,1]}:{},transition:{duration:1.5,repeat:m?1/0:0,ease:"easeInOut"},children:u.jsx(ra.div,{className:"animated-progress__shine",style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)",borderRadius:n/2},animate:{left:["100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1}})}),m&&u.jsx(ra.div,{className:"animated-progress__bubbles",style:{position:"absolute",top:"50%",left:"50%",width:"100%",height:"100%",pointerEvents:"none"},initial:{scale:0},animate:{scale:1},children:[...Array(5)].map(((t,e)=>u.jsx(ra.div,{style:{position:"absolute",width:4,height:4,backgroundColor:"#fff",borderRadius:"50%",opacity:.8},animate:{y:[-20,-40],x:[20*Math.random()-10,40*Math.random()-20],opacity:[.8,0],scale:[1,0]},transition:{duration:1.5,repeat:1/0,delay:.2*e,ease:"easeOut"}},e)))})]}),(s||r)&&u.jsxs(ra.div,{className:"animated-progress__text",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},style:{marginTop:8,textAlign:"center",fontSize:"14px",fontWeight:"600",color:"var(--text-color)"},children:[r&&`${t}/${i}`,r&&s&&" • ",s&&`${Math.round(g)}%`]})]}),m&&u.jsx(ra.div,{className:"animated-progress__celebration",style:{position:"absolute",top:-20,left:"50%",pointerEvents:"none"},initial:{scale:0,y:0},animate:{scale:[0,1.5,1],y:[-30,-60,-40],opacity:[0,1,0]},transition:{duration:2,times:[0,.3,1],ease:"easeOut",delay:.5},children:"🎉"})]})};function Va({calorieData:t,userProfile:e,onReset:i,onStartTracking:n}){const s=za(t.targetCalories);return u.jsxs("div",{className:"fade-in",style:{paddingTop:"20px",paddingBottom:"20px"},children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🎉"}),u.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px"},children:"Ваша норма калорий"}),u.jsx("p",{style:{color:"var(--secondary-text-color)"},children:"Персональный расчет на основе ваших данных"})]}),u.jsxs(ra.div,{className:"result-card",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:20,delay:.3},children:[u.jsx("div",{className:"result-calories",children:u.jsx(Ba,{value:t.targetCalories,duration:2500,colorThresholds:{low:30,medium:70,colors:["#34c759","#ff9500","#ff3b30"]}})}),u.jsx("div",{className:"result-label",children:"калорий в день"}),u.jsx(ra.div,{className:"result-goal",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.5},children:t.goal.label})]}),u.jsx(ra.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.8},style:{marginBottom:"20px"},children:u.jsx(Ma,{onClick:n,variant:"primary",size:"large",pulse:!0,children:"📷 Начать добавлять еду"})}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"📊 Детали расчета"}),u.jsxs("div",{style:{display:"grid",gap:"12px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:"Базовый метаболизм (BMR)"}),u.jsxs("span",{style:{fontWeight:"600"},children:[t.bmr," ккал"]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{children:"Общий расход (TDEE)"}),u.jsxs("span",{style:{fontWeight:"600"},children:[t.tdee," ккал"]})]}),u.jsx("div",{style:{height:"1px",background:"var(--border-color)",margin:"8px 0"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontWeight:"600"},children:"Целевые калории"}),u.jsxs("span",{style:{fontWeight:"700",color:"var(--primary-color)"},children:[t.targetCalories," ккал"]})]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"🍽️ Рекомендуемые макронутриенты"}),u.jsxs("div",{style:{display:"grid",gap:"16px"},children:[u.jsx(ra.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:2},children:u.jsx(Fa,{value:30,max:100,height:8,color:"#FF6B6B",backgroundColor:"#FFE5E5",showPercentage:!1,showValue:!1,label:`🥩 Белки (30%) • ${s.protein.grams}г`,glow:!0})}),u.jsx(ra.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:2.2},children:u.jsx(Fa,{value:40,max:100,height:8,color:"#4ECDC4",backgroundColor:"#E5F7FF",showPercentage:!1,showValue:!1,label:`🍞 Углеводы (40%) • ${s.carbs.grams}г`,glow:!0})}),u.jsx(ra.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:2.4},children:u.jsx(Fa,{value:30,max:100,height:8,color:"#FFB84D",backgroundColor:"#FFF5E5",showPercentage:!1,showValue:!1,label:`🥑 Жиры (30%) • ${s.fat.grams}г`,glow:!0})})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"👤 Ваш профиль"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"14px"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--secondary-text-color)",marginBottom:"4px"},children:"Пол"}),u.jsx("div",{style:{fontWeight:"600"},children:"male"===e.gender?"👨 Мужской":"👩 Женский"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--secondary-text-color)",marginBottom:"4px"},children:"Возраст"}),u.jsxs("div",{style:{fontWeight:"600"},children:[e.age," лет"]})]}),u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--secondary-text-color)",marginBottom:"4px"},children:"Рост"}),u.jsxs("div",{style:{fontWeight:"600"},children:[e.height," см"]})]}),u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--secondary-text-color)",marginBottom:"4px"},children:"Вес"}),u.jsxs("div",{style:{fontWeight:"600"},children:[e.weight," кг"]})]})]}),u.jsxs("div",{style:{marginTop:"12px"},children:[u.jsx("div",{style:{color:"var(--secondary-text-color)",marginBottom:"4px"},children:"Активность"}),u.jsx("div",{style:{fontWeight:"600"},children:t.activity.label})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"rgba(0, 122, 255, 0.05)"},children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"💡 Рекомендации"}),u.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:["Снижение веса"===t.goal.label&&u.jsxs("div",{children:["• Создайте дефицит калорий, но не менее 1200 ккал в день",u.jsx("br",{}),"• Увеличьте потребление белка для сохранения мышечной массы",u.jsx("br",{}),"• Добавьте кардио и силовые тренировки",u.jsx("br",{}),"• Пейте больше воды и высыпайтесь"]}),"Сохранение веса"===t.goal.label&&u.jsxs("div",{children:["• Следите за балансом калорий",u.jsx("br",{}),"• Поддерживайте регулярную физическую активность",u.jsx("br",{}),"• Включайте разнообразные продукты в рацион",u.jsx("br",{}),"• Контролируйте вес еженедельно"]}),"Набор веса"===t.goal.label&&u.jsxs("div",{children:["• Создайте профицит калорий качественными продуктами",u.jsx("br",{}),"• Увеличьте потребление белка до 2г на кг веса",u.jsx("br",{}),"• Добавьте силовые тренировки для роста мышц",u.jsx("br",{}),"• Ешьте часто, но небольшими порциями"]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[u.jsx("button",{className:"btn btn-primary",onClick:()=>onNavigate("food"),style:{flex:1},children:"📷 Начать отслеживание"}),u.jsx("button",{className:"btn btn-secondary",onClick:i,children:"🔄 Пересчитать"})]})]})}const Ia={"молоко":{name:"Молоко 3.2%",category:"Молочные продукты",calories:60,protein:2.9,carbs:4.7,fat:3.2,fiber:0,emoji:"🥛"},"творог":{name:"Творог обезжиренный",category:"Молочные продукты",calories:72,protein:18,carbs:1.3,fat:.6,fiber:0,emoji:"🧀"},"йогурт":{name:"Йогурт натуральный",category:"Молочные продукты",calories:60,protein:4.3,carbs:6.2,fat:1.5,fiber:0,emoji:"🥛"},"сыр":{name:"Сыр твердый",category:"Молочные продукты",calories:350,protein:25,carbs:0,fat:27,fiber:0,emoji:"🧀"},"куриная грудка":{name:"Куриная грудка без кожи",category:"Мясо и птица",calories:165,protein:31,carbs:0,fat:3.6,fiber:0,emoji:"🍗"},"говядина":{name:"Говядина постная",category:"Мясо и птица",calories:187,protein:26,carbs:0,fat:9,fiber:0,emoji:"🥩"},"лосось":{name:"Лосось",category:"Рыба и морепродукты",calories:208,protein:25,carbs:0,fat:12,fiber:0,emoji:"🐟"},"тунец":{name:"Тунец в собственном соку",category:"Рыба и морепродукты",calories:132,protein:29,carbs:0,fat:1,fiber:0,emoji:"🐟"},"овсянка":{name:"Овсяные хлопья",category:"Злаки и крупы",calories:389,protein:16.9,carbs:66.3,fat:6.9,fiber:10.6,emoji:"🥣"},"гречка":{name:"Гречневая крупа",category:"Злаки и крупы",calories:343,protein:13.3,carbs:62.1,fat:3.4,fiber:11.3,emoji:"🌾"},"рис":{name:"Рис белый",category:"Злаки и крупы",calories:365,protein:7,carbs:78,fat:1,fiber:3,emoji:"🍚"},"киноа":{name:"Киноа",category:"Злаки и крупы",calories:368,protein:14.1,carbs:57.2,fat:6.1,fiber:7,emoji:"🌾"},"брокколи":{name:"Брокколи",category:"Овощи",calories:34,protein:2.8,carbs:6.6,fat:.4,fiber:2.6,emoji:"🥦"},"помидор":{name:"Помидоры",category:"Овощи",calories:18,protein:.9,carbs:3.9,fat:.2,fiber:1.2,emoji:"🍅"},"огурец":{name:"Огурцы",category:"Овощи",calories:16,protein:.7,carbs:4.1,fat:.1,fiber:1,emoji:"🥒"},"морковь":{name:"Морковь",category:"Овощи",calories:41,protein:.9,carbs:9.6,fat:.2,fiber:2.8,emoji:"🥕"},"картофель":{name:"Картофель",category:"Овощи",calories:77,protein:2,carbs:17,fat:.1,fiber:2.2,emoji:"🥔"},"яблоко":{name:"Яблоко",category:"Фрукты",calories:52,protein:.3,carbs:13.8,fat:.2,fiber:2.4,emoji:"🍎"},"банан":{name:"Банан",category:"Фрукты",calories:89,protein:1.1,carbs:22.8,fat:.3,fiber:2.6,emoji:"🍌"},"апельсин":{name:"Апельсин",category:"Фрукты",calories:47,protein:.9,carbs:11.8,fat:.1,fiber:2.4,emoji:"🍊"},"авокадо":{name:"Авокадо",category:"Фрукты",calories:160,protein:2,carbs:8.5,fat:14.7,fiber:6.7,emoji:"🥑"},"миндаль":{name:"Миндаль",category:"Орехи и семена",calories:579,protein:21.2,carbs:21.6,fat:49.9,fiber:12.5,emoji:"🥜"},"грецкий орех":{name:"Грецкий орех",category:"Орехи и семена",calories:654,protein:15.2,carbs:13.7,fat:65.2,fiber:6.7,emoji:"🥜"},"семена чиа":{name:"Семена чиа",category:"Орехи и семена",calories:486,protein:16.5,carbs:42.1,fat:30.7,fiber:34.4,emoji:"🌱"},"яйцо":{name:"Куриное яйцо",category:"Яйца",calories:155,protein:13,carbs:1.1,fat:11,fiber:0,emoji:"🥚"},"хлеб":{name:"Хлеб цельнозерновой",category:"Хлеб и выпечка",calories:247,protein:13,carbs:41,fat:4.2,fiber:7,emoji:"🍞"},"борщ":{name:"Борщ с мясом",category:"Готовые блюда",calories:49,protein:2.6,carbs:5.5,fat:1.8,fiber:1.8,emoji:"🍲"},"плов":{name:"Плов с мясом",category:"Готовые блюда",calories:218,protein:8.7,carbs:24.9,fat:9.8,fiber:.4,emoji:"🍚"},"салат цезарь":{name:"Салат Цезарь",category:"Готовые блюда",calories:190,protein:7,carbs:8,fat:15,fiber:2,emoji:"🥗"},"пицца маргарита":{name:"Пицца Маргарита",category:"Готовые блюда",calories:266,protein:12,carbs:33,fat:10,fiber:2.3,emoji:"🍕"}};function La(t){const e=t.toLowerCase().trim();if(!e)return[];const i=[];for(const[n,s]of Object.entries(Ia)){const t=Wa(e,n,s.name.toLowerCase());t>0&&i.push({key:n,...s,score:t})}return i.sort(((t,e)=>e.score-t.score)).slice(0,10)}function Wa(t,e,i){let n=0;e===t&&(n+=100),e.startsWith(t)&&(n+=80),i.startsWith(t)&&(n+=70),e.includes(t)&&(n+=60),i.includes(t)&&(n+=50);const s=t.split(" "),r=e.split(" "),a=i.split(" ");return s.forEach((t=>{r.forEach((e=>{(e.includes(t)||t.includes(e))&&(n+=30)})),a.forEach((e=>{(e.includes(t)||t.includes(e))&&(n+=20)}))})),n}async function Oa(t){await new Promise((t=>setTimeout(t,1e3)));const e=function(t){const e=t.toLowerCase(),i=[];let n;if([/(\d+)\s*г\s+([\w\s]+)/g,/(\d+)\s*гр\s+([\w\s]+)/g,/(\d+)\s*грамм\s+([\w\s]+)/g,/([\w\s]+)\s+(\d+)\s*г/g,/([\w\s]+)\s+(\d+)\s*гр/g].forEach((t=>{for(;null!==(n=t.exec(e));){const t=parseInt(n[1])||parseInt(n[2]),e=(n[2]||n[1]).trim();if(t&&t>0&&t<2e3){const n=La(e);n.length>0&&i.push({food:e,weight:t,confidence:.8,foodData:n[0]})}}})),0===i.length){e.split(/\s+/).forEach((t=>{if(t.length>2){const e=La(t);e.length>0&&i.push({food:t,weight:100,confidence:.6,foodData:e[0]})}}))}return i.slice(0,5)}(t);return e}function _a(t){return{"яблоко":[{label:"Маленькое яблоко",weight:150},{label:"Среднее яблоко",weight:180},{label:"Большое яблоко",weight:220}],"банан":[{label:"Маленький банан",weight:100},{label:"Средний банан",weight:120},{label:"Большой банан",weight:150}],"куриная грудка":[{label:"Порция 100г",weight:100},{label:"Порция 150г",weight:150},{label:"Порция 200г",weight:200}],"рис":[{label:"Гарнир (сухой)",weight:50},{label:"Порция (сухой)",weight:80},{label:"Большая порция (сухой)",weight:120}]}[t]||[{label:"50г",weight:50},{label:"100г",weight:100},{label:"150г",weight:150},{label:"200г",weight:200}]}function $a({image:t,recognizedFood:i,onConfirm:n,onCancel:s,source:r,originalText:a}){const[o,l]=e.useState(i.map((t=>({...t,isEditing:!1})))),c=(t,e)=>{l((i=>i.map(((i,n)=>n===t?{...i,weight:parseFloat(e)||0}:i))))},d=o.reduce(((t,e)=>{const i=e.weight/100;return{calories:t.calories+e.foodData.calories*i,protein:t.protein+e.foodData.protein*i,carbs:t.carbs+e.foodData.carbs*i,fat:t.fat+e.foodData.fat*i}}),{calories:0,protein:0,carbs:0,fat:0});return u.jsxs("div",{className:"fade-in",children:[u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsxs("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:[(()=>{switch(r){case"photo":return"📷";case"text":return"✏️";case"voice":return"🎤";default:return"🔍"}})()," Результат распознавания"]}),t&&u.jsx("img",{src:t,alt:"Распознанное изображение",style:{width:"100%",maxWidth:"200px",height:"auto",borderRadius:"8px",marginBottom:"16px"}}),a&&u.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"rgba(0, 122, 255, 0.1)",borderRadius:"6px",fontSize:"14px",marginBottom:"16px",fontStyle:"italic"},children:['"',a,'"']}),u.jsxs("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginBottom:"16px"},children:["Найдено продуктов: ",o.length]}),0===o.length?u.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--secondary-text-color)"},children:"Продукты не найдены. Попробуйте другой способ ввода."}):u.jsx("div",{style:{display:"grid",gap:"16px"},children:o.map(((t,e)=>u.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"12px",padding:"16px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"24px"},children:t.foodData.emoji}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600"},children:t.foodData.name}),u.jsxs("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:["Уверенность: ",Math.round(100*t.confidence),"%"]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>(t=>{l((e=>e.map(((e,i)=>i===t?{...e,isEditing:!e.isEditing}:e))))})(e),style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"var(--primary-color)"},children:"✏️"}),u.jsx("button",{onClick:()=>(t=>{l((e=>e.filter(((e,i)=>i!==t))))})(e),style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"var(--danger-color)"},children:"🗑️"})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px",display:"block"},children:"Вес (г)"}),u.jsx("input",{type:"number",value:t.weight,onChange:t=>c(e,t.target.value),min:"1",max:"2000",style:{width:"100%",padding:"8px 12px",border:"1px solid var(--border-color)",borderRadius:"6px",fontSize:"14px"}})]}),u.jsxs("div",{style:{textAlign:"center",fontSize:"12px"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[Math.round(t.foodData.calories*(t.weight/100))," ","ккал"]}),u.jsxs("div",{style:{color:"var(--secondary-text-color)"},children:[(t.foodData.protein*(t.weight/100)).toFixed(1),"б /",(t.foodData.carbs*(t.weight/100)).toFixed(1),"у /",(t.foodData.fat*(t.weight/100)).toFixed(1),"ж"]})]})]}),t.isEditing&&u.jsxs("div",{style:{marginTop:"12px"},children:[u.jsx("div",{style:{fontSize:"12px",marginBottom:"6px",color:"var(--secondary-text-color)"},children:"Быстрый выбор:"}),u.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:_a(t.foodData.key).map(((t,i)=>u.jsx("button",{onClick:()=>c(e,t.weight),style:{padding:"4px 8px",fontSize:"11px",background:"var(--border-color)",border:"none",borderRadius:"4px",cursor:"pointer"},children:t.label},i)))})]})]},e)))})]}),o.length>0&&u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{marginBottom:"12px",fontSize:"16px"},children:"📊 Итого"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",textAlign:"center"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"var(--primary-color)"},children:Math.round(d.calories)}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"ккал"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[d.protein.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"белки"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[d.carbs.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"углеводы"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[d.fat.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"жиры"})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{className:"btn btn-secondary",onClick:s,style:{flex:"0 0 auto",width:"100px"},children:"Отмена"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>n(o),disabled:0===o.length,style:{flex:1},children:"✅ Добавить в дневник"})]})]})}function Ua({onProcessingStart:t,onFoodRecognized:i}){const[n,s]=e.useState(null),[r,a]=e.useState(null),o=e.useRef(null),l=async e=>{const i=URL.createObjectURL(e);s(i),t();try{const t=await async function(){return await new Promise((t=>setTimeout(t,2e3))),[{food:"яблоко",confidence:.92,weight:180,boundingBox:{x:10,y:10,width:200,height:200}},{food:"банан",confidence:.87,weight:120,boundingBox:{x:250,y:50,width:150,height:180}}].map((t=>({...t,foodData:La(t.food)[0]})))}();a(t)}catch(n){console.error("Ошибка распознавания:",n),alert("Ошибка при обработке изображения. Попробуйте еще раз.")}},c=t=>{i(t),p()},d=()=>{p()},p=()=>{s(null),a(null),o.current&&(o.current.value="")};return r?u.jsx($a,{image:n,recognizedFood:r,onConfirm:c,onCancel:d,source:"photo"}):u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"📷 Сфотографируйте еду"}),n?u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("img",{src:n,alt:"Захваченное изображение",style:{width:"100%",maxWidth:"300px",height:"auto",borderRadius:"12px",marginBottom:"16px"}}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Анализируем изображение..."}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)"},children:"Используем ИИ для распознавания продуктов"})]}):u.jsxs("div",{children:[u.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",border:"2px dashed var(--border-color)",borderRadius:"12px",marginBottom:"16px"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📸"}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Выберите фото еды"}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginBottom:"16px"},children:"Мы распознаем продукты и оценим их вес"}),u.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",onChange:t=>{const e=t.target.files[0];e&&l(e)},style:{display:"none"}}),u.jsx("button",{className:"btn btn-primary",onClick:()=>{var t;return null==(t=o.current)?void 0:t.click()},style:{fontSize:"16px",padding:"12px 24px"},children:"📷 Выбрать фото"})]}),u.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(0, 122, 255, 0.1)",borderRadius:"8px",fontSize:"14px"},children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"💡 Советы для лучшего распознавания:"}),u.jsx("div",{children:"• Сфотографируйте еду сверху или под углом"}),u.jsx("div",{children:"• Убедитесь, что еда хорошо освещена"}),u.jsx("div",{children:"• Поместите еду на контрастный фон"}),u.jsx("div",{children:"• Избегайте слишком сложных композиций"})]})]})]})}function Ha({onProcessingStart:t,onFoodRecognized:i}){const[n,s]=e.useState(""),[r,a]=e.useState(null),o=t=>{i(t),s(""),a(null)},l=()=>{a(null)};return r?u.jsx($a,{recognizedFood:r,onConfirm:o,onCancel:l,source:"text",originalText:n}):u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"✏️ Опишите что съели"}),u.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n.trim()){t();try{const t=await Oa(n);a(t)}catch(i){console.error("Ошибка обработки текста:",i),alert("Ошибка при обработке текста. Попробуйте еще раз.")}}},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Расскажите о еде"}),u.jsx("textarea",{className:"form-input",value:n,onChange:t=>s(t.target.value),placeholder:"Например: 200 грамм куриной грудки, 150 грамм риса, салат из помидоров",rows:"4",style:{resize:"vertical",minHeight:"100px"}})]}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!n.trim(),style:{fontSize:"16px"},children:"🔍 Найти продукты"})]}),u.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"rgba(0, 122, 255, 0.1)",borderRadius:"8px",fontSize:"14px"},children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"💡 Как лучше описать:"}),u.jsx("div",{children:'• Указывайте вес: "200г куриной грудки"'}),u.jsx("div",{children:"• Используйте точные названия продуктов"}),u.jsx("div",{children:"• Можно писать несколько продуктов"}),u.jsx("div",{children:'• Например: "100г творога, банан, 50г орехов"'})]})]})}function Ya({onProcessingStart:t,onFoodRecognized:i}){const[n,s]=e.useState(!1),[r,a]=e.useState(null),o=e.useRef(null),l=e.useRef([]),c=t=>{i(t),a(null)},d=()=>{a(null)};return r?u.jsx($a,{recognizedFood:r,onConfirm:c,onCancel:d,source:"voice"}):u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"🎤 Расскажите что съели"}),u.jsx("div",{style:{textAlign:"center",padding:"20px"},children:n?u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"64px",marginBottom:"16px",animation:"pulse 1.5s ease-in-out infinite"},children:"🔴"}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Идет запись..."}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginBottom:"20px"},children:"Говорите четко и не торопясь"}),u.jsx("button",{className:"btn btn-secondary",onClick:()=>{o.current&&n&&(o.current.stop(),s(!1))},style:{fontSize:"16px",padding:"12px 24px"},children:"⏹️ Остановить запись"})]}):u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"🎤"}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Нажмите и расскажите"}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginBottom:"20px"},children:'Например: "Съел 200 грамм куриной грудки и рис"'}),u.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});o.current=new MediaRecorder(e),o.current.ondataavailable=t=>{l.current.push(t.data)},o.current.onstop=async()=>{new Blob(l.current,{type:"audio/wav"});l.current=[],t();try{const t=await async function(){return await new Promise((t=>setTimeout(t,2e3))),Oa("200 грамм куриной грудки и 150 грамм риса")}();a(t)}catch(i){console.error("Ошибка обработки голоса:",i),alert("Ошибка при обработке голосового ввода. Попробуйте еще раз.")}e.getTracks().forEach((t=>t.stop()))},o.current.start(),s(!0)}catch(e){console.error("Ошибка доступа к микрофону:",e),alert("Не удалось получить доступ к микрофону. Проверьте разрешения.")}},style:{fontSize:"16px",padding:"12px 24px"},children:"🎤 Начать запись"})]})}),u.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(0, 122, 255, 0.1)",borderRadius:"8px",fontSize:"14px"},children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"💡 Советы для записи:"}),u.jsx("div",{children:"• Говорите в тихом месте"}),u.jsx("div",{children:"• Четко произносите названия продуктов"}),u.jsx("div",{children:'• Указывайте вес: "двести грамм курицы"'}),u.jsx("div",{children:"• Можно перечислить несколько продуктов"})]}),u.jsx("style",{jsx:!0,children:"\n        @keyframes pulse {\n          0% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          50% {\n            transform: scale(1.1);\n            opacity: 0.8;\n          }\n          100% {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      "})]})}function Xa({onFoodAdd:t}){const[i,n]=e.useState(""),[s,r]=e.useState([]),[a,o]=e.useState(null),[l,c]=e.useState(100),[d,p]=e.useState(!1);e.useEffect((()=>{if(i.trim()){const t=La(i);r(t)}else r([])}),[i]);const h=(()=>{if(!a||!l)return null;const t=l/100;return{calories:Math.round(a.calories*t),protein:(a.protein*t).toFixed(1),carbs:(a.carbs*t).toFixed(1),fat:(a.fat*t).toFixed(1)}})(),m=a?_a(a.key):[];return u.jsxs("div",{children:[u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Найти продукт"}),u.jsx("input",{type:"text",className:"form-input",value:i,onChange:t=>n(t.target.value),placeholder:"Например: яблоко, куриная грудка, рис..."})]}),s.length>0&&u.jsxs("div",{style:{marginTop:"16px"},children:[u.jsxs("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginBottom:"8px"},children:["Найдено ",s.length," продуктов:"]}),u.jsx("div",{style:{display:"grid",gap:"8px",maxHeight:"300px",overflowY:"auto"},children:s.map((t=>u.jsx("div",{onClick:()=>(t=>{o(t),c(100)})(t),style:{padding:"12px",border:"2px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:(null==a?void 0:a.key)===t.key?"rgba(0, 122, 255, 0.1)":"transparent",borderColor:(null==a?void 0:a.key)===t.key?"var(--primary-color)":"var(--border-color)"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:t.emoji}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600"},children:t.name}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:t.category})]})]}),u.jsxs("div",{style:{textAlign:"right",fontSize:"12px"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[t.calories," ккал"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"на 100г"})]})]})},t.key)))})]}),i&&0===s.length&&u.jsx("div",{style:{marginTop:"16px",padding:"12px",textAlign:"center",color:"var(--secondary-text-color)",backgroundColor:"rgba(255, 183, 77, 0.1)",borderRadius:"8px"},children:"Продукт не найден. Попробуйте другое название или добавьте через фото/текст."})]}),a&&u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsxs("h4",{style:{marginBottom:"16px",fontSize:"16px"},children:[a.emoji," ",a.name]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Вес (граммы)"}),u.jsx("input",{type:"number",className:"form-input",value:l,onChange:t=>c(t.target.value),min:"1",max:"2000",step:"1"})]}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("div",{style:{fontSize:"14px",marginBottom:"8px",color:"var(--secondary-text-color)"},children:"Быстрый выбор:"}),u.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:m.map(((t,e)=>u.jsx("button",{className:"btn btn-secondary",onClick:()=>c(t.weight),style:{fontSize:"12px",padding:"6px 12px",minHeight:"auto"},children:t.label},e)))})]}),h&&u.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(52, 199, 89, 0.1)",borderRadius:"8px",marginBottom:"16px"},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:["На ",l,"г:"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"8px",fontSize:"12px"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontWeight:"600"},children:h.calories}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"ккал"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[h.protein,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"белки"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[h.carbs,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"углеводы"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[h.fat,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"жиры"})]})]})]}),u.jsx("button",{className:"btn btn-primary",onClick:()=>{if(!a||!l)return;p(!0);const e={food:a.key,weight:parseFloat(l),confidence:1,foodData:a};setTimeout((()=>{t([e]),n(""),o(null),c(100),p(!1)}),300)},disabled:!l||l<=0||d,style:{fontSize:"16px"},children:d?"⏳ Добавляем...":"✅ Добавить в дневник"})]})]})}function Ga({onFoodAdd:t}){const[i,n]=e.useState("search"),[s,r]=e.useState(!1),a=()=>{r(!0)},o=e=>{t(e),r(!1)};return u.jsxs("div",{className:"fade-in",children:[u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"Как добавить еду?"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[u.jsx("button",{className:"btn "+("photo"===i?"btn-primary":"btn-secondary"),onClick:()=>n("photo"),style:{padding:"12px",fontSize:"14px"},disabled:s,children:"📷 Сфотографировать"}),u.jsx("button",{className:"btn "+("voice"===i?"btn-primary":"btn-secondary"),onClick:()=>n("voice"),style:{padding:"12px",fontSize:"14px"},disabled:s,children:"🎤 Голосом"}),u.jsx("button",{className:"btn "+("text"===i?"btn-primary":"btn-secondary"),onClick:()=>n("text"),style:{padding:"12px",fontSize:"14px"},disabled:s,children:"✏️ Написать"}),u.jsx("button",{className:"btn "+("search"===i?"btn-primary":"btn-secondary"),onClick:()=>n("search"),style:{padding:"12px",fontSize:"14px"},disabled:s,children:"🔍 Найти"})]})]}),s&&u.jsxs("div",{className:"card",style:{textAlign:"center",marginBottom:"20px",backgroundColor:"rgba(0, 122, 255, 0.1)"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"⏳"}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:"Обрабатываем..."}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)"},children:"Это может занять несколько секунд"})]}),!s&&u.jsxs("div",{children:["photo"===i&&u.jsx(Ua,{onProcessingStart:a,onFoodRecognized:o}),"text"===i&&u.jsx(Ha,{onProcessingStart:a,onFoodRecognized:o}),"voice"===i&&u.jsx(Ya,{onProcessingStart:a,onFoodRecognized:o}),"search"===i&&u.jsx(Xa,{onFoodAdd:t})]})]})}function qa({foodEntries:t,onEdit:i,onDelete:n,totals:s}){const[r,a]=e.useState(null),[o,l]=e.useState(""),c=()=>{a(null),l("")};return 0===t.length?u.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px 20px"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🍽️"}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Дневник пуст"}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)"},children:"Добавьте первый продукт, чтобы начать отслеживание питания"})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"📊 Съедено сегодня"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",textAlign:"center",padding:"16px",backgroundColor:"rgba(52, 199, 89, 0.1)",borderRadius:"8px"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--primary-color)"},children:Math.round(s.calories)}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"ккал"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[s.protein.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"белки"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[s.carbs.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"углеводы"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[s.fat.toFixed(1),"г"]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:"жиры"})]})]})]}),u.jsx("div",{style:{display:"grid",gap:"12px"},children:t.map((t=>{const e=(t=>{const e=t.weight/100;return{calories:Math.round(t.foodData.calories*e),protein:(t.foodData.protein*e).toFixed(1),carbs:(t.foodData.carbs*e).toFixed(1),fat:(t.foodData.fat*e).toFixed(1)}})(t),s=r===t.id;return u.jsxs("div",{className:"card",style:{padding:"16px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("span",{style:{fontSize:"24px"},children:t.foodData.emoji}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"16px"},children:t.foodData.name}),u.jsxs("div",{style:{fontSize:"12px",color:"var(--secondary-text-color)"},children:[(d=t.timestamp,new Date(d).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))," • ",t.foodData.category]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>s?(t=>{const e=parseFloat(o);e&&e>0&&i(t,{weight:e}),a(null),l("")})(t.id):(t=>{a(t.id),l(t.weight.toString())})(t),style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"var(--primary-color)"},children:s?"✅":"✏️"}),s&&u.jsx("button",{onClick:c,style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"var(--secondary-text-color)"},children:"❌"}),u.jsx("button",{onClick:()=>n(t.id),style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"var(--danger-color)"},children:"🗑️"})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"12px",alignItems:"center"},children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:"Вес:"}),s?u.jsx("input",{type:"number",value:o,onChange:t=>l(t.target.value),min:"1",max:"2000",style:{padding:"6px 10px",border:"1px solid var(--primary-color)",borderRadius:"6px",fontSize:"14px",width:"80px"},autoFocus:!0}):u.jsxs("div",{style:{fontSize:"14px"},children:[t.weight,"г"]}),u.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--primary-color)"},children:[e.calories," ккал"]})]}),u.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"rgba(0, 122, 255, 0.05)",borderRadius:"6px",fontSize:"12px"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",textAlign:"center"},children:[u.jsxs("div",{children:[u.jsxs("span",{style:{fontWeight:"600"},children:[e.protein,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"белки"})]}),u.jsxs("div",{children:[u.jsxs("span",{style:{fontWeight:"600"},children:[e.carbs,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"углеводы"})]}),u.jsxs("div",{children:[u.jsxs("span",{style:{fontWeight:"600"},children:[e.fat,"г"]}),u.jsx("div",{style:{color:"var(--secondary-text-color)"},children:"жиры"})]})]})})]},t.id);var d}))}),t.length>0&&u.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:u.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Очистить весь дневник питания?")&&t.forEach((t=>n(t.id)))},style:{fontSize:"14px",padding:"8px 16px"},children:"🗑️ Очистить дневник"})})]})}function Za({totals:t,targetCalories:e,userProfile:i}){const n=za(e),s=t.calories/e*100,r=t.protein/n.protein.grams*100,a=t.carbs/n.carbs.grams*100,o=t.fat/n.fat.grams*100;return u.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px"},children:"📊 Прогресс дня"}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("span",{style:{fontSize:"16px",fontWeight:"600"},children:"Калории"}),u.jsxs("span",{style:{fontSize:"16px",fontWeight:"600"},children:[Math.round(t.calories)," / ",e," ккал"]})]}),u.jsx("div",{style:{width:"100%",height:"12px",background:"var(--border-color)",borderRadius:"6px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(s,100)}%`,height:"100%",background:(l=s,l<50?"#FF6B6B":l<90?"#FFB84D":l<=110?"#4ECDC4":"#FF6B6B"),borderRadius:"6px",transition:"width 0.3s ease"}})}),u.jsx("div",{style:{fontSize:"14px",color:"var(--secondary-text-color)",marginTop:"4px"},children:s>100?`Превышение на ${Math.round(t.calories-e)} ккал`:`Осталось ${Math.round(e-t.calories)} ккал`})]}),u.jsxs("div",{style:{display:"grid",gap:"16px"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[u.jsx("span",{style:{fontSize:"14px"},children:"🥩 Белки"}),u.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:[t.protein.toFixed(1),"г / ",n.protein.grams,"г"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#FFE5E5",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(r,100)}%`,height:"100%",background:"#FF6B6B",borderRadius:"3px",transition:"width 0.3s ease"}})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[u.jsx("span",{style:{fontSize:"14px"},children:"🍞 Углеводы"}),u.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:[t.carbs.toFixed(1),"г / ",n.carbs.grams,"г"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#E5F7FF",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(a,100)}%`,height:"100%",background:"#4ECDC4",borderRadius:"3px",transition:"width 0.3s ease"}})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[u.jsx("span",{style:{fontSize:"14px"},children:"🥑 Жиры"}),u.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:[t.fat.toFixed(1),"г / ",n.fat.grams,"г"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#FFF5E5",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(o,100)}%`,height:"100%",background:"#FFB84D",borderRadius:"3px",transition:"width 0.3s ease"}})})]})]}),u.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(0, 122, 255, 0.1)",borderRadius:"8px",fontSize:"14px",textAlign:"center"},children:[s<50&&"🌟 Отличное начало! Продолжайте добавлять еду",s>=50&&s<90&&"👍 Хороший прогресс! Вы на правильном пути",s>=90&&s<=110&&"🎯 Отлично! Вы достигли своей цели",s>110&&"⚠️ Превышение калорий. Возможно, стоит быть более внимательным"]})]});var l}function Ka({userProfile:t,calorieData:i,onBack:n}){const[s,r]=e.useState([]),[a,o]=e.useState("input"),l=s.reduce(((t,e)=>{const i=e.weight/100;return{calories:t.calories+e.foodData.calories*i,protein:t.protein+e.foodData.protein*i,carbs:t.carbs+e.foodData.carbs*i,fat:t.fat+e.foodData.fat*i,fiber:t.fiber+e.foodData.fiber*i}}),{calories:0,protein:0,carbs:0,fat:0,fiber:0});return u.jsxs("div",{className:"fade-in",style:{paddingTop:"20px",paddingBottom:"20px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[u.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",marginRight:"12px",color:"var(--text-color)"},children:"←"}),u.jsx("h1",{style:{fontSize:"24px",fontWeight:"700"},children:"Трекер питания"})]}),u.jsx(Za,{totals:l,targetCalories:i.targetCalories,userProfile:t}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",background:"var(--border-color)",padding:"4px",borderRadius:"12px"},children:[u.jsx("button",{className:"btn "+("input"===a?"btn-primary":"btn-secondary"),onClick:()=>o("input"),style:{flex:1,fontSize:"14px",padding:"8px 16px",borderRadius:"8px"},children:"📷 Добавить еду"}),u.jsxs("button",{className:"btn "+("list"===a?"btn-primary":"btn-secondary"),onClick:()=>o("list"),style:{flex:1,fontSize:"14px",padding:"8px 16px",borderRadius:"8px"},children:["📋 Дневник (",s.length,")"]})]}),"input"===a?u.jsx(Ga,{onFoodAdd:t=>{const e=t.map((t=>({...t,id:Date.now()+Math.random(),timestamp:new Date})));r((t=>[...t,...e])),o("list")}}):u.jsx(qa,{foodEntries:s,onEdit:(t,e)=>{r((i=>i.map((i=>i.id===t?{...i,...e}:i))))},onDelete:t=>{r((e=>e.filter((e=>e.id!==t))))},totals:l})]})}const Ja=({foodEntries:t,calorieData:e,userProfile:i,onEdit:n,onDelete:s,onNavigate:r})=>{const a=(new Date).toDateString(),o=t.filter((t=>t.date===a)),l=o.reduce(((t,e)=>({calories:t.calories+(e.calories||0),protein:t.protein+(e.protein||0),carbs:t.carbs+(e.carbs||0),fat:t.fat+(e.fat||0)})),{calories:0,protein:0,carbs:0,fat:0});return u.jsxs("div",{className:"day-summary",children:[u.jsxs("div",{className:"day-summary__header",children:[u.jsx("h1",{className:"day-summary__title",children:"📊 Дневник питания"}),u.jsx("p",{className:"day-summary__date",children:(c=new Date,new Intl.DateTimeFormat("ru-RU",{weekday:"long",day:"numeric",month:"long"}).format(c))})]}),u.jsx("div",{className:"day-summary__progress",children:u.jsx(Za,{consumed:l,targets:e,showDetails:!0})}),u.jsxs("div",{className:"day-summary__actions",children:[u.jsxs("button",{className:"day-summary__action-btn day-summary__action-btn--primary",onClick:()=>r("food"),children:[u.jsx("span",{className:"action-icon",children:"📷"}),"Добавить еду"]}),u.jsxs("button",{className:"day-summary__action-btn",onClick:()=>r("assistant"),children:[u.jsx("span",{className:"action-icon",children:"🤖"}),"Получить совет"]})]}),u.jsx("div",{className:"day-summary__content",children:o.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"day-summary__section-header",children:[u.jsx("h2",{children:"Приемы пищи сегодня"}),u.jsxs("span",{className:"day-summary__count",children:[o.length," ",1===o.length?"прием":"приемов"]})]}),u.jsx(qa,{entries:o,onEdit:n,onDelete:s,showDate:!1})]}):u.jsx("div",{className:"day-summary__empty",children:u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state__icon",children:"🍽️"}),u.jsx("h3",{className:"empty-state__title",children:"Еще нет записей на сегодня"}),u.jsx("p",{className:"empty-state__description",children:"Добавьте первый прием пищи, чтобы начать отслеживать питание"}),u.jsx("button",{className:"empty-state__button",onClick:()=>r("food"),children:"📷 Добавить еду"})]})})}),o.length>0&&u.jsx("div",{className:"day-summary__stats",children:u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Калории"}),u.jsxs("span",{className:"stat-value",children:[Math.round(l.calories)," /"," ",e.dailyCalories]}),u.jsx("span",{className:"stat-unit",children:"ккал"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Белки"}),u.jsxs("span",{className:"stat-value",children:[Math.round(l.protein)," /"," ",Math.round(e.protein)]}),u.jsx("span",{className:"stat-unit",children:"г"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Углеводы"}),u.jsxs("span",{className:"stat-value",children:[Math.round(l.carbs)," /"," ",Math.round(e.carbs)]}),u.jsx("span",{className:"stat-unit",children:"г"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Жиры"}),u.jsxs("span",{className:"stat-value",children:[Math.round(l.fat)," / ",Math.round(e.fat)]}),u.jsx("span",{className:"stat-unit",children:"г"})]})]})})]});var c},Qa=({foodEntries:t,calorieData:i,userProfile:n,isSubscribed:s,onNavigate:r})=>{const[a,o]=e.useState(null),[l,c]=e.useState(!1),[d,p]=e.useState([]),[h,m]=e.useState(""),x=(new Date).toDateString(),g=t.filter((t=>t.date===x)).reduce(((t,e)=>({calories:t.calories+(e.calories||0),protein:t.protein+(e.protein||0),carbs:t.carbs+(e.carbs||0),fat:t.fat+(e.fat||0)})),{calories:0,protein:0,carbs:0,fat:0});e.useEffect((()=>{f()}),[t,i]);const f=()=>{c(!0),setTimeout((()=>{const t=i.dailyCalories-g.calories,e=g.protein/i.protein*100,n=g.carbs/i.carbs*100,s=g.fat/i.fat*100;let r=[],a="good";t>500?(r.push({type:"warning",text:`У вас значительный дефицит калорий (${Math.round(t)} ккал). Добавьте полезных продуктов.`,action:"Добавить калории"}),a="warning"):t<-300&&(r.push({type:"error",text:`Превышение дневной нормы на ${Math.abs(Math.round(t))} ккал. Будьте осторожнее с порциями.`,action:"Контролировать порции"}),a="error"),e<80&&r.push({type:"info",text:"Недостаточно белка в рационе. Добавьте мясо, рыбу, яйца или бобовые.",action:"Добавить белок"}),n>120&&r.push({type:"warning",text:"Много углеводов. Попробуйте заменить простые углеводы на сложные.",action:"Заменить углеводы"}),0===r.length&&r.push({type:"success",text:"Отличная работа! Ваш рацион сбалансирован и соответствует целям.",action:"Продолжать в том же духе"}),o({status:a,calorieDeficit:t,macroBalance:{proteinPercent:e,carbsPercent:n,fatPercent:s},recommendations:r,tips:y()}),c(!1)}),1500)},y=()=>["💧 Не забывайте пить достаточно воды - 30-35 мл на кг веса тела","🥗 Включайте овощи в каждый прием пищи для получения клетчатки","⏰ Старайтесь есть регулярно, каждые 3-4 часа","🏃‍♂️ Добавьте физическую активность для лучших результатов","😴 Полноценный сон влияет на метаболизм и аппетит","🥜 Перекусывайте орехами или фруктами вместо сладостей"].sort((()=>.5-Math.random())).slice(0,3),v=()=>{if(!h.trim())return;const t={id:Date.now(),type:"user",text:h,timestamp:new Date};p([...d,t]),m(""),setTimeout((()=>{const t=b(h),e={id:Date.now()+1,type:"assistant",text:t,timestamp:new Date};p((t=>[...t,e]))}),1e3)},b=t=>{const e=t.toLowerCase();return e.includes("калор")?`Ваша дневная норма: ${i.dailyCalories} ккал. Сегодня потреблено: ${Math.round(g.calories)} ккал. ${g.calories<i.dailyCalories?`Остается ${Math.round(i.dailyCalories-g.calories)} ккал.`:"Норма превышена, будьте осторожнее с порциями."}`:e.includes("белок")?`Ваша норма белка: ${Math.round(i.protein)}г в день. Сегодня потреблено: ${Math.round(g.protein)}г. Хорошие источники белка: курица, рыба, яйца, творог, бобовые.`:e.includes("похуд")?"Для похудения важен дефицит калорий 300-500 ккал в день, сбалансированное питание и регулярная физическая активность. Не торопитесь - здоровое похудение 0.5-1 кг в неделю.":e.includes("что съесть")||e.includes("перекус")?"Попробуйте: яблоко с орехами, греческий йогурт с ягодами, овощные палочки с хумусом, или кусочек цельнозернового хлеба с авокадо.":"Спасибо за вопрос! Я анализирую ваше питание и могу дать советы по калориям, макронутриентам, похудению и здоровым перекусам. Задайте более конкретный вопрос."};return u.jsxs("div",{className:"assistant",children:[u.jsxs("div",{className:"assistant__header",children:[u.jsx("h1",{className:"assistant__title",children:"🤖 Умный помощник"}),u.jsx("p",{className:"assistant__subtitle",children:"Персональные рекомендации по питанию"})]}),l?u.jsxs("div",{className:"assistant__loading",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Анализирую ваш рацион..."})]}):a?u.jsxs("div",{className:"assistant__analysis",children:[u.jsxs("div",{className:`analysis-status analysis-status--${a.status}`,children:[u.jsxs("div",{className:"status-icon",children:["good"===a.status&&"✅","warning"===a.status&&"⚠️","error"===a.status&&"❌"]}),u.jsxs("div",{className:"status-text",children:[u.jsx("h3",{children:"Анализ рациона на сегодня"}),u.jsx("p",{children:a.calorieDeficit>0?`Дефицит: ${Math.round(a.calorieDeficit)} ккал`:`Превышение: ${Math.abs(Math.round(a.calorieDeficit))} ккал`})]})]}),u.jsxs("div",{className:"recommendations",children:[u.jsx("h3",{children:"Рекомендации"}),a.recommendations.map(((t,e)=>u.jsxs("div",{className:`recommendation recommendation--${t.type}`,children:[u.jsxs("div",{className:"rec-icon",children:["success"===t.type&&"🎉","info"===t.type&&"💡","warning"===t.type&&"⚠️","error"===t.type&&"🚨"]}),u.jsxs("div",{className:"rec-content",children:[u.jsx("p",{children:t.text}),u.jsx("span",{className:"rec-action",children:t.action})]})]},e)))]}),u.jsxs("div",{className:"tips",children:[u.jsx("h3",{children:"💡 Полезные советы"}),a.tips.map(((t,e)=>u.jsx("div",{className:"tip",children:u.jsx("span",{className:"tip-text",children:t})},e)))]})]}):null,u.jsxs("div",{className:"assistant__chat",children:[u.jsx("h3",{children:"Задайте вопрос помощнику"}),!s&&u.jsxs("div",{className:"subscription-notice",children:[u.jsx("p",{children:"🔒 Чат с ИИ доступен в Premium версии"}),u.jsx("button",{className:"upgrade-btn",onClick:()=>r("settings"),children:"Обновить до Premium"})]}),s&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"chat-messages",children:0===d.length?u.jsxs("div",{className:"chat-placeholder",children:[u.jsx("p",{children:"Примеры вопросов:"}),u.jsxs("div",{className:"example-questions",children:[u.jsx("button",{className:"example-btn",onClick:()=>m("Сколько калорий мне осталось сегодня?"),children:"Сколько калорий осталось?"}),u.jsx("button",{className:"example-btn",onClick:()=>m("Что съесть на перекус?"),children:"Что съесть на перекус?"}),u.jsx("button",{className:"example-btn",onClick:()=>m("Как правильно худеть?"),children:"Как правильно худеть?"})]})]}):d.map((t=>u.jsx("div",{className:`chat-message chat-message--${t.type}`,children:u.jsxs("div",{className:"message-content",children:[u.jsx("p",{children:t.text}),u.jsx("span",{className:"message-time",children:t.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})},t.id)))}),u.jsxs("div",{className:"chat-input",children:[u.jsx("input",{type:"text",value:h,onChange:t=>m(t.target.value),placeholder:"Напишите ваш вопрос...",onKeyPress:t=>"Enter"===t.key&&v()}),u.jsx("button",{onClick:v,disabled:!h.trim(),className:"send-btn",children:"📤"})]})]})]})]})},to=({foodEntries:t,userProfile:i,isSubscribed:n,onNavigate:s})=>{var r;const[a,o]=e.useState("week"),l=[{value:"day",label:"День"},{value:"week",label:"Неделя"},{value:"month",label:"Месяц"}],c=e.useMemo((()=>{const{start:e,end:i}=(t=>{const e=new Date,i=new Date;switch(t){case"day":return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate()),end:new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)};case"week":const t=e.getDay();return i.setDate(e.getDate()-t),{start:new Date(i.getFullYear(),i.getMonth(),i.getDate()),end:new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)};case"month":return{start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date(e.getFullYear(),e.getMonth()+1,0)};default:return{start:new Date,end:new Date}}})(a);return t.filter((t=>{const n=new Date(t.date);return n>=e&&n<=i}))}),[t,a]),d=e.useMemo((()=>{if(0===c.length)return{totalCalories:0,avgCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,daysWithData:0,topFoods:[]};const t=c.reduce(((t,e)=>t+(e.calories||0)),0),e=c.reduce(((t,e)=>t+(e.protein||0)),0),i=c.reduce(((t,e)=>t+(e.carbs||0)),0),n=c.reduce(((t,e)=>t+(e.fat||0)),0),s=new Set(c.map((t=>t.date))).size,r=s>0?t/s:0,a={};c.forEach((t=>{const e=t.name||"Неизвестно";a[e]=(a[e]||0)+1}));const o=Object.entries(a).sort((([,t],[,e])=>e-t)).slice(0,5).map((([t,e])=>({name:t,count:e})));return{totalCalories:Math.round(t),avgCalories:Math.round(r),totalProtein:Math.round(e),totalCarbs:Math.round(i),totalFat:Math.round(n),daysWithData:s,topFoods:o}}),[c]),p=e.useMemo((()=>{const t={};return c.forEach((e=>{const i=e.date;t[i]||(t[i]=[]),t[i].push(e)})),Object.entries(t).sort((([t],[e])=>new Date(e)-new Date(t))).map((([t,e])=>({date:t,entries:e,totalCalories:e.reduce(((t,e)=>t+(e.calories||0)),0)})))}),[c]),h=t=>{const e=new Date(t),i=(new Date).toDateString(),n=new Date(Date.now()-864e5).toDateString();return t===i?"Сегодня":t===n?"Вчера":new Intl.DateTimeFormat("ru-RU",{weekday:"short",day:"numeric",month:"short"}).format(e)};return u.jsxs("div",{className:"history",children:[u.jsxs("div",{className:"history__header",children:[u.jsx("h1",{className:"history__title",children:"📈 История питания"}),u.jsx("div",{className:"period-selector",children:l.map((t=>u.jsx("button",{className:"period-btn "+(a===t.value?"period-btn--active":""),onClick:()=>o(t.value),children:t.label},t.value)))})]}),!n&&u.jsx("div",{className:"premium-notice",children:u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"🔒 Расширенная аналитика"}),u.jsx("p",{children:"Получите доступ к подробной статистике, графикам и отчетам"}),u.jsx("button",{className:"upgrade-btn",onClick:()=>s("settings"),children:"Обновить до Premium"})]})}),u.jsxs("div",{className:"history__analytics",children:[u.jsxs("h2",{children:["Статистика за"," ",null==(r=l.find((t=>t.value===a)))?void 0:r.label.toLowerCase()]}),u.jsxs("div",{className:"analytics-grid",children:[u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"🔥"}),u.jsxs("div",{className:"card-content",children:[u.jsx("h3",{children:d.totalCalories}),u.jsx("p",{children:"Всего калорий"})]})]}),u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"📊"}),u.jsxs("div",{className:"card-content",children:[u.jsx("h3",{children:d.avgCalories}),u.jsx("p",{children:"Среднее в день"})]})]}),u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"💪"}),u.jsxs("div",{className:"card-content",children:[u.jsxs("h3",{children:[d.totalProtein,"г"]}),u.jsx("p",{children:"Белки"})]})]}),u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"🍞"}),u.jsxs("div",{className:"card-content",children:[u.jsxs("h3",{children:[d.totalCarbs,"г"]}),u.jsx("p",{children:"Углеводы"})]})]}),u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"🥑"}),u.jsxs("div",{className:"card-content",children:[u.jsxs("h3",{children:[d.totalFat,"г"]}),u.jsx("p",{children:"Жиры"})]})]}),u.jsxs("div",{className:"analytics-card",children:[u.jsx("div",{className:"card-icon",children:"📅"}),u.jsxs("div",{className:"card-content",children:[u.jsx("h3",{children:d.daysWithData}),u.jsx("p",{children:"Дней с данными"})]})]})]}),d.topFoods.length>0&&u.jsxs("div",{className:"top-foods",children:[u.jsx("h3",{children:"🏆 Топ продуктов"}),u.jsx("div",{className:"top-foods-list",children:d.topFoods.map(((t,e)=>u.jsxs("div",{className:"top-food-item",children:[u.jsxs("span",{className:"food-rank",children:["#",e+1]}),u.jsx("span",{className:"food-name",children:t.name}),u.jsxs("span",{className:"food-count",children:[t.count," раз"]})]},t.name)))})]})]}),u.jsxs("div",{className:"history__entries",children:[u.jsx("h2",{children:"История записей"}),0===p.length?u.jsx("div",{className:"history__empty",children:u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state__icon",children:"📝"}),u.jsx("h3",{children:"Нет данных за выбранный период"}),u.jsx("p",{children:"Начните добавлять еду, чтобы увидеть историю"}),u.jsx("button",{className:"empty-state__button",onClick:()=>s("food"),children:"📷 Добавить еду"})]})}):u.jsx("div",{className:"entries-by-date",children:p.map((({date:t,entries:e,totalCalories:i})=>u.jsxs("div",{className:"date-group",children:[u.jsxs("div",{className:"date-header",children:[u.jsx("h3",{children:h(t)}),u.jsxs("span",{className:"date-calories",children:[Math.round(i)," ккал"]})]}),u.jsx(qa,{entries:e,showDate:!1,readonly:!0})]},t)))})]})]})},eo=({userProfile:t,isSubscribed:i,onProfileUpdate:n,onSubscribe:s,onReset:r,onNavigate:a})=>{const[o,l]=e.useState(!1),[c,d]=e.useState({...t}),p=((t,e)=>{const i=e/100;return t/(i*i)})(t.weight,t.height),h=(m=p)<18.5?{text:"Недостаточный вес",color:"#007aff"}:m<25?{text:"Нормальный вес",color:"#34c759"}:m<30?{text:"Избыточный вес",color:"#ff9500"}:{text:"Ожирение",color:"#ff3b30"};var m;return u.jsxs("div",{className:"settings",children:[u.jsx("div",{className:"settings__header",children:u.jsx("h1",{className:"settings__title",children:"⚙️ Настройки"})}),u.jsxs("div",{className:"settings__section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{children:"👤 Профиль"}),!o&&u.jsx("button",{className:"edit-btn",onClick:()=>l(!0),children:"Изменить"})]}),u.jsx("div",{className:"profile-card",children:o?u.jsxs("div",{className:"profile-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Пол"}),u.jsxs("div",{className:"radio-group",children:[u.jsxs("label",{className:"radio-label",children:[u.jsx("input",{type:"radio",value:"male",checked:"male"===c.gender,onChange:t=>d({...c,gender:t.target.value})}),"Мужской"]}),u.jsxs("label",{className:"radio-label",children:[u.jsx("input",{type:"radio",value:"female",checked:"female"===c.gender,onChange:t=>d({...c,gender:t.target.value})}),"Женский"]})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Возраст"}),u.jsx("input",{type:"number",value:c.age,onChange:t=>d({...c,age:parseInt(t.target.value)}),min:"1",max:"120"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Рост (см)"}),u.jsx("input",{type:"number",value:c.height,onChange:t=>d({...c,height:parseInt(t.target.value)}),min:"100",max:"250"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Вес (кг)"}),u.jsx("input",{type:"number",value:c.weight,onChange:t=>d({...c,weight:parseInt(t.target.value)}),min:"30",max:"300"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Уровень активности"}),u.jsxs("select",{value:c.activity,onChange:t=>d({...c,activity:t.target.value}),children:[u.jsx("option",{value:"sedentary",children:"Малоподвижный"}),u.jsx("option",{value:"light",children:"Легкая активность"}),u.jsx("option",{value:"moderate",children:"Умеренная активность"}),u.jsx("option",{value:"active",children:"Высокая активность"}),u.jsx("option",{value:"very_active",children:"Очень высокая активность"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Цель"}),u.jsxs("select",{value:c.goal,onChange:t=>d({...c,goal:t.target.value}),children:[u.jsx("option",{value:"lose",children:"Похудение"}),u.jsx("option",{value:"maintain",children:"Поддержание веса"}),u.jsx("option",{value:"gain",children:"Набор массы"})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{className:"save-btn",onClick:()=>{n(c),l(!1)},children:"Сохранить"}),u.jsx("button",{className:"cancel-btn",onClick:()=>{d({...t}),l(!1)},children:"Отмена"})]})]}):u.jsxs("div",{className:"profile-info",children:[u.jsxs("div",{className:"profile-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Пол"}),u.jsx("span",{className:"stat-value",children:"male"===t.gender?"Мужской":"Женский"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Возраст"}),u.jsxs("span",{className:"stat-value",children:[t.age," лет"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Рост"}),u.jsxs("span",{className:"stat-value",children:[t.height," см"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Вес"}),u.jsxs("span",{className:"stat-value",children:[t.weight," кг"]})]})]}),u.jsxs("div",{className:"bmi-info",children:[u.jsxs("div",{className:"bmi-value",children:[u.jsx("span",{className:"bmi-number",children:p.toFixed(1)}),u.jsx("span",{className:"bmi-label",children:"ИМТ"})]}),u.jsx("div",{className:"bmi-category",style:{color:h.color},children:h.text})]})]})})]}),u.jsxs("div",{className:"settings__section",children:[u.jsx("h2",{children:"💎 Подписка"}),i?u.jsxs("div",{className:"subscription-active",children:[u.jsxs("div",{className:"subscription-status",children:[u.jsx("span",{className:"status-icon",children:"✅"}),u.jsxs("div",{className:"status-text",children:[u.jsx("h3",{children:"Cal AI Premium активна"}),u.jsx("p",{children:"У вас есть доступ ко всем функциям"})]})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🤖"}),u.jsx("span",{children:"ИИ-помощник"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Расширенная аналитика"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📈"}),u.jsx("span",{children:"Подробные отчеты"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"☁️"}),u.jsx("span",{children:"Синхронизация данных"})]})]})]}):u.jsxs("div",{className:"subscription-offer",children:[u.jsxs("div",{className:"offer-header",children:[u.jsx("h3",{children:"Получите больше возможностей"}),u.jsxs("div",{className:"price",children:["299₽",u.jsx("span",{className:"price-period",children:"/месяц"})]})]}),u.jsxs("div",{className:"offer-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🤖"}),u.jsx("span",{children:"Персональный ИИ-помощник"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Детальная аналитика питания"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📈"}),u.jsx("span",{children:"Графики и отчеты"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🎯"}),u.jsx("span",{children:"Персональные рекомендации"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"☁️"}),u.jsx("span",{children:"Резервное копирование данных"})]})]}),u.jsx("button",{className:"subscribe-btn",onClick:()=>{var t,e;(null==(e=null==(t=window.Telegram)?void 0:t.WebApp)?void 0:e.showPopup)?window.Telegram.WebApp.showPopup({title:"Cal AI Premium",message:"Получите доступ к расширенной аналитике, ИИ-помощнику и безлимитным функциям за 299₽/месяц",buttons:[{id:"subscribe",type:"default",text:"Подписаться"},{id:"cancel",type:"cancel",text:"Отмена"}]},(t=>{"subscribe"===t&&(s(),window.Telegram.WebApp.showAlert("Подписка успешно оформлена! 🎉"))})):s()},children:"Подписаться на Premium"})]})]}),u.jsxs("div",{className:"settings__section",children:[u.jsx("h2",{children:"🔧 Прочее"}),u.jsxs("div",{className:"settings-list",children:[u.jsxs("button",{className:"settings-item",onClick:()=>a("assistant"),children:[u.jsx("span",{className:"settings-icon",children:"🤖"}),u.jsxs("div",{className:"settings-text",children:[u.jsx("span",{className:"settings-title",children:"Помощник"}),u.jsx("span",{className:"settings-desc",children:"Получить совет по питанию"})]}),u.jsx("span",{className:"settings-arrow",children:"›"})]}),u.jsxs("button",{className:"settings-item",onClick:()=>a("history"),children:[u.jsx("span",{className:"settings-icon",children:"📈"}),u.jsxs("div",{className:"settings-text",children:[u.jsx("span",{className:"settings-title",children:"История"}),u.jsx("span",{className:"settings-desc",children:"Просмотр аналитики"})]}),u.jsx("span",{className:"settings-arrow",children:"›"})]}),u.jsxs("div",{className:"settings-item settings-item--danger",children:[u.jsx("span",{className:"settings-icon",children:"🗑️"}),u.jsxs("div",{className:"settings-text",children:[u.jsx("span",{className:"settings-title",children:"Сбросить данные"}),u.jsx("span",{className:"settings-desc",children:"Удалить все данные приложения"})]})]})]})]}),u.jsx("div",{className:"settings__danger-zone",children:u.jsx("button",{className:"reset-btn",onClick:()=>{window.confirm("Вы уверены? Все данные будут удалены безвозвратно.")&&r()},children:"🗑️ Сбросить все данные"})}),u.jsxs("div",{className:"settings__footer",children:[u.jsx("p",{children:"Cal AI v1.0.0"}),u.jsx("p",{children:"Аналог популярного приложения для подсчета калорий"})]})]})},io=({icon:t,isActive:e=!1,animationType:i="default",size:n=28,className:s=""})=>{const r=(()=>{switch(i){case"bounce":return{initial:{scale:1,rotate:0},hover:{scale:1.1,rotate:[0,-10,10,-5,5,0],transition:{rotate:{duration:.6},scale:{duration:.2}}},active:{scale:1.2,rotate:[0,360],transition:{rotate:{duration:.8,ease:"easeInOut"},scale:{duration:.3}}}};case"pulse":return{initial:{scale:1},hover:{scale:[1,1.2,1],transition:{duration:.6,ease:"easeInOut"}},active:{scale:[1,1.3,1.1],transition:{duration:.5,ease:"easeOut"}}};case"wiggle":return{initial:{rotate:0},hover:{rotate:[0,-15,15,-10,10,-5,5,0],transition:{duration:.8}},active:{rotate:[0,-20,20,-15,15,-10,10,0],scale:[1,1.1,1],transition:{duration:1}}};case"float":return{initial:{y:0},hover:{y:[-2,2,-2],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}},active:{y:[0,-8,0],scale:[1,1.1,1],transition:{duration:.6}}};case"spin":return{initial:{rotate:0},hover:{rotate:360,transition:{duration:.8,ease:"easeInOut"}},active:{rotate:[0,180,360],scale:[1,1.2,1],transition:{duration:1}}};default:return{initial:{scale:1,rotate:0},hover:{scale:1.05,transition:{duration:.2}},active:{scale:1.1,transition:{duration:.3}}}}})(),a={inactive:{opacity:0,scale:1},active:{opacity:[.3,.6,.3],scale:[1,1.2,1],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}};return u.jsxs("div",{className:`animated-icon ${s}`,style:{position:"relative"},children:[e&&u.jsx(ra.div,{className:"icon-glow",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:n+20,height:n+20,background:"radial-gradient(circle, rgba(0, 122, 255, 0.3) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none",zIndex:-1},variants:a,animate:e?"active":"inactive"}),u.jsxs(ra.div,{className:"icon-wrapper",style:{fontSize:n,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:1},variants:r,initial:"initial",whileHover:"hover",animate:e?"active":"initial",children:[e&&u.jsx(u.Fragment,{children:[...Array(6)].map(((t,e)=>u.jsx(ra.div,{style:{position:"absolute",width:2,height:2,background:"#007aff",borderRadius:"50%",pointerEvents:"none"},animate:{x:[0,25*Math.cos(60*e*Math.PI/180)],y:[0,25*Math.sin(60*e*Math.PI/180)],opacity:[1,0],scale:[0,1,0]},transition:{duration:1.5,delay:.1*e,repeat:1/0,repeatDelay:2}},e)))}),u.jsx(ra.span,{style:{display:"block",filter:e?"drop-shadow(0 0 8px rgba(0, 122, 255, 0.6))":"none"},animate:e?{textShadow:["0 0 8px rgba(0, 122, 255, 0.6)","0 0 16px rgba(0, 122, 255, 0.8)","0 0 8px rgba(0, 122, 255, 0.6)"]}:{},transition:{duration:2,repeat:e?1/0:0,ease:"easeInOut"},children:t})]})]})},no=({currentScreen:t,onNavigate:e,foodEntriesCount:i})=>{const n=[{id:"results",icon:"🏠",label:"Главная",screen:"results",animationType:"pulse"},{id:"food",icon:"📷",label:"Добавить",screen:"food",animationType:"bounce"},{id:"summary",icon:"📊",label:"Дневник",screen:"summary",badge:i>0?i:null,animationType:"wiggle"},{id:"assistant",icon:"🤖",label:"Помощник",screen:"assistant",animationType:"float"},{id:"history",icon:"📈",label:"История",screen:"history",animationType:"spin"},{id:"settings",icon:"⚙️",label:"Настройки",screen:"settings",animationType:"spin"}],s={hidden:{y:20,opacity:0,scale:.8},visible:{y:0,opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:20}}},r={active:{scale:1.1,y:-4,transition:{type:"spring",stiffness:400,damping:15}},inactive:{scale:1,y:0,transition:{type:"spring",stiffness:300,damping:20}}},a={hidden:{scale:0,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",stiffness:500,damping:15}},pulse:{scale:[1,1.2,1],transition:{duration:.6,repeat:1/0,repeatDelay:2}}};return u.jsxs(ra.nav,{className:"navigation",variants:{hidden:{y:100,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:30,staggerChildren:.1}},exit:{y:100,opacity:0,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",children:[u.jsx("div",{className:"nav-container",children:n.map(((i,n)=>{const o=t===i.screen;return u.jsxs(ra.button,{className:"nav-item "+(o?"nav-item--active":""),variants:s,animate:o?"active":"inactive",whileHover:{scale:1.05,y:-2,transition:{duration:.2}},whileTap:{scale:.95,transition:{duration:.1}},onClick:()=>e(i.screen),children:[u.jsxs(ra.div,{className:"nav-icon",variants:r,animate:o?"active":"inactive",children:[u.jsx(io,{icon:i.icon,isActive:o,animationType:i.animationType,size:24}),u.jsx(ha,{children:i.badge&&u.jsx(ra.span,{className:"nav-badge",variants:a,initial:"hidden",animate:["visible","pulse"],exit:"hidden",children:i.badge},i.badge)})]}),u.jsx(ra.span,{className:"nav-label",animate:{color:o?"var(--primary-color)":"var(--secondary-text-color)",fontWeight:o?600:400},transition:{duration:.2},children:i.label}),o&&u.jsx(ra.div,{className:"nav-active-indicator",layoutId:"activeIndicator",transition:{type:"spring",stiffness:400,damping:30}}),u.jsx(ra.div,{className:"nav-ripple",initial:{scale:0,opacity:.3},whileTap:{scale:4,opacity:0,transition:{duration:.4}}})]},i.id)}))}),u.jsx(ra.div,{className:"nav-glow",animate:{opacity:[.3,.6,.3],scale:[1,1.02,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})},so=({children:t,screenKey:e,direction:i="right"})=>u.jsx(ha,{mode:"wait",custom:i,children:u.jsx(ra.div,{custom:i,variants:{enter:t=>({x:"right"===t?1e3:-1e3,opacity:0,scale:.8}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:t=>({zIndex:0,x:"right"===t?-1e3:1e3,opacity:0,scale:.8})},initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2},scale:{type:"spring",stiffness:400,damping:25}},className:"animated-screen",children:t},e)}),ro=({particleCount:t=50,colors:i=["#007aff","#34c759","#af52de","#ff9500"],opacity:n=.6,size:s={min:2,max:6},speed:r={min:20,max:40},className:a=""})=>{const[o,l]=e.useState([]),[c,d]=e.useState({width:0,height:0});e.useEffect((()=>{const t=()=>{d({width:window.innerWidth,height:window.innerHeight})};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),e.useEffect((()=>{if(c.width&&c.height){const e=Array.from({length:t},((t,e)=>({id:e,x:Math.random()*c.width,y:Math.random()*c.height,size:Math.random()*(s.max-s.min)+s.min,color:i[Math.floor(Math.random()*i.length)],speedX:2*(Math.random()-.5),speedY:2*(Math.random()-.5),rotation:360*Math.random(),rotationSpeed:4*(Math.random()-.5),pulsePhase:Math.random()*Math.PI*2,drift:{x:100*Math.random()-50,y:100*Math.random()-50}})));l(e)}}),[c,t,i,s]);const p={floating:t=>({x:[t.x,t.x+t.drift.x,t.x-t.drift.x,t.x],y:[t.y,t.y+t.drift.y,t.y-t.drift.y,t.y],rotate:[t.rotation,t.rotation+360*t.rotationSpeed],scale:[1,1.2,.8,1],opacity:[.3*n,n,.5*n,.3*n],transition:{duration:Math.random()*r.max+r.min,repeat:1/0,ease:"easeInOut",delay:5*Math.random()}})};return u.jsxs("div",{className:`particle-background ${a}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:-1,overflow:"hidden"},children:[o.map((t=>u.jsx(ra.div,{className:"particle",style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:"50%",filter:"blur(1px)",boxShadow:`0 0 ${2*t.size}px ${t.color}40`},variants:p,animate:"floating",custom:t,initial:{x:t.x,y:t.y,opacity:0}},t.id))),u.jsx(ra.div,{className:"gradient-orb",style:{position:"absolute",top:"20%",left:"10%",width:200,height:200,background:"radial-gradient(circle, rgba(0, 122, 255, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(40px)"},animate:{scale:[1,1.2,1],opacity:[.3,.6,.3],x:[0,50,0],y:[0,30,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),u.jsx(ra.div,{className:"gradient-orb",style:{position:"absolute",top:"60%",right:"15%",width:150,height:150,background:"radial-gradient(circle, rgba(52, 199, 89, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(30px)"},animate:{scale:[1.2,1,1.2],opacity:[.4,.7,.4],x:[0,-30,0],y:[0,-20,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut",delay:2}}),u.jsx(ra.div,{className:"gradient-orb",style:{position:"absolute",top:"40%",right:"60%",width:100,height:100,background:"radial-gradient(circle, rgba(175, 82, 222, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(25px)"},animate:{scale:[1,1.3,1],opacity:[.2,.5,.2],x:[0,40,0],y:[0,-40,0]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:4}})]})};function ao(){const[t,i]=e.useState("onboarding"),[n,s]=e.useState(null),[r,a]=e.useState(null),[o,l]=e.useState([]),[c,d]=e.useState(!1);e.useEffect((()=>{var t;if(null==(t=window.Telegram)?void 0:t.WebApp){const t=window.Telegram.WebApp;t.ready(),t.expand(),t.setHeaderColor(t.themeParams.bg_color||"#ffffff"),t.setBackgroundColor(t.themeParams.bg_color||"#ffffff"),t.MainButton.setParams({text:"Продолжить",is_visible:!1}),t.onEvent("mainButtonClicked",x),t.onEvent("backButtonClicked",g)}p()}),[]),e.useEffect((()=>{m()}),[t,n]);const p=()=>{try{const t=localStorage.getItem("userProfile"),e=localStorage.getItem("foodEntries"),n=localStorage.getItem("isSubscribed");if(t){const e=JSON.parse(t);s(e),a(Ra(e)),i("results")}e&&l(JSON.parse(e)),n&&d(JSON.parse(n))}catch(t){console.error("Ошибка загрузки данных:",t)}},h=(t,e)=>{try{t&&localStorage.setItem("userProfile",JSON.stringify(t)),e&&localStorage.setItem("foodEntries",JSON.stringify(e))}catch(i){console.error("Ошибка сохранения данных:",i)}},m=()=>{var e;if(!(null==(e=window.Telegram)?void 0:e.WebApp))return;const i=window.Telegram.WebApp;switch(t){case"onboarding":case"food":default:i.MainButton.hide();break;case"results":i.MainButton.setParams({text:"📷 Добавить еду",is_visible:!0})}},x=()=>{if("results"===t)i("food")},g=()=>{switch(t){case"food":case"summary":case"assistant":case"history":case"settings":i("results")}},f=t=>{const e=Ra(t);s(t),a(e),i("results"),h(t,o)},y=t=>{const e=t.map((t=>({...t,id:Date.now()+Math.random(),timestamp:new Date,date:(new Date).toDateString()}))),s=[...o,...e];l(s),h(n,s),i("summary")},v=(t,e)=>{const i=o.map((i=>i.id===t?{...i,...e}:i));l(i),h(n,i)},b=t=>{const e=o.filter((e=>e.id!==t));l(e),h(n,e)},j=()=>{s(null),a(null),l([]),i("onboarding"),localStorage.clear()},w=()=>{d(!0),localStorage.setItem("isSubscribed",JSON.stringify(!0))},S="onboarding"!==t&&n;return u.jsxs("div",{className:"container",children:[u.jsx(ro,{particleCount:30,opacity:.4,size:{min:1,max:4},speed:{min:15,max:30}}),u.jsx(so,{screenKey:t,children:(()=>{switch(t){case"onboarding":default:return u.jsx(Ta,{onComplete:f});case"results":return u.jsx(Va,{calorieData:r,userProfile:n,onReset:j,onNavigate:i});case"food":return u.jsx(Ka,{userProfile:n,calorieData:r,onFoodAdd:y,onBack:()=>i("results")});case"summary":return u.jsx(Ja,{foodEntries:o,calorieData:r,userProfile:n,onEdit:v,onDelete:b,onNavigate:i});case"assistant":return u.jsx(Qa,{foodEntries:o,calorieData:r,userProfile:n,isSubscribed:c,onNavigate:i});case"history":return u.jsx(to,{foodEntries:o,userProfile:n,isSubscribed:c,onNavigate:i});case"settings":return u.jsx(eo,{userProfile:n,isSubscribed:c,onProfileUpdate:t=>{s(t),a(Ra(t)),h(t,o)},onSubscribe:w,onReset:j,onNavigate:i})}})()}),S&&u.jsx(no,{currentScreen:t,onNavigate:i,foodEntriesCount:o.filter((t=>t.date===(new Date).toDateString())).length})]})}(null==(t=window.Telegram)?void 0:t.WebApp)&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand()),m.createRoot(document.getElementById("root")).render(u.jsx(n.StrictMode,{children:u.jsx(ao,{})}));
